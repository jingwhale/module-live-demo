<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"mobileUtil.js.html":{"id":"mobileUtil.js.html","title":"Source: mobileUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: mobileUtil.js /** * --------------------mobile相关的util--------------------- * * @module mobileUtil * @version 1.0 * @author hzcaohuanhuan(hzcaohuanhuan@corp.netease.com) * @path eutil/mobileUtil * -------------------------------------------------------- */ NEJ.define(['./adapter/nej.js', './versionUtil.js'], function(_adapter, _versionUtil){ var _module = {}, g = (function(){return this;})(); /** * 判断是否是webView显示, 用来跳转到相应app页面 * * @study * NetEaseEdu (aphone;study; *.*.*; channel=***; ) * NetEaseEdu (apad;study; *.*.*; channel=***; ) * NetEaseEdu (iphone:study: *.*.*; channel=appstore; ) * NetEaseEdu (ipad:study: *.*.*; channel=appstore; ) * * @mooc * NetEaseEdu (aphone; EDUMOOC; %s; channel=%s; imei=%s) * Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Mobile/13B143 EDUMOOC/1.1.3 * * @k12 * NetEaseEdu (aphone;k12; *.*.*; channel=***; ) * NetEaseEdu (iphone:k12: *.*.*; channel=appstore; ) * * @enterprise * NetEaseEdu.*study-enterprise:(.*);channel=(.*) iphone * NetEaseEdu.*study-enterprise; (.*); channel=(.*) android */ var _androidWebView = new RegExp(&quot;NetEaseEdu.*study; (.*); channel=(.*)&quot;,'i'), _androidEnterpriseWebView = new RegExp(&quot;NetEaseEdu.*study-enterprise; (.*); channel=(.*)&quot;,'i'), //企业 _iosWebView = new RegExp(&quot;NetEaseEdu.*study:(.*);channel=(.*)&quot;,'i'), _iosEnterpriseWebView = new RegExp(&quot;NetEaseEdu.*study-enterprise:(.*);channel=(.*)&quot;,'i'), //企业 _moocAndroidWebView = new RegExp(&quot;NetEaseEdu.*EDUMOOC; (.*); channel=(.*)&quot;,'i'), _moocIosWebView= new RegExp(&quot;.*EDUMOOC\\/(.*)&quot;,'i'), _K12AndroidWebView = new RegExp(&quot;NetEaseEdu.*k12; (.*); channel=(.*)&quot;,'i'), _k12IosWebView = new RegExp(&quot;NetEaseEdu.*k12:(.*);channel=(.*)&quot;,'i'), _useragent = g.navigator.userAgent, ctrlDMobile = g.isMobilePhone; /** * 获取userAgnet * @method _$getUserAgent * @param {Void} */ _module._$getUserAgent = function(){ return _useragent; }; /** * 判断是否安卓study WebView * @method _$isAndroidWebView * @param {Void} */ _module._$isAndroidWebView = function(){ var _useragent = _module._$getUserAgent(); return _useragent.match(_androidWebView); }; /** * 判断是否ios study WebView * @method _$isIosWebView * @param {Void} */ _module._$isIosWebView = function(){ var _useragent = _module._$getUserAgent(); return _useragent.match(_iosWebView); }; /** * 判断是否android study enterprise WebView */ _module._$isAndroidEnterpriseWebView = function(){ var _useragent = _module._$getUserAgent(); return _useragent.match(_androidEnterpriseWebView); } /** * 判断是否ios study enterprise WebView */ _module._$isIosEnterpriseWebView = function(){ var _useragent = _module._$getUserAgent(); return _useragent.match(_iosEnterpriseWebView); } /** * 判断是否安卓mocc webView * @method _$isAndroidMoocWebView * @param {Void} */ _module._$isAndroidMoocWebView = function(){ var _useragent = _module._$getUserAgent(); return _useragent.match(_moocAndroidWebView); }; /** * 判断是否IOS mooc webView * @method _$isIosMoocWebView * @param {Void} */ _module._$isIosMoocWebView = function(){ var _useragent = _module._$getUserAgent(); return _useragent.match(_moocIosWebView); }; /** * 判断是否android k12 webView * @method _$isAndroidK12webView * @param {Void} */ _module._$isAndroidK12webView = function () { var _useragent = _module._$getUserAgent(); return _useragent.match(_K12AndroidWebView); }; /** * 判断是否ios k12 webView * @method _$isIosK12webView * @param {Void} */ _module._$isIosK12webView = function () { var _useragent = _module._$getUserAgent(); return _useragent.match(_k12IosWebView); }; /** * 判断是否WebView * @method _$isWebView * @param {Void} */ _module._$isWebView = function(){ return _module._$isAndroidWebView() || _module._$isIosWebView() || _module._$isAndroidK12webView() || _module._$isIosK12webView(); }; /** * 判断是否WebView 且支持jsbridge 唤醒app登陆 * @method _$isWebViewSupportJB * @param {Void} */ _module._$isWebViewSupportJB = function(){ var _isAWV = _module._$isAndroidWebView(), _isIWV = _module._$isIosWebView(), _isMoocAWV = _module._$isAndroidMoocWebView(), _isMoocIWV = _module._$isIosMoocWebView(); if(_isAWV || _isIWV || _isMoocAWV || _isMoocIWV){ if(_isAWV != null){ return (_versionUtil._$versionCompare(_isAWV[1], '2.0.0') &gt;= 0); //study android 2.0.0版本 }else if(_isIWV != null){ return (_versionUtil._$versionCompare(_isIWV[1], '3.0.0') &gt;= 0); //study iOS 3.0.0版本 }else if(_isMoocAWV != null){ return (_versionUtil._$versionCompare(_isMoocAWV[1], '1.2.2') &gt;= 0); //mooc android 1.2.2版本 }else if(_isMoocIWV != null){ return (_versionUtil._$versionCompare(_isMoocIWV[1], '1.1.3') &gt;= 0); //mooc iOS 1.1.3版本 } }else{ return false; } }; /** * 判断是否是移动端非适配页面 * @method _$isMobile * @param {Void} */ _module._$isMobile = function(){ if(_module._$isWap()){ return !0; } return _module._$isMobileAll(); }; /** * 判断是否是该平台 * @method _$is * @param {Void} */ _module._$is = function(_platform){ var regx = new RegExp('('+_platform+')','ig'), _useragent = _module._$getUserAgent(); return regx.test(_useragent); }; /** * 判断是否是移动端 * @method _$isMobileAll * @param {Void} * */ _module._$isMobileAll = function(){ var _useragent = _module._$getUserAgent(); return _useragent.match(/(iPhone|iPod|Android|BlackBerry|mobile|Windows Phone)/); }; /** * 判断是否是Ipad端 * @method _$isIpad * @param {Void} */ _module._$isIpad = function(){ return _module._$is('iPad'); }; /** * 判断是否是iphone端 * @method _$isIphone * @param {Void} */ _module._$isIphone = function(){ var _useragent = _module._$getUserAgent(); return _useragent.indexOf('iPhone') &gt; -1 ; }; /** * 判断是否是android端 * @method _$isAndroid * @param {Void} */ _module._$isAndroid = function(){ var _useragent = _module._$getUserAgent(); return _useragent.indexOf('Android') &gt; -1 || _useragent.indexOf('Adr') &gt; -1 ; }; /** * 判断是否是移动端适配页面 * @method _$isWap * @param {Void} */ _module._$isWap = function(){ return (ctrlDMobile == 'true'); }; /** * 判断是否是微信打开 * @method _$isWeixin * @param {Void} */ _module._$isWeixin = function(){ return _module._$is('micromessenger'); }; /** * [_$getIosVersion 返回ios的版本如 8,9] * @method _$getIosVersion * @param {Void} * @return {Number} iosVersion * @author hzchenbo2014 */ _module._$getIosVersion = function(){ var agent = _useragent.toLowerCase(), version; if(agent.indexOf(&quot;like mac os x&quot;) &gt; 0){ //ios var regStr_saf = /os [\\d._]*/gi ; var verinfo = agent.match(regStr_saf) ; version = (verinfo+&quot;&quot;).replace(/[^0-9|_.]/ig,&quot;&quot;).replace(/_/ig,&quot;.&quot;); } var version_str = version+&quot;&quot;; if(version_str != &quot;undefined&quot; &amp;&amp; version_str.length &gt;0){ version = version.substring(0,1); }else{ version = 0; } return version; }; /** * 打开移动端页面 * * @deprecated * @method _$openMobilePage * @param {Void} */ _module._$openMobilePage = function(param, callback){ var _lookUrl = ''; if (!_module.isWebView()) { return; } if(_module._$is('android')){ if(!!param.lessonId){ //android打开课时直接学习 _lookUrl = 'yktaphone://open.lesson.ykt/'+param.courseId+'_'+param.lessonId; }else{ //android打开课程 _lookUrl = 'yktaphone://open.course.ykt/'+param.courseId; } }else{ if(!!param.lessonId){ //ios打开课时直接学习 _lookUrl = 'yktiphone://type=4-&amp;-content='+param.courseId+'_'+param.lessonId; }else{ //ios打开课程 _lookUrl = 'yktiphone://type=0-&amp;-content='+param.courseId; } } var _frame = document.createElement(&quot;iframe&quot;); _frame.setAttribute(&quot;style&quot;, &quot;display:none;width:0;height:0;position: absolute;top:0;left:0;border:0;height:0;width:0;&quot;); _frame.src = _lookUrl; document.body.appendChild(_frame); }; /** * 唤起app，如果失败去下载 * 微信打开，去中间页，提示用浏览器打开 * iphone，不论是否唤起，都有下一步操作，跳转到下载页中间页，传_type = fromCallApp * android,唤起app，失败跳转到下载页中间页 * * @deprecated * @author hzchenbo2014 * @method _$callAppDownload * @param {Void} */ _module._$callAppDownload = function(_type , _param){ var _openUrl = ''; _param = _param || {}; if(_module._$is('android')){ if(!!_param.termId &amp;&amp; !!_param.courseId){ //android打开课时直接学习 _openUrl = 'yktaphone://open.course.yoc/'+_param.courseId+'_'+_param.termId; }else if(!!_param.courseId){ //android打开课程 _openUrl = 'yktaphone://open.course.ykt/'+_param.courseId; }else{ _openUrl = &quot;yktaphone://launch.app&quot;; } }else{ if(!!_param.termId &amp;&amp; !!_param.courseId){ //ios打开课时直接学习 _openUrl = 'yktiphone://type=6-&amp;-content='+_param.courseId+'_'+_param.termId; }else if(!!_param.courseId){ //ios打开课程 _openUrl = 'yktiphone://type=0-&amp;-content='+_param.courseId; }else{ _openUrl = &quot;yktiphone://&quot;; } } if(_module._$isWeixin()){ window.location.href = g.callAppDownloadHref+ &quot;?source=fromWeixin&amp;courseId=&quot; + (_param.courseId || '') + &quot;&amp;termId=&quot; + (_param.termId || ''); }else if(_module._$is('iphone')){ //ios9以下用iframe方式，ios9用openAppByForm if(_module._$getIosVersion() &gt; 8){ //window.location.href = _openUrl; this._$openAppByForm(_openUrl); }else{ this._$openAppByIframe(_openUrl); } if(_type == &quot;fromCallApp&quot;){ setTimeout(function(){ window.location.href = g.callAppDownloadHref+ &quot;?source=fromCallApp&amp;courseId=&quot; + (_param.courseId || '') + &quot;&amp;termId=&quot; + (_param.termId || ''); },2000); return; } }else if(_module._$is('android')){ this._$openAppByIframe(_openUrl); } // 超时未打开则跳转到下载页面 setTimeout(function(){ window.location.href = g.appDownloadHref + &quot;?from=mobileTopbar&quot;; },2000); }; /** * _module - iframe的方式打开app * * @param {type} url description * @return {type} description */ _module._$openAppByIframe = function(url) { var _frame = document.createElement(&quot;iframe&quot;); _frame.setAttribute(&quot;style&quot;, &quot;width:0;height:0;display:none&quot;); _frame.src = url; document.body.appendChild(_frame); _frame.parentNode.removeChild(_frame); }; /** * _module - 模拟form的方式打开App * * @param {type} url description * @return {type} description */ _module._$openAppByForm = function(url) { var sfForm = document.createElement(&quot;form&quot;); document.body.appendChild(sfForm); sfForm.method = &quot;post&quot;; sfForm.action = url; sfForm.submit(); }; /** * app 支付唤起（common） * * @deprecated * @param {object} _options * @param {object} _options.productType * @param {object} _options.productId * @param {object} _options.ids 购物车下单 * @param {object} cb 回掉函数 * * @return {boolean} 是否支持该种方式 */ _module._$callPayApp = function(_options, cb){ if(!!_module._$isWebViewSupportJB() &amp;&amp; !!g.YixinJSBridge){ //调用JSbridge唤醒Native g.YixinJSBridge.call('toPay',{ 'productType': _options.productType || 0, 'productId': _options.productId || 0, 'ids' : _options.ids || [] }, function(e){ //成功 cb &amp;&amp; cb(e); }); return true; } return false; }; /** * app 唤起分享 * * @deprecated * @param {object} _options * @param {String} _options.title 分享标题 * @param {String} _options.description 分享的描述 * @param {String} _options.pic 分享图片的链接 * @param {String} _options.type=1 * @param {object} _options.data * @param {String} _options.data.url 分享页面的链接 * @param {String} _options.data.courseId 课程ID (可以不填) * @param {String} _options.data.weiboDesc 微博分享描述 * * @return {boolean} 是否支持该种方式 */ _module._$callShareApp = function(_options, cb){ if(!!_module._$isWebViewSupportJB() &amp;&amp; !!g.YixinJSBridge){ _options.type = _options.type || 1; //调用JSbridge唤醒Native g.YixinJSBridge.call('share', _options, function(e){ window.alert(&quot;分享成功&quot;) //成功 cb &amp;&amp; cb(e); }); return true; } return false; }; /** * 微信设置分享朋友圈内容, 以及app webview 的分享 * * @deprecated * @param {object} share * @param {String} share.title * @param {String} share.url * @param {String} share.description * @param {String} share.pic */ _module._$setThirdShare = function(share){ var wx = g.wx, defaultShareImg = &quot;http://img2.ph.126.net/rqkJ8avE5_3Dn1l4TtnYDw==/6630541099630412039.png&quot;, title = document.title, href = document.location.href; if(_module._$isWeixin() &amp;&amp; wx){ /*分享到朋友圈*/ wx.onMenuShareTimeline({ title: share.title || title, /* 分享标题*/ link: share.url || href, /* 分享链接*/ imgUrl: share.pic || defaultShareImg, /* 分享图标*/ success: function () { /* 用户确认分享后执行的回调函数*/ }, cancel: function () { /* 用户取消分享后执行的回调函数*/ } }); /*发送给朋友*/ wx.onMenuShareAppMessage({ title: share.title || title, /* 分享标题*/ desc: share.description || '', /* 分享描述*/ link: share.url || href, /* 分享链接*/ imgUrl: share.pic || defaultShareImg, /* 分享图标*/ type: '', /* 分享类型,music、video或link，不填默认为link*/ dataUrl: '', /* 如果type是music或video，则要提供数据链接，默认为空*/ success: function () { /* 用户确认分享后执行的回调函数*/ }, cancel: function () { /* 用户取消分享后执行的回调函数*/ } }); }else{ /** 给app塞的分享数据 */ g.appShareData = { title : share.title || title, description : share.description || '', pic : share.pic || defaultShareImg, weiboDesc : share.description || '', weiboPic : share.pic || defaultShareImg, url : share.url || href, type : 1 }; // 易信的分享 g.shareData = { &quot;imgUrl&quot;: share.pic || defaultShareImg, &quot;timeLineLink&quot;: share.url || href, &quot;sendFriendLink&quot;: share.url || href, &quot;weiboLink&quot;: share.url || href, &quot;tTitle&quot;: share.title || title, &quot;tContent&quot;: share.description || '', &quot;fTitle&quot;: share.title || title, &quot;fContent&quot;: share.description || '', &quot;wContent&quot;: share.description || '' }; } }; return _module; }); × Search results Close "},"timeUtil.js.html":{"id":"timeUtil.js.html","title":"Source: timeUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: timeUtil.js /** * -------TimerUtil模块对象，用于获取时间，以及格式化时间------------- * * @module timeUtil * @version 1.0 * @author tangtianliang(tangtianliang@corp.netease.com) * @path eutil/timeUtil * @requires module:encodeUtil * -------------------------------------------------------- */ // !function (name, definition) { // if (typeof module != 'undefined' &amp;&amp; module.exports) module.exports = definition(); // else if (typeof NEJ !== 'undefined' &amp;&amp; NEJ.define) NEJ.define(['eutil/adapter/nej', 'eutil/encodeUtil'],definition); // else this[name] = definition() // }('timeUtil', function (_adapter, EncodeUtil) { // if (typeof module !== 'undefined' &amp;&amp; module.exports) { // EncodeUtil = require('./encodeUtil'); // } NEJ.define(['./adapter/nej.js', './encodeUtil.js'], function(_adapter, EncodeUtil){ var _module = {}, g = (function(){return this;})(); /** * 获取服务器渲染相应页面的时间 * @method _$getServerRespondTime * @param {Void} * @return {millisec} 返回服务器渲染相应页面的时间毫秒 */ _module._$getServerRespondTime = (function(){ var _time = new Date().getTime(); return function(){ return g.serverTimeDiff ? (_time - g.serverTimeDiff) : _time; }; })(); /** * 返回当前服务器的时间 * @method _$getCurServerTime * @param {Void} * @return {millisec} 返回当前服务器的时间毫秒 */ _module._$getCurServerTime = function(){ var _time = new Date().getTime(); return g.serverTimeDiff ? (_time - g.serverTimeDiff) : _time; } /** * 返回时间类型串 * 格式化时间，yyyy|yy|MM|cM|eM|M|dd|d|HH|H|mm|ms|ss|m|s|w * * 各标识说明： * * | 标识 | 说明 | * | :-- | :-- | * | yyyy | 四位年份，如2001 | * | yy | 两位年费，如01 | * | MM | 两位月份，如08 | * | M | 一位月份，如8 | * | dd | 两位日期，如09 | * | d | 一位日期，如9 | * | HH | 两位小时，如07 | * | H | 一位小时，如7 | * | mm | 两位分钟，如03 | * | m | 一位分钟，如3 | * | ss | 两位秒数，如09 | * | s | 一位秒数，如9 | * | ms | 毫秒数，如234 | * | w | 中文星期几，如一 | * | ct | 12小时制中文后缀，上午/下午 | * | et | 12小时制英文后缀，A.M./P.M. | * | cM | 中文月份，如三 | * | eM | 英文月份，如Mar | * * @method _$getTimeData * @param {millisec} _time 时间毫秒 * @param {millisec} _12time 指定格式的时间串 * @return {Object} 格式化时间对象 * */ _module._$getTimeData = (function(){ var _map = {i:!0,r:/\\byyyy|yy|MM|cM|eM|M|dd|d|HH|H|mm|ms|ss|m|s|w|ct|et\\b/g}, _12cc = ['上午','下午'], _12ec = ['A.M.','P.M.'], _week = ['日','一','二','三','四','五','六'], _cmon = ['一','二','三','四','五','六','七','八','九','十','十一','十二'], _emon = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sept','Oct','Nov','Dec']; var _fmtnmb = function(_number){ _number = parseInt(_number)||0; return (_number&lt;10?'0':'')+_number; }; var _fmtclc = function(_hour){ return _hour&lt;12?0:1; }; return function(_time, _12time){ if (!_time) return ''; _time = new Date(_time*1); _map.yyyy = _time.getFullYear(); _map.yy = (''+_map.yyyy).substr(2); _map.M = _time.getMonth()+1; _map.MM = _fmtnmb(_map.M); _map.eM = _emon[_map.M-1]; _map.cM = _cmon[_map.M-1]; _map.d = _time.getDate(); _map.dd = _fmtnmb(_map.d); _map.H = _time.getHours(); _map.HH = _fmtnmb(_map.H); _map.m = _time.getMinutes(); _map.mm = _fmtnmb(_map.m); _map.s = _time.getSeconds(); _map.ss = _fmtnmb(_map.s); _map.ms = _time.getMilliseconds(); _map.w = _week[_time.getDay()]; var _cc = _fmtclc(_map.H); _map.ct = _12cc[_cc]; _map.et = _12ec[_cc]; if (!!_12time){ _map.H = _map.H%12; } return _map; }; })(); /** * 格式化时间戳 * @method _$formatTime * @param {number} _time 时间毫秒 * @param {string} _format 格式化规则 * @return {string} 格式化后的规则 */ _module._$formatTime = function(_time, _format, _12time){ return EncodeUtil._$encode(_module._$getTimeData(_time, _12time),_format || 'yyyy-MM-dd'); }; /** * 通用格式化时间 * @method _$formatCommonTime * @param {Number} _time 时间毫秒 * @return {String} 待定或yyyy年MM月dd日 HH:mm格式的时间 */ _module._$formatCommonTime = function(_time){ if(_time == 32503651201000 || _time == 32535187201000){ return '待定'; } return _module._$formatTime(_time, 'yyyy年MM月dd日 HH:mm'); } /** * 格式化时间段 * @method _$formatPeriod * @param {number} _fromTime 开始时间毫秒 * @param {number} _toTime 结束时间毫秒 * @param {string} _format 格式化规则 * @param {string} _conjunction 连接符 * @return {string} 格式化后的时间段 */ _module._$formatPeriod = function(_fromTime, _toTime, _format, _conjunction){ _fromTime = _fromTime || (+new Date()); _toTime = _toTime || (+new Date()); _format = _format || 'yyyy-MM-dd'; if(_fromTime == 32503651201000 &amp;&amp; _toTime == 32535187201000){ return '待定'; } return (EncodeUtil._$encode(_module._$getTimeData(_fromTime),_format) + (_conjunction?_conjunction:' - ') + EncodeUtil._$encode(_module._$getTimeData(_toTime),_format)); }; /** * 生成倒计时时间对象 * @method _$tiktok * @param {number} _endTime 截止时间毫秒 * @param {number} _curTime 当前时间毫秒 * @return {Object} 格式化时间对象 */ _module._$tiktok = function(_endTime, _curTime){ var _now = _curTime || this._$getCurServerTime(), _offtime = _endTime - _now, _d,_h,_m,_s; //小于1000毫秒 相当于时间截止 if(_offtime &lt; 1000){ return null; } _offtime = ~~(_offtime/1000); _d = ~~(_offtime/(3600*24)); _h = ~~((_offtime - 3600*24*_d)/3600); _m = ~~((_offtime - 3600*24*_d - 3600*_h)/60); _s = _offtime - 3600*24*_d - 3600*_h - _m*60; return { d: _d||0, h: _h||0, m: _m||0, s: _s||0 }; } /** * 格式化倒计时的时间 * @param {Number} _seconds 目标时间 * @return {String} 格式化后的字符串,如'12:25:36' */ _module._$formateTiktokByHMS = function(_end){ var _last = this._$tiktok(_end); var _h,_m,_s; if (!!_last){ _h = (_last.h+_last.d*24) &lt; 10?'0'+(_last.h+_last.d*24) : (_last.h+_last.d*24); _m = _last.m&lt;10?'0'+_last.m : _last.m; _s = _last.s&lt;10?'0'+_last.s : _last.s; return (_h + ':' + _m +':'+ _s); } return ''; } /** * 格式化倒计时的时间 * @method _$formatTiktokTime * @param {Number} _endTime 目标时间 * @param {Number} _curTime 当前时间 * @return {String} 格式化后的字符串, * 倒计时长大于1天 5天5时5分钟 * 倒计时长大于1时小于1天 5时5分钟 * 倒计时长大于1分小于1时 5分钟 * 倒计时长大于1秒小于1分 5秒钟 */ _module._$formatTiktokTime = function(_endTime, _curTime){ var _last = this._$tiktok(_endTime, _curTime); if(!_last){ return null; } if(_last.d &gt;= 1){ return (_last.d +'天' + _last.h +'小时'+_last.m +'分钟'); }else if(_last.h &gt;= 1){ return (_last.h +'小时' + _last.m +'分钟'); }else if(_last.m &gt;= 1){ return (_last.m +'分钟'); }else{ return (_last.s +'秒钟'); } } /** * 获取当前是上午、下午等等 * @method _$getCurDayPharse * @return {string} 时间状态 */ _module._$getCurDayPharse = function() { var _now = new Date(this._$getCurServerTime()), _hour = _now.getHours(), _str = ''; if (_hour &lt; 6) { _str = '凌晨'; } else if (_hour &lt; 9) { _str = '早上'; } else if (_hour &lt; 12) { _str = '上午'; } else if (_hour &lt; 14) { _str = '中午'; } else if (_hour &lt; 17) { _str = '下午'; } else if (_hour &lt; 24) { _str = '晚上'; } return _str; }; /** * 获取回复时间 * @description 显示规则： * 一分钟内：4s 前 * 今天：19：52 * 昨天以前：3月2日 * 一年前（自然年）：2015年11月21日 * @method _$getReplyTime * @param {number} _millisec 时间毫秒 * @return {string} 时间状态 */ _module._$getReplyTime = function(_millisec) { var _replyTime = new Date(_millisec || 0); //设置需要格式化的时间 var _curTime = new Date(this._$getCurServerTime()); //当前时间 if(_curTime.getTime() &lt; _replyTime.getTime()){ //客户端时间反而更小 return '1秒前'; } else if(_curTime.getFullYear() != _replyTime.getFullYear()){ //非同一年 return _module._$formatTime(_millisec, 'yyyy年MM月dd日'); } else if((_curTime.getMonth() != _replyTime.getMonth()) || (_curTime.getDate() != _replyTime.getDate())){ //大于24小时 return _module._$formatTime(_millisec, 'MM月dd日'); } else if(_curTime.getHours() != _replyTime.getHours()){ //大于1小时 return _module._$formatTime(_millisec, 'HH:mm'); } else if(_curTime.getMinutes() != _replyTime.getMinutes()){ //不足1小时 return (_curTime.getMinutes() - _replyTime.getMinutes()) + '分钟前'; } else if(_curTime.getSeconds() != _replyTime.getSeconds()){ //不足1分钟 return (_curTime.getSeconds() - _replyTime.getSeconds()) + '秒前'; } else{ return '1秒前'; } }; /** * 格式化视频时长，目前只显示分钟和秒数 * @method _$Millisec2Str * @param {Number} _seconds 秒数 * @return {String} 格式化后的字符串，如：‘86:08’ , 有小时的显示‘11：21：21’ */ _module._$Millisec2Str = _module._$formatVideoTime = function(_seconds){ _seconds = (_seconds || 0); var _hour = Math.floor(_seconds / 3600), _minute = Math.floor(_seconds / 60) - _hour * 60, _second = Math.floor(_seconds % 60), _str = (_minute &lt; 10 ? '0'+_minute : _minute) + ':' + (_second &lt; 10 ? '0'+_second : _second); if(_hour &gt; 0){ _str = (_hour &lt; 10 ? '0' + _hour : _hour) + ':' + _str; } return _str; }; /** * 把格式化的视频时长转换回秒数 * @method _$str2Millisec * @param {String} _strTime 格式化后的字符串，如：‘86:08’ , 有小时的显示‘11：21：21’ * @return {Number} _seconds 秒数 */ _module._$str2Millisec = function(_strTime){ var _timeArr = _strTime.split(':'), _seconds = 0; var _index = _timeArr.length -1, min2sec = (_index-1) &gt;= 0 ? _timeArr[_index-1] * 60 :0, hour2sec = (_index-2) &gt;= 0 ? _timeArr[_index-2] * 3600 :0 ; return Number(_timeArr[_index]) + min2sec + hour2sec; }; return _module; }); × Search results Close "},"jsbridgeUtil.js.html":{"id":"jsbridgeUtil.js.html","title":"Source: jsbridgeUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: jsbridgeUtil.js /** * --------------------jsbridge相关的util--------------------- * * @module jsbridgeUtil * @version 1.0 * @author hzzhanghanhui(hzzhanghanhui@corp.netease.com) * @path eutil/jsbridgeUtil * -------------------------------------------------------- */ NEJ.define([ './adapter/nej.js', './versionUtil.js', './mobileUtil.js'],function( _adapter, _versionUtil, _mobileUtil ) { /** * jsbridge包含的方法(begin)--------------------------------------------- * * _$isSupportOpenLiveRoom() 是否支持打开聊天室 * _$openLiveRoom({liveRoomId:10000},function(){}) 打开聊天室 * * jsbridge包含的方法(end)----------------------------------------------- */ var g = window, _module = {}, _isAWV = _mobileUtil._$isAndroidWebView(), _isIWV = _mobileUtil._$isIosWebView(); /** * _module._$isSupportOpenLiveRoom - 是否支持打开App内聊天室 * * @param {String} _platForm 平台，取值为 'iPhone' 'Android' * @param {String} _v 版本，取值格式为 'x.x.x' * @return {Boolean} 是否支持，默认为发生了，true表示支持，false表示不支持 */ _module._$isSupportOpenLiveRoom = function() { // iPhone app 需要4.0.0以上 if(_isIWV &amp;&amp; (_isIWV.length &gt; 1)){ return !_versionUtil._$versionCompare('4.0.0',_isIWV[1]); // Android app 需要4.0.0以上 }else if(_isAWV &amp;&amp; (_isAWV.length &gt; 1)){ return !_versionUtil._$versionCompare('4.0.0',_isAWV[1]); } return false; }; /** * _module._$openLiveRoom - 打开app内原生直播间模块 * * @param {Object} data 数据对象 * @param {Number} data.liveRoomId 直播间Id * @param {type} cb 成功之后回调 * @return {type} description */ _module._$openLiveRoom = function (data,cb) { // 不支持的话跳转 if(!g.YixinJSBridge || !this._$isSupportOpenLiveRoom()) return; g.YixinJSBridge.call('openLiveRoom',{ liveRoomId: data.liveRoomId // 直播间Id },cb); }; return _module; }); × Search results Close "},"shareUtil.js.html":{"id":"shareUtil.js.html","title":"Source: shareUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: shareUtil.js /** * -------------shareUtil模块对象，用于第三方分享---------------- * * @module shareUtil * @version 1.0 * @author tangtianliang(tangtianliang@corp.netease.com) * @path eutil/shareUtil * -------------------------------------------------------- */ NEJ.define(['./adapter/nej.js'], function (_adapter) { var CONST = { netease: 'HrJOJ17S62E4ipIa', //netease weibo appID sina: { id: '4122644977' //sina weibo appID } }; var screen = window.screen; var _ustr=[]; _ustr[0] = 'height=505,width=615,top=' + (screen.height - 280) / 2 ; _ustr[1] = 'left=' + (screen.width - 550) / 2 ; _ustr[2] = 'toolbar=no, menubar=no, scrollbars=no,'; _ustr[2] += 'resizable=yes,location=no, status=no'; var _window = _ustr.join(','); var _module = {}; _module.parseUrl = function(path, param){ var arr = []; for( var tmp in param ){ arr.push(tmp + '=' + encodeURIComponent( param[tmp] || '' ) ) } return path + arr.join('&amp;'); } /** * 分享到微信 * @method shareWeibo * @param {Object} _options * @param {String} _options.url * @param {String} _options.title * @param {String} _options.pic * @return {void} */ _module.shareWeibo = function(_options){ var param = { url: _options.url.replace('${source}','weibo'), appkey: CONST.sina.id, /**你申请的应用appkey,显示分享来源(可选)*/ title: _options.title.replace('${appName}','@网易云课堂 ')+'( 下载客户端 http://study.163.com/appDownload.htm?from=weiboShare )', /**分享的文字内容(可选，默认为所在页面的title)*/ pic: _options.pic, /**分享图片的路径(可选)*/ language:'zh_cn' /**设置语言，zh_cn|zh_tw(可选)*/ } window.open(_module.parseUrl('http://service.weibo.com/share/share.php?', param), &quot;_blank&quot;, _window); }; /** * 分享到QQ空间 * @method shareWeibo * @param {Object} _options * @param {String} _options.url * @param {String} _options.title * @param {String} _options.pic * @param {String} _options.description * @return {void} */ _module.shareQzone = function(_options){ var param = { url: _options.url.replace('${source}','qzone'), title: _options.title.replace('${appName}','云课堂'), pics: _options.pic, summary: (_options.description || '').replace('${appName}','云课堂') } window.open(_module.parseUrl('http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?', param), &quot;Qzone&quot;, _window); } return _module; }); × Search results Close "},"arrayUtil.js.html":{"id":"arrayUtil.js.html","title":"Source: arrayUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: arrayUtil.js /** * --------------------array对象操作相关的util-------------------- * @module arrayUtil * @version 1.0 * @author hzshaoyy(hzshaoyy@corp.netease.com) * @path eutil/arrayUtil * -------------------------------------------------------- */ NEJ.define(['./adapter/nej.js'], function(){ var _module = {}, g = (function(){return this;})(); /** * 判断数组是否包含值 * * @public * @method _$arrContains * @param {Array} _arr 数组 * @param {Object} _value 包含的值 * @return { Boolean} 是否包含 */ _module._$arrContains = function(_arr, _value){ if(!!_arr){ for(var i = 0; i &lt; _arr.length; i++){ if(_arr[i] === _value){ return true; } } } return false; }; /** * 判断对象数组[{key:123},{},{}]中key对应的是否包含值123 * * @public * @method _$arrContainsByKey * @param {Array} _arr 数组 * @param {Object} _value 包含的值 * @param {String} _key key * @return {Boolean} 是否包含 */ _module._$arrContainsByKey = function(_arr, _value, _key){ if(!!_arr){ for(var i = 0; i &lt; _arr.length; i++){ if(_arr[i][_key || 0] == _value){ return true; } } } return false; }; /** * 判断数组A/B是否有相同的值 * * @public * @method _$arrCross * @param {Array} _arrA 数组A * @param {Array} _arrB 数组B * @return {Boolean} 是否有相同的值 */ _module._$arrCross = function(_arrA, _arrB){ for(var i = 0; i &lt; _arrA.length; i++){ if(_module._$arrContains(_arrB, _arrA[i])){ //判断数组B中是否包含值a return true; } } return false; }; return _module; }); × Search results Close "},"cashUtil.js.html":{"id":"cashUtil.js.html","title":"Source: cashUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: cashUtil.js /** * * --------------------cash对象操作相关的util-------------------- * @module cashUtil * @version 1.0 * @author hzcaohuanhuan(hzcaohuanhuan@corp.netease.com) * @path eutil/cashUtil * -------------------------------------------------------- */ NEJ.define(['./adapter/nej.js'], function(){ var _module = {}, g = (function(){return this;})(); /** * 格式化cash * @method _$formatCash * @param {number} _value 价格数值 * @returns {String} 价格字符串 * @example 2 =&gt; ￥2.00 null =&gt; 免费 */ _module._$formatCash = function(_value){ _value = _value || 0; if(_value){ return '￥' + _module._$formatNumber(_value, 2); }else{ return '免费'; } } /** * 格式化cash（不加￥符号） * @method _$formatCashNoRMB * @param {number} _value 价格数值 * @returns {String} 价格字符串 * @example 2 =&gt; 2.00 null =&gt; 免费 */ _module._$formatCashNoRMB = function(_value){ _value = _value || 0; if(_value){ return _module._$formatNumber(_value, 2); }else{ return '免费'; } } /** * 格式化数值 * @method _$formatNumber * @param {number} _value 需要格式化的数字 * @param {number} _precision 精度 * @returns {number} 按精度格式化的数据 * @example（0.3+0.2）=&gt; 0.5 */ _module._$formatNumber = function(_value, _precision){ if(Number(_value)){ return Number(_value).toFixed(_precision); }else{ return 0.0.toFixed(_precision); } } return _module; }); × Search results Close "},"criteoUtil.js.html":{"id":"criteoUtil.js.html","title":"Source: criteoUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: criteoUtil.js /** * ---------------------criteo 相关的util------------------------- * 广告推送util * * @module criteoUtil * @version 1.0 * @author hzyuwei(hzyuwei@corp.netease.com) * @path eutil/criteoUtil * -------------------------------------------------------- */ NEJ.define(['./adapter/nej.js','./userUtil.js'], function (_adp,userUtil) { var _module = {}, g = (function(){return this;})(); var user = userUtil._$getWebUser() || {}, userEmail = user.email || ''; var _account = {event: &quot;setAccount&quot;, account: 32810 }; var _email = {event: &quot;setEmail&quot;, email: [userEmail]}; /** * criteo跟踪事件 * * @method _$trackCriteoEvent * @param {Boolean} _isMobile * @param {String} _e * @return {void} */ _module._$trackCriteoEvent =function(_isMobile,_e){ var _siteType = {event:&quot;setSiteType&quot;, type:_isMobile?&quot;m&quot;:&quot;d&quot;}; if(!!g.criteo_q){ g.criteo_q.push( _account, _email, _siteType, _e); } }; return _module; }); × Search results Close "},"domUtil.js.html":{"id":"domUtil.js.html","title":"Source: domUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: domUtil.js /** * * --------------------dom对象操作相关的util-------------------- * @module domUtil * @version 1.0 * @author hzcaohuanhuan(hzcaohuanhuan@corp.netease.com) * @path eutil/domUtil * -------------------------------------------------------- */ NEJ.define(['./adapter/nej.js', 'base/element'], function (_adapter, _e) { var _module = {}, g = (function(){return this;})(); /** * 隐藏节点 * @method _$hiddenNode * @param {Object} _node，html节点 */ _module._$hiddenNode = function(_node){ if (!!_node) { _node.style.display = 'none'; } }; /** * 判断节点是否显示出来 * @method _$isNodeShown * @param {Object} _node，html节点 */ _module._$isNodeShown = function(_node){ if (!!_node) { return (_node.style.display != 'none'); }else{ return false; } }; /** * 显示节点 * @method _$showNode * @param {Object} _node */ _module._$showNode = function(_node){ if (!!_node) { _node.style.display = ''; } }; /** * 控制是否显示节点 * @method _$toggleNodeDisplay * @param {Object} _node * @param {boolean} _bool */ _module._$toggleNodeDisplay = function(_node,_bool){ if(_bool){ _module._$showNode(_node); }else{ _module._$hiddenNode(_node); } }; /** * 切换节点样式 * @method _$toggleClassName * @param {Boolean} 是否显示类名 * @param {Object} 节点 * @param {String} 类名 */ _module._$toggleClassName = function(_bool,_node,_clazz){ if(_bool){ _e._$addClassName(_node,_clazz); }else{ _e._$delClassName(_node,_clazz); } }; return _module; }); × Search results Close "},"emailUtil.js.html":{"id":"emailUtil.js.html","title":"Source: emailUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: emailUtil.js /** * ---------邮箱相关处理工具类文件-------------------- * @module emailUtil * @version 1.0 * @author hzcaohuanhuan(hzcaohuanhuan@corp.netease.com) * @path eutil/emailUtil * ---------------------------------------------------- */ NEJ.define(['./adapter/nej.js'], function() { var _module = {}, g = (function(){return this;})(); /** * 判断是否是网易邮箱 * @method _$isNeteaseEmail * @param {String} email 比如@163.com、@126.com、@yeah.net、@vip.163.com、@vip.126.com、@188.com * @returns {Boolean} bool 是否为邮箱 */ _module._$isNeteaseEmail = function(_email){ var _host = _email.substring(_email.indexOf(&quot;@&quot;)+1); if(_host == &quot;163.com&quot; || _host == &quot;126.com&quot; || _host == &quot;yeah.net&quot; || _host == &quot;vip.163.com&quot; || _host == &quot;vip.126.com&quot; || _host == &quot;188.com&quot; ){ return true; }else{ return false; } }; return _module; }); × Search results Close "},"encodeUtil.js.html":{"id":"encodeUtil.js.html","title":"Source: encodeUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: encodeUtil.js /** * --------------------加密Util-------------------- * @module encodeUtil * @version 1.0 * @author hzshaoyy(hzshaoyy@corp.netease.com) * @path eutil/encodeUtil * ---------------------------------------------------------- */ NEJ.define(['./adapter/nej.js'], function(){ var _module = {}, g = (function(){return this;})(); /** * 编码字符串， * 编码规则对象中r正则表达式参数提取字符串需要编码的内容， * 然后使用编码规则对象中的映射表进行替换 * * @example *```javascript * NEJ.define([ * 'base/util' * ],function(_u){ * // 把字符串99999根据规则9替换成t，结果：ttttt * var str = _u._$encode({r:/\\d/g,'9':'t'},'99999'); * }); * ``` * * @method _$encode * @param {Object} arg0 - 编码规则 * @param {String} arg1 - 待编码的字串 * @return {String} 编码后的字串 * */ _module._$encode = function(_map, _content){ _content = ''+_content; if (!_map||!_content){ return _content||''; } return _content.replace(_map.r,function($1){ var _result = _map[!_map.i?$1.toLowerCase():$1]; return _result!=null?_result:$1; }); }; return _module; }); × Search results Close "},"extend.js.html":{"id":"extend.js.html","title":"Source: extend.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: extend.js /** * ------------------对象合并-------------------------- * * @module extend * @version 1.0 * @author hzliujunwei(hzliujunwei@corp.netease.com) * @path pro/common/extend * -------------------------------------------------------- */ NEJ.define(['./adapter/nej.js'], function() { /** * 判断是否为某个类型对象 * @method isType * @param {String} type 要判断的类型 */ function isType(type){ return function(obj){ return Object.prototype.toString.call(obj) === '[object '+ type +']'; } } var isFunc = isType('Function'); var isObj = isType('Object'); var isBool = isType('Boolean'); var isArr = isType('Array'); function isWindow(obj){ return (window === obj); } /** *判断plain对象 * @method isPlainObject */ function isPlainObject(obj){ if(!isObj(obj) || obj.nodeType || isWindow(obj)){ return false; } if(obj.constructor &amp;&amp; !obj.constructor.prototype.hasOwnProperty('isPrototypeOf')){ return false; } return true; } /** * 对象合并 * @method extend * @param {Boolean} _bool 是否深度复制 * @param {Object|String|Number|Boolean} _args1被返回的对象 * @param {Object|String|Number|Boolean} _args2需要复制的对象 * @return {Object|String|Number|Boolean} 被返回的对象 * * @example 例: extend(true, {}, {}, {}); */ function extend(){ var args = arguments, i = 1, deep = false, target = args[0], length = args.length, p, clone, options, src, copyIsArray, copy; if(isBool(args[0])){ deep = args[0]; target = args[1]; i++; } if(i === length){ return args[0]; } if(typeof target !== 'object' &amp;&amp; !isFunc(target)){ target = {} } for(; i&lt;length; i++){ if((options = args[i]) != null){ for(p in options){ src = target[p]; copy = options[p]; if(src === copy){ continue; } if(deep &amp;&amp; copy &amp;&amp; (isPlainObject(copy) || (copyIsArray = isArr(copy)))){ if(copyIsArray){ copyIsArray = false; clone = src &amp;&amp; isArr(src) ? src : []; }else { clone = src &amp;&amp; isPlainObject(src) ? src : {}; } target[p] = extend(deep, clone, copy); }else { target[p] = copy; } } } } return target; } return extend; }); × Search results Close "},"flashUtil.js.html":{"id":"flashUtil.js.html","title":"Source: flashUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: flashUtil.js /** * ---------flash相关处理工具类文件-------------------- * @module flashUtil * @version 1.0 * @author hzlixinxin(hzlixinxin@corp.netease.com) * @path eutil/flashUtil * ---------------------------------------------------- */ NEJ.define(['./adapter/nej.js'], function() { var _module = {}, g = (function(){return this;})(); /** * 判断是否安装了flash * @method _$isNeteaseEmail * @param {Void} email * @returns {Boolean} bool 是否安装了flash */ _module._$checkFlash = function(){ var hasFlash = false; try { hasFlash = Boolean(new ActiveXObject('ShockwaveFlash.ShockwaveFlash')); } catch(exception) { hasFlash = ('undefined' != typeof navigator.mimeTypes['application/x-shockwave-flash']); } return hasFlash; }; return _module; }); × Search results Close "},"gaUtil.js.html":{"id":"gaUtil.js.html","title":"Source: gaUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: gaUtil.js /** * ---------------------ga 相关的util------------------------- * * @module gaUtil * @version 1.0 * @author hzcaohuanhuan(hzcaohuanhuan@corp.netease.com) * @path eutil/gaUtil * -------------------------------------------------------- */ NEJ.define(['./adapter/nej.js', 'util/encode/md5'], function (_adp, _md5) { var _module = {}, g = (function(){return this;})(), _product = g.gaProduct || 'study'; /** * 往本地打log * @method pushLog * @param {Object} _data 数据vo */ var pushLog = (function pushLog(){ var _e = document.createElement('img'); return function(_data){ _e.src = 'http://log.study.163.com/__utm.gif?p='+_product+'&amp;dt='+_md5._$str2hex(_data); }; })(); /** * 使用ga跟踪页面view点击 * @method _$trackPageView * @param {String} _showHash 显示的Hash * @param {String} _pageSelfName 页面名字 */ _module._$trackPageView = function(_showHash, _pageSelfName){ var _obj; if(!_pageSelfName){ _pageSelfName = location.pathname + location.search; } _pageSelfName += (!!_showHash ? location.hash:&quot;&quot;); //google统计 if(!!g[g.gaqStr]){ g[g.gaqStr].push([g.gaTrackPageview,_pageSelfName]); } //studylog _obj = { &quot;activeName&quot;: 'pageview', &quot;Utmp&quot;: location.href || '', &quot;Utmr&quot;: document.referrer || '' }; pushLog(JSON.stringify(_obj)); } /** * 使用ga跟踪事件点击处理 * @method _$trackEvent * @param {String} _category 必填 * @param {String} _action 必填 * @param {String} _opt_label 选填 * @param {number} _opt_value 选填 * @return void * * @example（0.3+0.2）=&gt; 0.5 */ _module._$trackEvent = function(_category, _action, _opt_label, _opt_value){ if(!!_category &amp;&amp; !!_action){ var _arr = [g.gaTrackEvent,_category,_action]; if(!!_opt_label){ _arr.push(_opt_label); if((_opt_value != undefined) &amp;&amp; (_opt_value != null)){ _arr.push(parseInt(_opt_value)); } } //google统计 if(!!g[g.gaqStr]){ g[g.gaqStr].push(_arr); } } } /** * @method _$log * @param {Object} _obj 对象 * @return {Void} */ _module._$log = function(_obj){ pushLog(JSON.stringify(_obj)); } return _module; }); × Search results Close "},"imageUtil.js.html":{"id":"imageUtil.js.html","title":"Source: imageUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: imageUtil.js /** * -----------------------图片压缩相关的util-------------------- * * @module imageUtil * @version 1.0 * @author hzshaoyy(hzshaoyy@corp.netease.com) * @path eutil/imageUtil * -------------------------------------------------------- */ NEJ.define(['./adapter/nej.js'], function() { var _module = {}, g = (function(){return this;})(); var _isNos = new RegExp('^http://nos.netease.com/'), _isNosMain = new RegExp('^http:\\/\\/nos.netease.com\\/.*thumbnail=(\\\\d*)y(\\\\d*).*'), _retUrl = &quot;http://imgsize.ph.126.net/?enlarge=true&amp;imgurl=&quot;; /** * 通过相册或者的服务动态缩放图片,走CDN * @method _$scaleImage * @param {String} _url 图片地址 * @param {Number} _width 图片压缩后的宽 * @param {Number} _height 图片压缩后的高 * @param {String} _otherProp 附加属性，默认为1x95，可以不传 * */ _module._$scaleImage = _module._$scalePicDynamic = function(_url,_width,_height,_otherProp){ var _isNos = new RegExp('^http://nos.netease.com/'), _isNosCdn = new RegExp('^http://edu-image.nosdn.127.net'), _isNosMain = new RegExp('^http:\\/\\/nos.netease.com\\/.*thumbnail=(\\\\d*)y(\\\\d*).*'), _retUrl = &quot;http://imgsize.ph.126.net/?enlarge=true&amp;imgurl=&quot;; var _prop, _suffix, _returnUrl; if(!_url){ return _url; } if(_isNos.test(_url)){ //将edu-image的nos图片地址修改为nosdn图片地址,test-edu-image的图片地址保持不变 var temp_url_arr = _url.split('/'); if(temp_url_arr[3] == 'edu-image'){ temp_url_arr[2] = 'edu-image.nosdn.127.net'; temp_url_arr.splice(3, 1); _url = temp_url_arr.join('/'); } } if(_isNosCdn.test(_url) || _isNos.test(_url)){ //nos图片压缩 _url = (_url.split('?') || [])[0]; _returnUrl = _url + '?imageView&amp;thumbnail='+_width+'y'+_height+'&amp;quality=100'; if(_otherProp){ _returnUrl += ('&amp;' + _otherProp); } }else{ //历史遗留相册接口 _prop = '1x95'; _suffix = _url.substring(_url.lastIndexOf(&quot;.&quot;)); if(_suffix == &quot;.gif&quot;){//gif不压缩处理 return _url; } if(_width &amp;&amp; _height){ //传了宽高，进行压缩处理 _returnUrl = _retUrl + _url + '_' + _width + &quot;x&quot; + _height + &quot;x&quot; + _prop + _suffix; }else{ //否则不处理，直接返回原链接 _returnUrl = _url ; } } return _returnUrl; } return _module; }); × Search results Close "},"numUtil.js.html":{"id":"numUtil.js.html","title":"Source: numUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: numUtil.js /** * ----------------------数字格式化util----------------------- * * @module numUtil * @version 1.0 * @author hzliujunwei(hzliujunwei@corp.netease.com) * @path pro/common/numUtil * -------------------------------------------------------- */ NEJ.define(['./adapter/nej.js'], function (_adapter) { var _module = {}, g = (function(){return this;})(); var isNum = function(_num){ return (isType('Number'))(_num) &amp;&amp; _num === _num; }; function isType(type){ return function(obj){ return Object.prototype.toString.call(obj) === '[object '+ type +']' ; } } /** * 格式化货币显示 * @method _$formatNum * @param {Number} _maxNum 需要格式化的数字 * @param {String} cUnit 货币单位 * @return {Number} 格式化后的数字,默认和异常都为0 */ _module._$formatNum = function(_maxNum, cUnit){ return function(_num){ var _retNum; _num = +_num; if(!isNum(_num)){ return 0; } var _tenthMaxNum = _maxNum / 10; //4.0万的时候会显示成4万，4.1万会显示4.1万 _retNum = _num &gt; _maxNum ? (_num % _maxNum &gt;= _tenthMaxNum ? (_num / _maxNum).toFixed(1) : (_num / _maxNum).toFixed(0)) : _num; //_retNum = _num &gt; _maxNum ? (_num / _maxNum).toFixed(1) : _num; return (_num &gt; _maxNum)?(_retNum + cUnit):_retNum; } }; _module._$num10000 = _module._$formatNum(10000, '万'); /** * 格式化计算文件大小 * @method _$formatFileSize * @param {Number} _bytes 字节数 * @return string */ _module._$formatFileSize = function(_bytes){ if (_bytes === 0) return '0B'; var _k = 1024; var _sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']; var _i = Math.floor(Math.log(_bytes) / Math.log(_k)); return (_bytes / Math.pow(_k, _i)).toFixed(2) + _sizes[_i]; }; return _module; }); × Search results Close "},"objectUtil.js.html":{"id":"objectUtil.js.html","title":"Source: objectUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: objectUtil.js /** * -----------------objectUtil 对象操作相关的util-------------------- * * @module objectUtil * @version 1.0 * @author hzcaohuanhuan(hzcaohuanhuan@corp.netease.com) * @path eutil/objectUtil * -------------------------------------------------------- */ NEJ.define(['./adapter/nej.js', 'util/encode/md5'], function (_adapter, _md5) { var _module = {}, g = (function(){return this;})(); /** * 深层拷贝 (NEJ.X() 的拷贝只能实现浅拷贝，拷贝的是对象的引用) * @method _$deepCopy * @param {Object} _originObj 原始数据 * @return {Object} 深克隆后的对象 */ _module._$deepCopy = function(originObj) { if (originObj == null)return null; if (typeof originObj !== &quot;object&quot;) { return originObj; } var clone = {}; if (originObj.constructor == Array) { clone = []; } for (var i in originObj) { clone[i] = arguments.callee(originObj[i]); } return clone; }; /** * 深度清除 对象中值为null 与 undefined 的key * @method _$deepCleanObj * @param {Object} _originObj 原始数据 * @return {Object} 返回一个新的清除后的对象 */ _module._$deepCleanObj = function deepCleanObj(_obj){ if(Object.prototype.toString.call(_obj) !== '[object Object]'){ return _obj; } var _res = {}; for(var _p in _obj){ if(_obj.hasOwnProperty(_p) &amp;&amp; _obj[_p] != null){ _res[_p] = this._$deepCleanObj(_obj[_p]); } } return _res; }; /** * 将对象转换为JSON字符串,然后使用hex编码返回对象,主要是用于GA统计日志分析数据 * @method _$convertToJSONHex * @param { Object} _obj 需要转换的对象 * @return {String} '###'加上hex编码 */ _module._$convertToJSONHex = function(_obj){ return &quot;###&quot;+_md5._$str2hex(JSON.stringify(_obj || {})); }; return _module; }); × Search results Close "},"promise.js.html":{"id":"promise.js.html","title":"Source: promise.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: promise.js /** * --------------------promise---------------------- * * @module promise * @version 1.0 * @author hzliujunwei(hzliujunwei@corp.netease.com) * @path eutil/promise * -------------------------------------------------------- */ NEJ.define(['./adapter/nej.js'], function () { if(typeof window.Promise === 'function'){ return window.Promise; } var Promise = function(executor) { var self = this; self.status = 'pending'; self.onResolvedCallback = []; self.onRejectedCallback = []; executor = executor || function(){}; try { executor(function(value){ resolve(self, value) }, function(reason){ reject(self, reason); }) } catch (reason) { reject(reason) } } function resolve(promise, value) { var self = promise; if (value instanceof Promise) { return value.then(resolve, reject) } setTimeout(function() { // 异步执行所有的回调函数 if (self.status === 'pending') { self.status = 'resolved' self.data = value for (var i = 0; i &lt; self.onResolvedCallback.length; i++) { self.onResolvedCallback[i](value) } } }) } function reject(promise, reason) { var self = promise; setTimeout(function() { // 异步执行所有的回调函数 if (self.status === 'pending') { self.status = 'rejected' self.data = reason for (var i = 0; i &lt; self.onRejectedCallback.length; i++) { self.onRejectedCallback[i](reason) } } }) } function resolvePromise(promise2, x, resolve, reject) { var then; var thenCalledOrThrow = false; if (promise2 === x) { return reject(new TypeError('Chaining cycle detected for promise!')) } if (x instanceof Promise) { if (x.status === 'pending') { //because x could resolved by a Promise Object x.then(function(v) { resolvePromise(promise2, v, resolve, reject) }, reject) } else { //but if it is resolved, it will never resolved by a Promise Object but a static value; x.then(resolve, reject) } return } if ((x !== null) &amp;&amp; ((typeof x === 'object') || (typeof x === 'function'))) { try { then = x.then //because x.then could be a getter if (typeof then === 'function') { then.call(x, function rs(y) { if (thenCalledOrThrow) return thenCalledOrThrow = true return resolvePromise(promise2, y, resolve, reject) }, function rj(r) { if (thenCalledOrThrow) return thenCalledOrThrow = true return reject(r) }) } else { resolve(x) } } catch (e) { if (thenCalledOrThrow) return thenCalledOrThrow = true return reject(e) } } else { resolve(x) } } Promise.prototype.then = function(onResolved, onRejected) { var self = this var promise2 onResolved = typeof onResolved === 'function' ? onResolved : function(v) { return v } onRejected = typeof onRejected === 'function' ? onRejected : function(r) { throw r } if (self.status === 'resolved') { return promise2 = new Promise(function(resolve, reject) { setTimeout(function() { // 异步执行onResolved try { var x = onResolved(self.data); resolvePromise(promise2, x, resolve, reject) } catch (reason) { reject(reason) } }) }) } if (self.status === 'rejected') { return promise2 = new Promise(function(resolve, reject) { setTimeout(function() { // 异步执行onRejected try { var x = onRejected(self.data); resolvePromise(promise2, x, resolve, reject) } catch (reason) { reject(reason) } }) }) } if (self.status === 'pending') { // 这里之所以没有异步执行，是因为这些函数必然会被resolve或reject调用，而resolve或reject函数里的内容已是异步执行，构造函数里的定义 return promise2 = new Promise(function(resolve, reject) { self.onResolvedCallback.push(function(value) { try { var x = onResolved(value); resolvePromise(promise2, x, resolve, reject) } catch (r) { reject(r) } }) self.onRejectedCallback.push(function(reason) { try { var x = onRejected(reason); resolvePromise(promise2, x, resolve, reject) } catch (r) { reject(r) } }) }) } }; Promise.prototype['catch'] = function(onRejected) { return this.then(null, onRejected) }; Promise.deferred = Promise.defer = function() { var dfd = {}; dfd.promise = new Promise(function(resolve, reject) { dfd.resolve = resolve; dfd.reject = reject }); return dfd }; //所有方法变成FulFilled或者Rejected后执行之后结果 Promise.all = function(iterable){ var length = iterable.length; var promise = new Promise(); for(var i=0; i&lt;length; i++){ var iterate = iterable[i]; if((!iterate instanceof Promise)){ iterate = Promise.resolve(iterate); } iterate.then(makeAllCallback(iterate, i, 'resolve'), makeAllCallback(iterate, i, 'reject')); } var result = []; var count = 0; function makeAllCallback(iterate, index, action){ return function(value){ if(action === 'reject'){ reject(promise, value); return; } result[index] = value; if(++count === length){ resolve(promise, result); } } } return promise; }; //只要有一个方法Fulfilled或者Rejected后执行之后结果 Promise.race = function(iterable){ var length = iterable.length; var promise = new Promise(); var settled = false; for(var i=0; i&lt;length; i++){ var iterate = iterable[i]; if((!iterate instanceof Promise)){ iterate = Promise.resolve(iterate); } iterate.then(resolveRaceCallback, rejectRaceCallback); } function resolveRaceCallback(data){ if(settled){ return; } settled = true; resolve(promise, data); } function rejectRaceCallback(reason){ if(settled){ return; } settled = true; reject(promise, reason); } return promise; }; Promise.resolve = function(value){ return new Promise(function(resolve, reject){ resolve(value); }); }; Promise.reject = function(reason){ return new Promise(function(resolve, reject){ reject(reason); }); }; return Promise; }); × Search results Close "},"regUtil.js.html":{"id":"regUtil.js.html","title":"Source: regUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: regUtil.js /** * ------------输入校验工具类，比如校验邮箱，手机号，身份证等等----------- * * @module regUtil * @version 1.0 * @author hzshaoyy(hzshaoyy@corp.netease.com) * @path eutil/regUtil * ---------------------------------------------------------- */ NEJ.define(['./adapter/nej.js'], function (_adapter) { var _module = {}, g = (function(){return this;})(); /** * 判断对象是否为合法的email * @method _$isEmail * @param {String} _text 输入的字符串 * @return {Boolean} 返回是否是Email */ _module._$isEmail = function(_text){ return /^([\\w_\\.\\-\\+])+\\@([\\w\\-]+\\.)+([\\w]{2,10})+$/.test(_text); }; /** * 判断对象是否为合法的手机号 * @method _$isPhone * @param {String} _number 输入的数字 * @return {Boolean} 返回是否是合法的手机号 */ _module._$isPhone = function(_number){ return /^1\\d{10}$/.test(_number); }; /** * 判断对象是否为合法的电话号码 * 匹配格式： * 11位手机号码 * 3-4位区号，7-8位直播号码，1－4位分机号 * 如：(0511-4405222、 021-87888822、12345678901、1234-12345678-1234） * @method _$isTel * @param {String} _number 输入的数字 * @return {Boolean} 返回是否是合法的电话号码 */ _module._$isTel = function(_number){ return /((\\d{11})|^((\\d{7,8})|(\\d{4}|\\d{3})-(\\d{7,8})|(\\d{4}|\\d{3})-(\\d{7,8})-(\\d{4}|\\d{3}|\\d{2}|\\d{1})|(\\d{7,8})-(\\d{4}|\\d{3}|\\d{2}|\\d{1}))$)/.test(_number); }; /** * 判断数字是否是整数，例如0.2 , 1.5 , 8 * @method _$isPositiveNum * @param {String} _number 输入的数字 * @return {Boolean} 返回是否是整数 */ _module._$isPositiveNum = function(_number){ return /^[1-9]\\d*$/.test(_number); }; /** * 判断是否是qq号，例如10000起 * @method _$isQQ * @param {String} _number 输入的数字 * @return {Boolean} 返回是否是整数 */ _module._$isQQ = function(_number){ return /^[1-9][0-9]{3,11}$/.test(_number); }; return _module; }); × Search results Close "},"textUtil.js.html":{"id":"textUtil.js.html","title":"Source: textUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: textUtil.js /** * -------------textUtil模块对象，用于获取或修改字符串信息---------------- * * @module textUtil * @version 1.0 * @author tangtianliang(tangtianliang@corp.netease.com) * @path eutil/textUtil * -------------------------------------------------------- */ NEJ.define(['./adapter/nej.js'], function (_adapter) { var _module = {}, g = (function(){return this;})(); /** * 去掉回车换行tab,将多于的空格变成一个空格 * @method _$removeNRNBSP * @param {String} _text 字符串 * @return {String} 去掉空格之后的字符串 */ _module._$removeNRNBSP = function(_text){ return (_text || '').replace(/[\\t\\r\\n]+/gi,' ').replace(/[ ]+/gi,' '); }; /** * 过滤富文本标签得方法 * @method _$filterText * @param {String} _richText 带标签的富文本 * @return {String} 转化为字符串的富文本 */ _module._$filterText = function(_richText){ var _div = document.createElement('div'); _div.innerHTML = _richText; return _module._$removeNRNBSP(_div.innerText); }; /** * 获取字符串长度，中文是长度是2 * @method _$getStringLength * @param {String} _string 输入的字符串 * @return {Number} 字符串长度 */ _module._$getStringLength = function(_string){ _string = _string || ''; _string = _string.replace(/^\\n+|\\n+$/g, &quot;&quot;); //将富文本中\\n过滤 var _entryLen0 = _string.length, _entryLen = 0; var _cnChar = _string.match(/[^\\x00-\\x80]/g); //利用match方法检索出中文字符并返回一个存放中文的数组 if (!!_cnChar &amp;&amp; _cnChar.length &gt; 0) _entryLen = _cnChar.length || 0; //算出实际的字符长度 return _entryLen0 + _entryLen; } /** * 截断字符串，处理中英文情况 * @method _$sliceStrByLength * @param {String} _string 输入的字符串 * @param {Number} _maxLength 需要截断的长度, 实际的长度，中文算两个，则传入的_maxLength为*2 * @return {String} 返回截断后的字符串 */ _module._$sliceStrByLength = function(_string, _maxLength){ _string = _string || ''; var _ret = '', _length = _string.length, _string = _string.split(''), _readLength = 0; for (var i = 0; i &lt; _length; i++) { var _char = _string[i]; var _arr = _char.match(/[^\\x00-\\x80]/g); if (!!_arr &amp;&amp; _arr.length &gt; 0) { _readLength += 2; //中文字符 } else { _readLength += 1; //英文字符 } if (_readLength &gt; _maxLength) { break; } _ret += _char; } return _ret; } /** * 截断字符串，如果超出字数限制，追加... * @method _$ellipsisStrByLength * @param {String} _string 输入的字符串 * @param {Number} _maxLength 需要截断的长度 * @return {String} 返回截断后的字符串，如果超出字数限制，追加... */ _module._$ellipsisStrByLength = function(_string, _maxLength){ var _str = _string; if(_module._$getStringLength(_str) &gt; _maxLength){ _str = _module._$sliceStrByLength(_str, _maxLength) + '...'; } return _str; }; return _module; }); × Search results Close "},"urlUtil.js.html":{"id":"urlUtil.js.html","title":"Source: urlUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: urlUtil.js /** * -------------- url相关的util----------------------- * * @module urlUtil * @version 1.0 * @author hzshaoyy(hzshaoyy@corp.netease.com) * @path eutil/urlUtil * -------------------------------------------------------- */ NEJ.define(['./adapter/nej.js', 'base/util', 'util/encode/base64'], function (_adapter, _util, _base64) { var _module = {}, g = (function(){return this;})(); /** * 解析url参数 * * 输入： ?123=dawd&amp;adwd&amp;a1=1 * 输出： { 123: 'dawd', adwd: '', a1: &quot;1&quot; } * * @method _$parseUrlParams * @param {String} _search url * @return {Object} url参数map对象 */ _module._$parseUrlParams = function(_search){ var query = _search.split('?'); if(query[1]){ return _util._$query2object(query[1]); }else{ return {}; } }; /** * 判断当前hash是否是那个umi * @method _$isRightUMI * @param {String} _hash 当前hash * @param {String} _umiP 目标umi * @return {Boolean} 是否符合 */ _module._$isRightUMI = function(_hash, _umiP){ if(!_hash || !_umiP){ return false; } var _umi = g.decodeURIComponent(_hash); var _lastIndex = _umi.indexOf('?'); _lastIndex = (_lastIndex &gt;= 0) ? _lastIndex : _umi.length; _umi = _umi.substring(_umi.indexOf('#') + 1, _lastIndex); return _umi == _umiP; }; /** * 获取当前的Url，注意反编码url * * * @method _$getDecodeCurUrl * @param {Object} _urlParams url上带上的参数，可以添加，用于后端判断 * @return {String} 拼接后的url */ _module._$getDecodeCurUrl = function(_urlParams, _returnUrl) { var _returnUrl = _returnUrl || g.returnUrl || location.href; _returnUrl = g.encodeURI(g.decodeURI(_returnUrl)); // 是否有hash var _hashIndex = _returnUrl.indexOf('#'); var _hash = ''; if (_hashIndex &gt;= 0) { _hash = _returnUrl.substring(_hashIndex); _returnUrl = _returnUrl.substring(0, _hashIndex); } // //是否已经有参数 var _hashParam = _returnUrl.indexOf('?'); var _paramArr = []; if (_hashParam &gt;= 0) { _paramArr = _module._$parseUrlParams(_returnUrl.substring(_hashParam)); if (!_paramArr['from']) { _returnUrl += &quot;&amp;from=study&quot;; } } else { _returnUrl += &quot;?from=study&quot;; } //加上url参数 if (!!_urlParams) { _util._$forIn(_urlParams, function(_value, _key) { _returnUrl += &quot;&amp;&quot; + _key + (!!_value ? (&quot;=&quot; + _value) : ''); }, this); } _returnUrl += _hash; return _returnUrl; } /** * 获取returnUrl * * * @method _$getReturnUrl * @param {Object} _urlParamsArr url上带上的参数，可以添加，用于后端判断 * @return {String} 返回的url(base64) */ _module._$getReturnUrl = function(_urlParamsArr, _returnUrl) { return _base64._$str2b64(_module._$getDecodeCurUrl(_urlParamsArr, _returnUrl)); }; return _module; }); × Search results Close "},"userUtil.js.html":{"id":"userUtil.js.html","title":"Source: userUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: userUtil.js /** * ---------用户信息处理工具类文件------------------------------ * @module userUtil * @version 1.0 * @author tangtianliang(tangtianliang@corp.netease.com) * @path eutil/userUtil * ---------------------------------------------------- */ NEJ.define(['./adapter/nej.js'], function (_adapter) { var _module = {}, g = (function(){return this;})(); /** * 获取登录的用户信息 * @method _$getWebUser * @return {Object} webuser */ _module._$getWebUser = (function(){ var _user = g.webUser || ''; return function() { return _user; } })(); /** * 判断是否是用户自己 * @method _$isUserOwner * @param {String} _userId 传入的用户id * @return {Boolean} 是否是用户自己 */ _module._$isUserOwner = function(_userId,_passport){ return (!!_userId &amp;&amp; _userId == _module._$getWebUser().id) || (!!_passport &amp;&amp; _passport == _module._$getWebUser().loginId); }; return _module; }); × Search results Close "},"versionUtil.js.html":{"id":"versionUtil.js.html","title":"Source: versionUtil.js","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Source: versionUtil.js /** * ---------版本工具类文件------------------------------ * @module versionUtil * @version 1.0 * @author tangtianliang(tangtianliang@corp.netease.com) * @path eutil/versionUtil * ---------------------------------------------------- */ // !function (name, definition) { // if (typeof module != 'undefined' &amp;&amp; module.exports) module.exports = definition(); // else if (typeof NEJ !== 'undefined' &amp;&amp; NEJ.define) NEJ.define(['eutil/adapter/nej'],definition); // else this[name] = definition() // }('versionUtil', function () { // NEJ.define(['./adapter/nej.js'], function(){ var _module = {}, g = (function(){return this;})(); /** * 比较版本大小 * @method _$versionCompare * @param {String} v1 1.0.0版本1 * @param {String} v2 1.0.0版本2 * @param {Object} options { * lexicographical * zeroExtend 后缀补全0 * } * @return {boolean} true v1&gt;v2 */ _module._$versionCompare = function(v1, v2, options) { var lexicographical = options &amp;&amp; options.lexicographical, zeroExtend = options &amp;&amp; options.zeroExtend, v1parts = v1.split('.'), v2parts = v2.split('.'); function isValidPart(x) { return (lexicographical ? /^\\d+[A-Za-z]*$/ : /^\\d+$/).test(x); } if (!v1parts.every(isValidPart) || !v2parts.every(isValidPart)) { return NaN; } if (zeroExtend) { while (v1parts.length &lt; v2parts.length) v1parts.push(&quot;0&quot;); while (v2parts.length &lt; v1parts.length) v2parts.push(&quot;0&quot;); } if (!lexicographical) { v1parts = v1parts.map(Number); v2parts = v2parts.map(Number); } for (var i = 0; i &lt; v1parts.length; ++i) { if (v2parts.length == i) { return 1; } if (v1parts[i] == v2parts[i]) { continue; } else if (v1parts[i] &gt; v2parts[i]) { return 1; } else { return -1; } } if (v1parts.length != v2parts.length) { return -1; } return 0; } return _module; }); × Search results Close "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Modules × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil 教育产品部前端Util类库 v1.1.0 将项目中与业务耦合关联不高的Util逻辑抽取出来了 主要模块 arrayUtil 数组Util模块 CashUtil 价格转换Util模块 domUtil DOM操作Util模块 emailUtil 邮箱判断Util模块 encodeUtil 加密Util模块 extend 对象合并Util模块 flashUtil flash相关工具模块 imageUtil 图片压缩相关的util模块 mobileUtil mobile相关的util模块 numUtil 数字格式化util模块 objectUtil 对象操作util模块 RegUtil 正则表达式Util模块 TextUtil 字符串Util模块 TimeUtil 时间转换Util模块 urlUtil url相关的Util模块 userUtil 用户信息处理工具类文件模块 versionUtil 版本工具类模块 debugUtil 前后端联调需要的util模块(??这东西现在还没有) 目前的模块均使用CommonJs的方式来组织，后续扩展 Test（使用mocha+chai进行单元测试）* npm install mocha安装mocha * npm install puer安装puer * bower install安装nej * 在根目录下运行puer * 在弹出的浏览器页面选择test -&gt; index.html，该页面会显示单元测试的执行结果mocha常用命令//执行测试单个文件 mocha test/testDay1.test.js //默认执行test目录下所有文件 mocha --recursive //--help或-h参数，用来查看Mocha的所有命令行参数 mocha --help //--reporter参数用来指定测试报告的格式，默认是spec格式 mocha 等同于 mocha --reporter spec //--reporters参数可以显示所有内置的报告格式 mocha --reporters //使用mochawesome 报表 mocha test/testDay1.test.js --reporter mochawesome单元测试的写法单元测试使用chai的断言库assert 例子： NEJ.define([ 'pro/numUtil', //被测试的文件 ],function ( numUtil ){ var assert = chai.assert ; describe('numUtil', function() { describe('#numUtil._$num10000(),把输入的数值转化为以万为单位、不足万的显示原数', function () { it('输入41023，应该输出4.1万', function () { assert.equal(&quot;4.1万&quot;, numUtil._$num10000(41023));}); it('输入41523，应该输出4.2万', function(){ assert.equal(&quot;4.2万&quot;, numUtil._$num10000(41523)); }); it('输入30000，应该输出3万', function(){ assert.equal(&quot;3万&quot;, numUtil._$num10000(30000)); }); it('输入4000，应该输出4000', function(){ assert.equal(&quot;4000&quot;, numUtil._$num10000(4000)); }); }); }) 每个方法写一个describe，形式为：‘方法名+方法描述’ 每个方法的测试用例写一个it，描述形式为： ‘输入xx,应该输出xx’ 常见问题 如何在单元测试里判断两个对象相等？ assert.deepEqual({&quot;a&quot;:0,&quot;d&quot;:1,&quot;f&quot;:&quot;&quot;,&quot;obj&quot;:{&quot;a&quot;:0,&quot;d&quot;:1,&quot;f&quot;:&quot;&quot;}}, objectUtil._$deepCleanObj({ a: 0, b: undefined, c: null, d :1 ,f:'', obj:{a: 0, b: undefined, c: null, d :1 ,f:''}})); 如何判断两个数组相等？assert.sameMembers([1,2,3], [1,2,3]); 注释生成API文档（使用Jsdoc）* 在本项目根目录命令行输入npm run js2doc * 生成的文档在docs文件夹下 * 点击docs/index.html打开项目统一注释标准包头部 表明模块名称、版本、作者、路径等信息 /** * * 图片压缩相关的util * @module imageUtil * @version 1.0 * @author hzshaoyy(hzshaoyy@corp.netease.com) * @path eutil/imageUtil * -------------------------------------------------------- */方法 写明方法的用途，标明方法名、参数、返回值等信息 /** * 格式化计算文件大小 * @method _$formatFileSize * @param {Number} _bytes 字节数 * @return string */jsdoc配置jsdoc包的安装目录为：node_module/jsdoc，其配置文件为目录下的conf.json文件。 &quot;opts&quot;:{ &quot;template&quot;: &quot;node_modules/ink-docstrap/template&quot;, // 生成的文档采用的Html模板 &quot;encoding&quot;: &quot;utf8&quot;, // 编码方式 &quot;destination&quot;: &quot;docs/&quot;, // 输出文档的存放路径 &quot;recurse&quot;: true, // same as -r &quot;readme&quot;: &quot;README.md&quot; //首页显示README.md的内容 }具体的配置项见参考资料中的jsdoc文档。 ink-docstrapink-docstrap是基于jsdoc的文档模板，有多种样式可供选择，使jsdoc生成的文档页面更加美观。 它的配置在jsdoc的conf.json文件中的template字段。具体配置项见文末的参考资料。 &quot;templates&quot; : { &quot;cleverLinks&quot; : false, &quot;monospaceLinks&quot; : false, &quot;dateFormat&quot; : &quot;ddd MMM Do YYYY&quot;, &quot;outputSourceFiles&quot; : true, &quot;outputSourcePath&quot; : true, &quot;systemName&quot; : &quot;edu-front-util&quot;, //全局显示的项目名称 &quot;footer&quot; : &quot;&quot;, &quot;copyright&quot; : &quot;网易杭州研究院--教育产品部门--前端技术部&quot;, //版权所有 &quot;navType&quot; : &quot;vertical&quot;, &quot;theme&quot; : &quot;flatly&quot;, //使用的主题，伦家觉得这个绿色很小清新~ &quot;linenums&quot; : true, &quot;collapseSymbols&quot; : false, &quot;inverseNav&quot; : true, &quot;syntaxTheme&quot; : &quot;default&quot; //代码高亮背景色，还可以选dark }单元测试覆盖率 执行npm install 依次执行npm run test , npm run coverage npm run test命令是执行单元测试，因为覆盖率是根据单元测试来的，所以要先执行单元测试 npm run coverage则是在本地的coverage文件夹中根据刚刚的单元测试结果，生成lcov-report/index.html文件，打开即可查看单元测试覆盖率 参考资料：mocha教程： http://www.ruanyifeng.com/blog/2015/12/a-mocha-tutorial-of-examples.html assert文档： https://nodejs.org/dist/latest-v4.x/docs/api/assert.html#assert_assert_equal_actual_expected_message chai文档： http://chaijs.com/ jsdoc中文文档：http://www.css88.com/doc/jsdoc/tags-requires.html ink-docstrap文档：https://docstrap.github.io/docstrap/index.html × Search results Close "},"module-arrayUtil.html":{"id":"module-arrayUtil.html","title":"Module: arrayUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: arrayUtil --------------------array对象操作相关的util-------------------- Version: 1.0 Author: hzshaoyy(hzshaoyy@corp.netease.com) Source: arrayUtil.js, line 1 Methods &lt;inner&gt; _$arrContains(_arr, _value) 判断数组是否包含值 Parameters: Name Type Description _arr Array 数组 _value Object 包含的值 Source: arrayUtil.js, line 14 Returns: 是否包含 Type Boolean &lt;inner&gt; _$arrContainsByKey(_arr, _value, _key) 判断对象数组[{key:123},{},{}]中key对应的是否包含值123 Parameters: Name Type Description _arr Array 数组 _value Object 包含的值 _key String key Source: arrayUtil.js, line 34 Returns: 是否包含 Type Boolean &lt;inner&gt; _$arrCross(_arrA, _arrB) 判断数组A/B是否有相同的值 Parameters: Name Type Description _arrA Array 数组A _arrB Array 数组B Source: arrayUtil.js, line 55 Returns: 是否有相同的值 Type Boolean × Search results Close "},"module-cashUtil.html":{"id":"module-cashUtil.html","title":"Module: cashUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: cashUtil --------------------cash对象操作相关的util-------------------- Version: 1.0 Author: hzcaohuanhuan(hzcaohuanhuan@corp.netease.com) Source: cashUtil.js, line 1 Methods &lt;inner&gt; _$formatCash(_value) 格式化cash Parameters: Name Type Description _value number 价格数值 Source: cashUtil.js, line 15 Returns: 价格字符串 Type String Example 2 =&gt; ￥2.00 null =&gt; 免费 &lt;inner&gt; _$formatCashNoRMB(_value) 格式化cash（不加￥符号） Parameters: Name Type Description _value number 价格数值 Source: cashUtil.js, line 31 Returns: 价格字符串 Type String Example 2 =&gt; 2.00 null =&gt; 免费 &lt;inner&gt; _$formatNumber(_value, _precision) 格式化数值 Parameters: Name Type Description _value number 需要格式化的数字 _precision number 精度 Source: cashUtil.js, line 47 Returns: 按精度格式化的数据 Type number × Search results Close "},"module-criteoUtil.html":{"id":"module-criteoUtil.html","title":"Module: criteoUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: criteoUtil ---------------------criteo 相关的util------------------------- 广告推送util Version: 1.0 Author: hzyuwei(hzyuwei@corp.netease.com) Source: criteoUtil.js, line 1 Methods &lt;inner&gt; _$trackCriteoEvent(_isMobile, _e) criteo跟踪事件 Parameters: Name Type Description _isMobile Boolean _e String Source: criteoUtil.js, line 21 Returns: Type void × Search results Close "},"module-domUtil.html":{"id":"module-domUtil.html","title":"Module: domUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: domUtil --------------------dom对象操作相关的util-------------------- Version: 1.0 Author: hzcaohuanhuan(hzcaohuanhuan@corp.netease.com) Source: domUtil.js, line 1 Methods &lt;inner&gt; _$hiddenNode(_node，html节点) 隐藏节点 Parameters: Name Type Description _node，html节点 Object Source: domUtil.js, line 14 &lt;inner&gt; _$isNodeShown(_node，html节点) 判断节点是否显示出来 Parameters: Name Type Description _node，html节点 Object Source: domUtil.js, line 25 &lt;inner&gt; _$showNode(_node) 显示节点 Parameters: Name Type Description _node Object Source: domUtil.js, line 38 &lt;inner&gt; _$toggleClassName(是否显示类名, 节点, 类名) 切换节点样式 Parameters: Name Type Description 是否显示类名 Boolean 节点 Object 类名 String Source: domUtil.js, line 63 &lt;inner&gt; _$toggleNodeDisplay(_node, _bool) 控制是否显示节点 Parameters: Name Type Description _node Object _bool boolean Source: domUtil.js, line 49 × Search results Close "},"module-emailUtil.html":{"id":"module-emailUtil.html","title":"Module: emailUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: emailUtil ---------邮箱相关处理工具类文件-------------------- Version: 1.0 Author: hzcaohuanhuan(hzcaohuanhuan@corp.netease.com) Source: emailUtil.js, line 1 Methods &lt;inner&gt; _$isNeteaseEmail(email) 判断是否是网易邮箱 Parameters: Name Type Description email String 比如@163.com、@126.com、@yeah.net、@vip.163.com、@vip.126.com、@188.com Source: emailUtil.js, line 13 Returns: bool 是否为邮箱 Type Boolean × Search results Close "},"module-encodeUtil.html":{"id":"module-encodeUtil.html","title":"Module: encodeUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: encodeUtil --------------------加密Util-------------------- Version: 1.0 Author: hzshaoyy(hzshaoyy@corp.netease.com) Source: encodeUtil.js, line 1 Methods &lt;inner&gt; _$encode(arg0, arg1) 编码字符串， 编码规则对象中r正则表达式参数提取字符串需要编码的内容， 然后使用编码规则对象中的映射表进行替换 Parameters: Name Type Description arg0 Object 编码规则 arg1 String 待编码的字串 Source: encodeUtil.js, line 13 Returns: 编码后的字串 Type String Example ```javascript NEJ.define([ 'base/util' ],function(_u){ // 把字符串99999根据规则9替换成t，结果：ttttt var str = _u._$encode({r:/\\d/g,'9':'t'},'99999'); }); ``` × Search results Close "},"module-extend.html":{"id":"module-extend.html","title":"Module: extend","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: extend ------------------对象合并-------------------------- Version: 1.0 Author: hzliujunwei(hzliujunwei@corp.netease.com) Source: extend.js, line 1 Methods &lt;inner&gt; extend(_bool, _args1被返回的对象, _args2需要复制的对象) 对象合并 Parameters: Name Type Description _bool Boolean 是否深度复制 _args1被返回的对象 Object | String | Number | Boolean _args2需要复制的对象 Object | String | Number | Boolean Source: extend.js, line 48 Returns: 被返回的对象 Type Object | String | Number | Boolean Example 例: extend(true, {}, {}, {}); &lt;inner&gt; isPlainObject() 判断plain对象 Source: extend.js, line 32 &lt;inner&gt; isType(type) 判断是否为某个类型对象 Parameters: Name Type Description type String 要判断的类型 Source: extend.js, line 12 × Search results Close "},"module-flashUtil.html":{"id":"module-flashUtil.html","title":"Module: flashUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: flashUtil ---------flash相关处理工具类文件-------------------- Version: 1.0 Author: hzlixinxin(hzlixinxin@corp.netease.com) Source: flashUtil.js, line 1 Methods &lt;inner&gt; _$isNeteaseEmail(email) 判断是否安装了flash Parameters: Name Type Description email Void Source: flashUtil.js, line 13 Returns: bool 是否安装了flash Type Boolean × Search results Close "},"module-gaUtil.html":{"id":"module-gaUtil.html","title":"Module: gaUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: gaUtil ---------------------ga 相关的util------------------------- Version: 1.0 Author: hzcaohuanhuan(hzcaohuanhuan@corp.netease.com) Source: gaUtil.js, line 1 Methods &lt;inner&gt; _$log(_obj) Parameters: Name Type Description _obj Object 对象 Source: gaUtil.js, line 85 Returns: Type Void &lt;inner&gt; _$trackEvent(_category, _action, _opt_label, _opt_value) 使用ga跟踪事件点击处理 Parameters: Name Type Description _category String 必填 _action String 必填 _opt_label String 选填 _opt_value number 选填 Source: gaUtil.js, line 58 Returns: void &lt;inner&gt; _$trackPageView(_showHash, _pageSelfName) 使用ga跟踪页面view点击 Parameters: Name Type Description _showHash String 显示的Hash _pageSelfName String 页面名字 Source: gaUtil.js, line 29 &lt;inner&gt; pushLog(_data) 往本地打log Parameters: Name Type Description _data Object 数据vo Source: gaUtil.js, line 16 × Search results Close "},"module-imageUtil.html":{"id":"module-imageUtil.html","title":"Module: imageUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: imageUtil -----------------------图片压缩相关的util-------------------- Version: 1.0 Author: hzshaoyy(hzshaoyy@corp.netease.com) Source: imageUtil.js, line 1 Methods &lt;inner&gt; _$scaleImage(_url, _width, _height, _otherProp) 通过相册或者的服务动态缩放图片,走CDN Parameters: Name Type Description _url String 图片地址 _width Number 图片压缩后的宽 _height Number 图片压缩后的高 _otherProp String 附加属性，默认为1x95，可以不传 Source: imageUtil.js, line 18 × Search results Close "},"module-jsbridgeUtil.html":{"id":"module-jsbridgeUtil.html","title":"Module: jsbridgeUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: jsbridgeUtil --------------------jsbridge相关的util--------------------- Version: 1.0 Author: hzzhanghanhui(hzzhanghanhui@corp.netease.com) Source: jsbridgeUtil.js, line 1 × Search results Close "},"module-mobileUtil.html":{"id":"module-mobileUtil.html","title":"Module: mobileUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: mobileUtil --------------------mobile相关的util--------------------- Version: 1.0 Author: hzcaohuanhuan(hzcaohuanhuan@corp.netease.com) Source: mobileUtil.js, line 1 Methods &lt;inner&gt; _$callAppDownload() 唤起app，如果失败去下载 微信打开，去中间页，提示用浏览器打开 iphone，不论是否唤起，都有下一步操作，跳转到下载页中间页，传_type = fromCallApp android,唤起app，失败跳转到下载页中间页 Parameters: Type Description Void Deprecated: Yes Author: hzchenbo2014 Source: mobileUtil.js, line 318 &lt;inner&gt; _$getIosVersion() [_$getIosVersion 返回ios的版本如 8,9] Parameters: Type Description Void Author: hzchenbo2014 Source: mobileUtil.js, line 255 Returns: iosVersion Type Number &lt;inner&gt; _$getUserAgent() 获取userAgnet Parameters: Type Description Void Source: mobileUtil.js, line 47 &lt;inner&gt; _$is() 判断是否是该平台 Parameters: Type Description Void Source: mobileUtil.js, line 186 &lt;inner&gt; _$isAndroid() 判断是否是android端 Parameters: Type Description Void Source: mobileUtil.js, line 227 &lt;inner&gt; _$isAndroidK12webView() 判断是否android k12 webView Parameters: Type Description Void Source: mobileUtil.js, line 116 &lt;inner&gt; _$isAndroidMoocWebView() 判断是否安卓mocc webView Parameters: Type Description Void Source: mobileUtil.js, line 96 &lt;inner&gt; _$isAndroidWebView() 判断是否安卓study WebView Parameters: Type Description Void Source: mobileUtil.js, line 57 &lt;inner&gt; _$isIosK12webView() 判断是否ios k12 webView Parameters: Type Description Void Source: mobileUtil.js, line 126 &lt;inner&gt; _$isIosMoocWebView() 判断是否IOS mooc webView Parameters: Type Description Void Source: mobileUtil.js, line 106 &lt;inner&gt; _$isIosWebView() 判断是否ios study WebView Parameters: Type Description Void Source: mobileUtil.js, line 67 &lt;inner&gt; _$isIpad() 判断是否是Ipad端 Parameters: Type Description Void Source: mobileUtil.js, line 208 &lt;inner&gt; _$isIphone() 判断是否是iphone端 Parameters: Type Description Void Source: mobileUtil.js, line 217 &lt;inner&gt; _$isMobile() 判断是否是移动端非适配页面 Parameters: Type Description Void Source: mobileUtil.js, line 172 &lt;inner&gt; _$isMobileAll() 判断是否是移动端 Parameters: Type Description Void Source: mobileUtil.js, line 197 &lt;inner&gt; _$isWap() 判断是否是移动端适配页面 Parameters: Type Description Void Source: mobileUtil.js, line 237 &lt;inner&gt; _$isWebView() 判断是否WebView Parameters: Type Description Void Source: mobileUtil.js, line 137 &lt;inner&gt; _$isWebViewSupportJB() 判断是否WebView 且支持jsbridge 唤醒app登陆 Parameters: Type Description Void Source: mobileUtil.js, line 146 &lt;inner&gt; _$isWeixin() 判断是否是微信打开 Parameters: Type Description Void Source: mobileUtil.js, line 246 &lt;inner&gt; _$openMobilePage() 打开移动端页面 Parameters: Type Description Void Deprecated: Yes Source: mobileUtil.js, line 281 × Search results Close "},"module-numUtil.html":{"id":"module-numUtil.html","title":"Module: numUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: numUtil ----------------------数字格式化util----------------------- Version: 1.0 Author: hzliujunwei(hzliujunwei@corp.netease.com) Source: numUtil.js, line 1 Methods &lt;inner&gt; _$formatFileSize(_bytes) 格式化计算文件大小 Parameters: Name Type Description _bytes Number 字节数 Source: numUtil.js, line 49 Returns: string &lt;inner&gt; _$formatNum(_maxNum, cUnit) 格式化货币显示 Parameters: Name Type Description _maxNum Number 需要格式化的数字 cUnit String 货币单位 Source: numUtil.js, line 25 Returns: 格式化后的数字,默认和异常都为0 Type Number × Search results Close "},"module-objectUtil.html":{"id":"module-objectUtil.html","title":"Module: objectUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: objectUtil -----------------objectUtil 对象操作相关的util-------------------- Version: 1.0 Author: hzcaohuanhuan(hzcaohuanhuan@corp.netease.com) Source: objectUtil.js, line 1 Methods &lt;inner&gt; _$convertToJSONHex(_obj) 将对象转换为JSON字符串,然后使用hex编码返回对象,主要是用于GA统计日志分析数据 Parameters: Name Type Description _obj Object 需要转换的对象 Source: objectUtil.js, line 58 Returns: '###'加上hex编码 Type String &lt;inner&gt; _$deepCleanObj(_originObj) 深度清除 对象中值为null 与 undefined 的key Parameters: Name Type Description _originObj Object 原始数据 Source: objectUtil.js, line 37 Returns: 返回一个新的清除后的对象 Type Object &lt;inner&gt; _$deepCopy(_originObj) 深层拷贝 (NEJ.X() 的拷贝只能实现浅拷贝，拷贝的是对象的引用) Parameters: Name Type Description _originObj Object 原始数据 Source: objectUtil.js, line 14 Returns: 深克隆后的对象 Type Object × Search results Close "},"module-promise.html":{"id":"module-promise.html","title":"Module: promise","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: promise --------------------promise---------------------- Version: 1.0 Author: hzliujunwei(hzliujunwei@corp.netease.com) Source: promise.js, line 1 × Search results Close "},"module-regUtil.html":{"id":"module-regUtil.html","title":"Module: regUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: regUtil ------------输入校验工具类，比如校验邮箱，手机号，身份证等等----------- Version: 1.0 Author: hzshaoyy(hzshaoyy@corp.netease.com) Source: regUtil.js, line 1 Methods &lt;inner&gt; _$isEmail(_text) 判断对象是否为合法的email Parameters: Name Type Description _text String 输入的字符串 Source: regUtil.js, line 13 Returns: 返回是否是Email Type Boolean &lt;inner&gt; _$isPhone(_number) 判断对象是否为合法的手机号 Parameters: Name Type Description _number String 输入的数字 Source: regUtil.js, line 24 Returns: 返回是否是合法的手机号 Type Boolean &lt;inner&gt; _$isPositiveNum(_number) 判断数字是否是整数，例如0.2 , 1.5 , 8 Parameters: Name Type Description _number String 输入的数字 Source: regUtil.js, line 48 Returns: 返回是否是整数 Type Boolean &lt;inner&gt; _$isQQ(_number) 判断是否是qq号，例如10000起 Parameters: Name Type Description _number String 输入的数字 Source: regUtil.js, line 58 Returns: 返回是否是整数 Type Boolean &lt;inner&gt; _$isTel(_number) 判断对象是否为合法的电话号码 匹配格式： 11位手机号码 3-4位区号，7-8位直播号码，1－4位分机号 如：(0511-4405222、 021-87888822、12345678901、1234-12345678-1234） Parameters: Name Type Description _number String 输入的数字 Source: regUtil.js, line 34 Returns: 返回是否是合法的电话号码 Type Boolean × Search results Close "},"module-shareUtil.html":{"id":"module-shareUtil.html","title":"Module: shareUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: shareUtil -------------shareUtil模块对象，用于第三方分享---------------- Version: 1.0 Author: tangtianliang(tangtianliang@corp.netease.com) Source: shareUtil.js, line 1 Methods &lt;inner&gt; shareWeibo(_options) 分享到QQ空间 Parameters: Name Type Description _options Object Properties Name Type Description url String title String pic String description String Source: shareUtil.js, line 61 Returns: Type void &lt;inner&gt; shareWeibo(_options) 分享到微信 Parameters: Name Type Description _options Object Properties Name Type Description url String title String pic String Source: shareUtil.js, line 40 Returns: Type void × Search results Close "},"module-textUtil.html":{"id":"module-textUtil.html","title":"Module: textUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: textUtil -------------textUtil模块对象，用于获取或修改字符串信息---------------- Version: 1.0 Author: tangtianliang(tangtianliang@corp.netease.com) Source: textUtil.js, line 1 Methods &lt;inner&gt; _$ellipsisStrByLength(_string, _maxLength) 截断字符串，如果超出字数限制，追加... Parameters: Name Type Description _string String 输入的字符串 _maxLength Number 需要截断的长度 Source: textUtil.js, line 86 Returns: 返回截断后的字符串，如果超出字数限制，追加... Type String &lt;inner&gt; _$filterText(_richText) 过滤富文本标签得方法 Parameters: Name Type Description _richText String 带标签的富文本 Source: textUtil.js, line 28 Returns: 转化为字符串的富文本 Type String &lt;inner&gt; _$getStringLength(_string) 获取字符串长度，中文是长度是2 Parameters: Name Type Description _string String 输入的字符串 Source: textUtil.js, line 40 Returns: 字符串长度 Type Number &lt;inner&gt; _$removeNRNBSP(_text) 去掉回车换行tab,将多于的空格变成一个空格 Parameters: Name Type Description _text String 字符串 Source: textUtil.js, line 17 Returns: 去掉空格之后的字符串 Type String &lt;inner&gt; _$sliceStrByLength(_string, _maxLength) 截断字符串，处理中英文情况 Parameters: Name Type Description _string String 输入的字符串 _maxLength Number 需要截断的长度, 实际的长度，中文算两个，则传入的_maxLength为*2 Source: textUtil.js, line 57 Returns: 返回截断后的字符串 Type String × Search results Close "},"module-timeUtil.html":{"id":"module-timeUtil.html","title":"Module: timeUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: timeUtil -------TimerUtil模块对象，用于获取时间，以及格式化时间------------- Version: 1.0 Author: tangtianliang(tangtianliang@corp.netease.com) Source: timeUtil.js, line 1 Requires module:encodeUtil Methods &lt;inner&gt; _$formatCommonTime(_time) 通用格式化时间 Parameters: Name Type Description _time Number 时间毫秒 Source: timeUtil.js, line 143 Returns: 待定或yyyy年MM月dd日 HH:mm格式的时间 Type String &lt;inner&gt; _$formatPeriod(_fromTime, _toTime, _format, _conjunction) 格式化时间段 Parameters: Name Type Description _fromTime number 开始时间毫秒 _toTime number 结束时间毫秒 _format string 格式化规则 _conjunction string 连接符 Source: timeUtil.js, line 156 Returns: 格式化后的时间段 Type string &lt;inner&gt; _$formatTiktokTime(_endTime, _curTime) 格式化倒计时的时间 Parameters: Name Type Description _endTime Number 目标时间 _curTime Number 当前时间 Source: timeUtil.js, line 227 Returns: 格式化后的字符串, 倒计时长大于1天 5天5时5分钟 倒计时长大于1时小于1天 5时5分钟 倒计时长大于1分小于1时 5分钟 倒计时长大于1秒小于1分 5秒钟 Type String &lt;inner&gt; _$formatTime(_time, _format) 格式化时间戳 Parameters: Name Type Description _time number 时间毫秒 _format string 格式化规则 Source: timeUtil.js, line 132 Returns: 格式化后的规则 Type string &lt;inner&gt; _$getCurDayPharse() 获取当前是上午、下午等等 Source: timeUtil.js, line 256 Returns: 时间状态 Type string &lt;inner&gt; _$getCurServerTime() 返回当前服务器的时间 Parameters: Type Description Void Source: timeUtil.js, line 41 Returns: 返回当前服务器的时间毫秒 Type millisec &lt;inner&gt; _$getReplyTime(_millisec) 显示规则： 一分钟内：4s 前 今天：19：52 昨天以前：3月2日 一年前（自然年）：2015年11月21日 Parameters: Name Type Description _millisec number 时间毫秒 Source: timeUtil.js, line 283 Returns: 时间状态 Type string &lt;inner&gt; _$getServerRespondTime() 获取服务器渲染相应页面的时间 Parameters: Type Description Void Source: timeUtil.js, line 26 Returns: 返回服务器渲染相应页面的时间毫秒 Type millisec &lt;inner&gt; _$getTimeData(_time, _12time) 返回时间类型串 格式化时间，yyyy|yy|MM|cM|eM|M|dd|d|HH|H|mm|ms|ss|m|s|w 各标识说明： 标识 说明 yyyy 四位年份，如2001 yy 两位年费，如01 MM 两位月份，如08 M 一位月份，如8 dd 两位日期，如09 d 一位日期，如9 HH 两位小时，如07 H 一位小时，如7 mm 两位分钟，如03 m 一位分钟，如3 ss 两位秒数，如09 s 一位秒数，如9 ms 毫秒数，如234 w 中文星期几，如一 ct 12小时制中文后缀，上午/下午 et 12小时制英文后缀，A.M./P.M. cM 中文月份，如三 eM 英文月份，如Mar Parameters: Name Type Description _time millisec 时间毫秒 _12time millisec 指定格式的时间串 Source: timeUtil.js, line 53 Returns: 格式化时间对象 Type Object &lt;inner&gt; _$Millisec2Str(_seconds) 格式化视频时长，目前只显示分钟和秒数 Parameters: Name Type Description _seconds Number 秒数 Source: timeUtil.js, line 328 Returns: 格式化后的字符串，如：‘86:08’ , 有小时的显示‘11：21：21’ Type String &lt;inner&gt; _$str2Millisec(_strTime) 把格式化的视频时长转换回秒数 Parameters: Name Type Description _strTime String 格式化后的字符串，如：‘86:08’ , 有小时的显示‘11：21：21’ Source: timeUtil.js, line 348 Returns: _seconds 秒数 Type Number &lt;inner&gt; _$tiktok(_endTime, _curTime) 生成倒计时时间对象 Parameters: Name Type Description _endTime number 截止时间毫秒 _curTime number 当前时间毫秒 Source: timeUtil.js, line 179 Returns: 格式化时间对象 Type Object × Search results Close "},"module-urlUtil.html":{"id":"module-urlUtil.html","title":"Module: urlUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: urlUtil -------------- url相关的util----------------------- Version: 1.0 Author: hzshaoyy(hzshaoyy@corp.netease.com) Source: urlUtil.js, line 1 Methods &lt;inner&gt; _$getDecodeCurUrl(_urlParams) 获取当前的Url，注意反编码url Parameters: Name Type Description _urlParams Object url上带上的参数，可以添加，用于后端判断 Source: urlUtil.js, line 56 Returns: 拼接后的url Type String &lt;inner&gt; _$getReturnUrl(_urlParamsArr) 获取returnUrl Parameters: Name Type Description _urlParamsArr Object url上带上的参数，可以添加，用于后端判断 Source: urlUtil.js, line 100 Returns: 返回的url(base64) Type String &lt;inner&gt; _$isRightUMI(_hash, _umiP) 判断当前hash是否是那个umi Parameters: Name Type Description _hash String 当前hash _umiP String 目标umi Source: urlUtil.js, line 35 Returns: 是否符合 Type Boolean &lt;inner&gt; _$parseUrlParams(_search) 解析url参数 输入： ?123=dawd&amp;adwd&amp;a1=1 输出： { 123: 'dawd', adwd: '', a1: &quot;1&quot; } Parameters: Name Type Description _search String url Source: urlUtil.js, line 15 Returns: url参数map对象 Type Object × Search results Close "},"module-userUtil.html":{"id":"module-userUtil.html","title":"Module: userUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: userUtil ---------用户信息处理工具类文件------------------------------ Version: 1.0 Author: tangtianliang(tangtianliang@corp.netease.com) Source: userUtil.js, line 1 Methods &lt;inner&gt; _$getWebUser() 获取登录的用户信息 Source: userUtil.js, line 13 Returns: webuser Type Object &lt;inner&gt; _$isUserOwner(_userId) 判断是否是用户自己 Parameters: Name Type Description _userId String 传入的用户id Source: userUtil.js, line 26 Returns: 是否是用户自己 Type Boolean × Search results Close "},"module-versionUtil.html":{"id":"module-versionUtil.html","title":"Module: versionUtil","body":" 教育产品组件开发文档 Modules arrayUtilcashUtilcriteoUtildomUtilemailUtilencodeUtilextendflashUtilgaUtilimageUtiljsbridgeUtilmobileUtilnumUtilobjectUtilpromiseregUtilshareUtiltextUtiltimeUtilurlUtiluserUtilversionUtil Module: versionUtil ---------版本工具类文件------------------------------ Version: 1.0 Author: tangtianliang(tangtianliang@corp.netease.com) Source: versionUtil.js, line 1 Methods &lt;inner&gt; _$versionCompare(v1, v2, options) 比较版本大小 Parameters: Name Type Description v1 String 1.0.0版本1 v2 String 1.0.0版本2 options Object { lexicographical zeroExtend 后缀补全0 } Source: versionUtil.js, line 19 Returns: true v1&gt;v2 Type boolean × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
