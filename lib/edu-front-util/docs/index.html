<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>教育产品组件开发文档 Index</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.cosmo.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top navbar-inverse">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">教育产品组件开发文档</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu inline">
					<li><a href="module-arrayUtil.html">arrayUtil</a></li><li><a href="module-cashUtil.html">cashUtil</a></li><li><a href="module-criteoUtil.html">criteoUtil</a></li><li><a href="module-domUtil.html">domUtil</a></li><li><a href="module-emailUtil.html">emailUtil</a></li><li><a href="module-encodeUtil.html">encodeUtil</a></li><li><a href="module-extend.html">extend</a></li><li><a href="module-flashUtil.html">flashUtil</a></li><li><a href="module-gaUtil.html">gaUtil</a></li><li><a href="module-imageUtil.html">imageUtil</a></li><li><a href="module-jsbridgeUtil.html">jsbridgeUtil</a></li><li><a href="module-mobileUtil.html">mobileUtil</a></li><li><a href="module-numUtil.html">numUtil</a></li><li><a href="module-objectUtil.html">objectUtil</a></li><li><a href="module-promise.html">promise</a></li><li><a href="module-regUtil.html">regUtil</a></li><li><a href="module-shareUtil.html">shareUtil</a></li><li><a href="module-textUtil.html">textUtil</a></li><li><a href="module-timeUtil.html">timeUtil</a></li><li><a href="module-urlUtil.html">urlUtil</a></li><li><a href="module-userUtil.html">userUtil</a></li><li><a href="module-versionUtil.html">versionUtil</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-8">
	
		<div id="main">
			

	
	











	
	





    <section class="readme-section">
        <article><h1>教育产品部前端Util类库</h1><hr>
<p><a href="https://g.hz.netease.com/edu-frontend/edu-front-util/commits/master"><img src="https://g.hz.netease.com/edu-frontend/edu-front-util/badges/master/build.svg" alt="build status"></a>
<a href="https://g.hz.netease.com/edu-frontend/edu-front-util/commits/master"><img src="https://g.hz.netease.com/edu-frontend/edu-front-util/badges/master/coverage.svg" alt="coverage report"></a></p>
<p>v1.1.0 将项目中与业务耦合关联不高的Util逻辑抽取出来了</p>
<h2>主要模块</h2><ul>
<li><p>arrayUtil 数组Util模块</p>
</li>
<li><p>CashUtil 价格转换Util模块</p>
</li>
<li><p>domUtil DOM操作Util模块</p>
</li>
<li><p>emailUtil 邮箱判断Util模块</p>
</li>
<li><p>encodeUtil 加密Util模块</p>
</li>
<li><p>extend 对象合并Util模块</p>
</li>
<li><p>flashUtil flash相关工具模块</p>
</li>
<li><p>imageUtil 图片压缩相关的util模块</p>
</li>
<li><p>mobileUtil mobile相关的util模块</p>
</li>
<li><p>numUtil 数字格式化util模块</p>
</li>
<li><p>objectUtil 对象操作util模块</p>
</li>
<li><p>RegUtil 正则表达式Util模块</p>
</li>
<li><p>TextUtil 字符串Util模块</p>
</li>
<li><p>TimeUtil 时间转换Util模块</p>
</li>
<li><p>urlUtil url相关的Util模块</p>
</li>
<li><p>userUtil 用户信息处理工具类文件模块</p>
</li>
<li><p>versionUtil 版本工具类模块</p>
</li>
<li><p>debugUtil 前后端联调需要的util模块(??这东西现在还没有)</p>
</li>
</ul>
<p><strong>目前的模块均使用CommonJs的方式来组织，后续扩展</strong></p>
<h2>Test（使用mocha+chai进行单元测试）</h2><pre class="prettyprint source"><code>* npm install mocha安装mocha
* npm install puer安装puer
* bower install安装nej
* 在根目录下运行puer
* 在弹出的浏览器页面选择test -> index.html，该页面会显示单元测试的执行结果</code></pre><h4>mocha常用命令</h4><pre class="prettyprint source"><code>//执行测试单个文件
 mocha test/testDay1.test.js
//默认执行test目录下所有文件
mocha --recursive
//--help或-h参数，用来查看Mocha的所有命令行参数
mocha --help
//--reporter参数用来指定测试报告的格式，默认是spec格式
mocha
等同于
mocha --reporter spec
//--reporters参数可以显示所有内置的报告格式
mocha --reporters
//使用mochawesome 报表
mocha test/testDay1.test.js --reporter mochawesome</code></pre><h4>单元测试的写法</h4><p>单元测试使用chai的断言库assert</p>
<p>例子：</p>
<pre class="prettyprint source"><code>NEJ.define([
    'pro/numUtil',    //被测试的文件
],function (
    numUtil  
){

var assert  = chai.assert ;

describe('numUtil', function() {
    describe('#numUtil._$num10000(),把输入的数值转化为以万为单位、不足万的显示原数', function () {
        it('输入41023，应该输出4.1万', function () {
            assert.equal(&quot;4.1万&quot;, numUtil._$num10000(41023));});
        it('输入41523，应该输出4.2万', function(){
            assert.equal(&quot;4.2万&quot;, numUtil._$num10000(41523));
        });
        it('输入30000，应该输出3万', function(){
            assert.equal(&quot;3万&quot;, numUtil._$num10000(30000));
        });
        it('输入4000，应该输出4000', function(){
            assert.equal(&quot;4000&quot;, numUtil._$num10000(4000));
        });

    });
    })</code></pre><ul>
<li>每个方法写一个describe，形式为：‘方法名+方法描述’</li>
<li>每个方法的测试用例写一个it，描述形式为： ‘输入xx,应该输出xx’</li>
</ul>
<h4>常见问题</h4><ul>
<li>如何在单元测试里判断两个对象相等？ <pre class="prettyprint source"><code>assert.deepEqual({&quot;a&quot;:0,&quot;d&quot;:1,&quot;f&quot;:&quot;&quot;,&quot;obj&quot;:{&quot;a&quot;:0,&quot;d&quot;:1,&quot;f&quot;:&quot;&quot;}}, objectUtil._$deepCleanObj({ a: 0, b: undefined, c: null, d :1 ,f:'', obj:{a: 0, b: undefined, c: null, d :1 ,f:''}}));</code></pre></li>
<li>如何判断两个数组相等？<pre class="prettyprint source"><code>assert.sameMembers([1,2,3], [1,2,3]);</code></pre></li>
</ul>
<h2>注释生成API文档（使用Jsdoc）</h2><pre class="prettyprint source"><code>* 在本项目根目录命令行输入npm run js2doc
* 生成的文档在docs文件夹下
* 点击docs/index.html打开</code></pre><h3>项目统一注释标准</h3><p><strong>包头部</strong></p>
<p>表明模块名称、版本、作者、路径等信息</p>
<pre class="prettyprint source lang-javascript"><code>/**
 * 
 * 图片压缩相关的util
 * @module imageUtil
 * @version  1.0
 * @author   hzshaoyy(hzshaoyy@corp.netease.com)
 * @path     eutil/imageUtil
 * --------------------------------------------------------
 */</code></pre><p><strong>方法</strong></p>
<p>写明方法的用途，标明方法名、参数、返回值等信息</p>
<pre class="prettyprint source lang-javascript"><code>/**
 * 格式化计算文件大小
 * @method _$formatFileSize
 * @param  {Number} _bytes 字节数
 * @return string
 */</code></pre><h3>jsdoc配置</h3><p>jsdoc包的安装目录为：node_module/jsdoc，其配置文件为目录下的conf.json文件。</p>
<pre class="prettyprint source"><code>&quot;opts&quot;:{
  &quot;template&quot;: &quot;node_modules/ink-docstrap/template&quot;,  // 生成的文档采用的Html模板
  &quot;encoding&quot;: &quot;utf8&quot;,               // 编码方式
  &quot;destination&quot;: &quot;docs/&quot;,          // 输出文档的存放路径
  &quot;recurse&quot;: true,                  // same as -r
  &quot;readme&quot;: &quot;README.md&quot;             //首页显示README.md的内容
}</code></pre><p>具体的配置项见参考资料中的jsdoc文档。</p>
<h3>ink-docstrap</h3><p>ink-docstrap是基于jsdoc的文档模板，有多种样式可供选择，使jsdoc生成的文档页面更加美观。</p>
<p>它的配置在jsdoc的conf.json文件中的template字段。具体配置项见文末的参考资料。</p>
<pre class="prettyprint source"><code>&quot;templates&quot; : {
  &quot;cleverLinks&quot;           : false,
  &quot;monospaceLinks&quot;        : false,
  &quot;dateFormat&quot;            : &quot;ddd MMM Do YYYY&quot;,
  &quot;outputSourceFiles&quot;     : true,
  &quot;outputSourcePath&quot;      : true,
  &quot;systemName&quot;            : &quot;edu-front-util&quot;,  //全局显示的项目名称
  &quot;footer&quot;                : &quot;&quot;,
  &quot;copyright&quot;             : &quot;网易杭州研究院--教育产品部门--前端技术部&quot;,  //版权所有
  &quot;navType&quot;               : &quot;vertical&quot;,
  &quot;theme&quot;                 : &quot;flatly&quot;,   //使用的主题，伦家觉得这个绿色很小清新~
  &quot;linenums&quot;              : true,
  &quot;collapseSymbols&quot;       : false,
  &quot;inverseNav&quot;            : true,
  &quot;syntaxTheme&quot;           : &quot;default&quot;  //代码高亮背景色，还可以选dark
}</code></pre><h2>单元测试覆盖率</h2><ul>
<li>执行npm install</li>
<li>依次执行npm run test , npm run coverage </li>
</ul>
<p>npm run test命令是执行单元测试，因为覆盖率是根据单元测试来的，所以要先执行单元测试</p>
<p>npm run coverage则是在本地的coverage文件夹中根据刚刚的单元测试结果，生成lcov-report/index.html文件，打开即可查看单元测试覆盖率</p>
<h2>参考资料：</h2><p>mocha教程： http://www.ruanyifeng.com/blog/2015/12/a-mocha-tutorial-of-examples.html</p>
<p>assert文档： https://nodejs.org/dist/latest-v4.x/docs/api/assert.html#assert_assert_equal_actual_expected_message</p>
<p>chai文档： http://chaijs.com/</p>
<p>jsdoc中文文档：http://www.css88.com/doc/jsdoc/tags-requires.html</p>
<p>ink-docstrap文档：https://docstrap.github.io/docstrap/index.html</p></article>
    </section>







		</div>
	</div>

	<div class="clearfix"></div>

	
		<div class="col-md-3">
			<div id="toc" class="col-md-3 hidden-xs hidden-sm hidden-md"></div>
		</div>
	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


	<span class="copyright">
	网易教育产品部 前端组
	</span>

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.1</a>
	
		on Wed Dec 28th 2016
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>