<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"uploader_fileUploader.js.html":{"id":"uploader_fileUploader.js.html","title":"Source: uploader/fileUploader.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: uploader/fileUploader.js /** * 上传组件 */ NEJ.define([ 'text!./fileUploader.html', 'base/util', 'base/element', 'util/template/tpl', 'ui/base', 'util/ajax/xdr', 'eui/uploader/util', 'eui/uploader/constant', 'eui/uploader/defaultConfig' ],function( _template, ut, e, t, ui, j, uploadUtil, uploadConst, defaultConfig, p, o, f, r){ // 样式 var _seed_css = e._$pushCSSText('\\ .u-upload{ position:relative; display:inline-block;}\\ .u-upload .showIpt{ text-align:center; overflow:hidden;}\\ .u-upload .filewrap{ overflow:hidden; position:absolute; top:0; left:0; width:100%; height:100%;}\\ .u-upload .realIpt{ font-size:100px; display:block; position:absolute; top:0; left:0; filter:alpha(opacity=0); opacity:0; cursor:pointer; width:100%; height:100%;}'); // 上传组件类 p._$$UploadUI = NEJ.C(); var _proUploadUI; _proUploadUI = p._$$UploadUI._$extend(ui._$$Abstract, true); /** * 初始化外观信息 * */ _proUploadUI.__initXGui = function() { this.__seed_css = _seed_css; this.__seed_html = t._$addNodeTemplate(_template); }; /** * 初始化节点 * * @return {Void} */ _proUploadUI.__initNode = function() { this.__supInitNode(); //初始化节点 this.__showUpload = this.__body; this.__txtNode = e._$getByClassName(this.__body,'j-txt')[0]; this.__fileWrapNode = e._$getByClassName(this.__body,'j-filewrap')[0]; this.__uploadForm = e._$getByClassName(this.__body, 'j-uploadForm')[0]; // 表单节点 }; /** * 统一的错误处理 */ _proUploadUI.__errorHandler = function(_msg, _callBack){ if (!ut._$isObject(_msg)) { _msg = { message : _msg } } if (_msg.code == -2) { // edu token 过期错误 this.__getEduToken(); return; }; // 如果有其他地址，则重试。取消上传也会触发错误，但是不应该重新上传，这里不好判断 // if (this.__uploadIPs.length &gt; 1 &amp;&amp; this.__posUploadIPIndex &lt; this.__uploadIPs.length - 1) { // this.__posUploadIPIndex++; // this.__checkToUpload(); // return; // }; var _str = (_msg.code || _msg.errCode || '') + (_msg.errMsg || _msg.msg || _msg.message || '网络错误'); this.__resetHtmlFileNode(); if (!this.__isAbort) { // 如果没有__reqId则是主动取消，不抛错 this.__config.onUploadError &amp;&amp; this.__config.onUploadError({ reqId : this.__reqId, errMsg : _str, fileName : this.__file }); }; } /** * 重置file域 */ _proUploadUI.__resetHtmlFileNode = function(_disable){ //允许多次选择同一个文件，因此每次都重置file域 var _html; if (!!_disable) { // 禁用 this.__fileWrapNode.innerHTML = ''; return } var _html = '&lt;input name=&quot;file&quot; type=&quot;file&quot; class=&quot;j-inputfile realIpt&quot; title=&quot;&quot; '; switch (this.__config.type){ case uploadConst.UPLOAD_FILE_TYPE_PDF: _html += 'accept=&quot;' + uploadConst.PDF_FILE_EXTENSION.join(', ')+'&quot; &gt;'; break; case uploadConst.UPLOAD_FILE_TYPE_VIDEO: _html += 'accept=&quot;' + uploadConst.VIDEO_FILE_EXTENSION.join(', ')+'&quot; &gt;'; break; case uploadConst.UPLOAD_FILE_TYPE_ATTACH: _html += 'accept=&quot;' + uploadConst.ATTACH_FILE_EXTENSION.join(', ')+'&quot; &gt;'; break; case uploadConst.UPLOAD_FILE_TYPE_CAPTION: _html += 'accept=&quot;' + uploadConst.CAPTION_FILE_EXTENSION.join(', ')+'&quot; &gt;'; case uploadConst.UPLOAD_FILE_TYPE_IMAGE: _html += 'accept=&quot;' + uploadConst.IMAGE_FILE_EXTENSION.join(', ')+'&quot; &gt;'; break; case uploadConst.UPLOAD_FILE_TYPE_EXCEL: _html += 'accept=&quot;' + uploadConst.EXCEL_FILE_EXTENSION.join(', ')+'&quot; &gt;'; default: _html += '&gt;'; break; } this.__fileWrapNode.innerHTML = _html; this.__realUpload = e._$getByClassName(this.__body, 'j-inputfile')[0]; this.__doInitDomEvent([[this.__realUpload, 'change', this.__uploadHandler._$bind(this)]]); } /** * 禁用 */ _proUploadUI._$disable = function(_disable){ this.__isDisable = _disable; if (this.__isDisable) { if(this.__config.btnDisableClassName){ e._$addClassName(this.__showUpload, this.__config.btnDisableClassName); } }else{ if(this.__config.btnDisableClassName){ e._$delClassName(this.__showUpload, this.__config.btnDisableClassName); } } this.__resetHtmlFileNode(_disable); } /** * 取消上传，该方法暂时不对外 */ _proUploadUI._$abort = function(){ this.__isAbort = true; // 所有请求都取消 if(this.__reqId){ j._$abort(this.__reqId); this.__reqId = null; } if (this.__blobUploadId) { uploadUtil._$abortFileUploadByBlobs(this.__blobUploadId); this.__blobUploadId = null; }; this.__resetHtmlFileNode(); } /** * 上传进度事件 */ _proUploadUI.__onUploading = function(_data){ if (!!_data) { _data.initOffset = _data.initOffset || 0; _data.beginTime = this.__beginTime; _data.fileName = this.__file; this.__config.onUpdateProgress &amp;&amp; this.__config.onUpdateProgress(_data); } }; /** * 上传完成处理 */ _proUploadUI.__onUploadComplete = function(_data){ _data = _data || {}; this.__resetHtmlFileNode(); if(_data.errCode){ // nos上传完成的结果也可能出错，包含了错误信息 this.__errorHandler(_data); return; } var _data = { fileName : this.__file, // 视频文件的名称 nosKey : this.__nosKey, // 视频文件上传至nos的对象名 bucket : this.__bucket }; // 触发上传完成事件 this.__config.onFinishUpload &amp;&amp; this.__config.onFinishUpload(_data); }; /** * 点击上传按钮的操作 */ _proUploadUI.__uploadHandler = function(){ // 重新选择文件后重置 this.__isAbort = false; var _fileName = this.__realUpload.value; while (_fileName.indexOf('\\\\') != -1){ _fileName = _fileName.slice(_fileName.lastIndexOf('\\\\') + 1); } // 如果需要对文件格式进行判断，则调用this.__verifyFile进行判断，可由options传入 // // 提供文件名和节点作为参数，不同浏览器对于file操作和属性不一样，需要自己处理 if(!!this.__config.verifyFile &amp;&amp; !this.__config.verifyFile(_fileName, this.__realUpload)){ this.__resetHtmlFileNode(); return; } // 保存文件信息 this.__file = _fileName; this.__beginTime = new Date().getTime(); // 开始上传的时间戳 this.__fileSize = uploadUtil._$getFileSize(this.__realUpload); this.__fileGmtModifiedTime = uploadUtil._$getFileLastModifiedTime(this.__realUpload); // 触发开始上传事件 if(!!this.__file){ this.__config.onBeginUpload &amp;&amp; this.__config.onBeginUpload({ 'name':this.__file, 'curTime':this.__beginTime }); } // 调用应用接口获取凭证 this.__getEduToken(); } /** * 调用应用接口获取凭证，用于交换nos数据 */ _proUploadUI.__getEduToken = function(){ // 调用应用接口 var _options = { sync : false, type : 'json', data : { 'fileName':encodeURIComponent(this.__file), 'type':this.__config.type, 'fileSize' : this.__fileSize, 'fileGmtModifiedTime' : this.__fileGmtModifiedTime }, query : {}, method : 'POST', timeout : 0, headers : {}, cookie : false, // 跨域请求是否带cookie，仅对CORS方式有效 mode : this.__config.mode, // 请求模式,针对跨域请求采用的请求方式 onload: function(_data){ if(!!_data){ if (_data.code != 0) { // 错误 this.__errorHandler(_data); }else{ this.__eduUploaderToken = _data.result; // 交换token this.__getNosToken(); } }else{ this.__errorHandler('上传失败！无数据返回'); } }._$bind(this), onerror:this.__errorHandler._$bind(this, '初始化上传失败！') }; this.__reqId = j._$request(this.__config.initUploadUrl, _options); } /** * 调用交换接口获取nos数据 */ _proUploadUI.__getNosToken = function(){ // 调用token接口 var _options = { sync : false, type : 'json', query : { 'eduUploaderToken':this.__eduUploaderToken, 'fileName' : encodeURIComponent(this.__file), 'fileSize' : this.__fileSize, 'fileGmtModifiedTime' : this.__fileGmtModifiedTime, '_t' : (new Date()).getTime() }, method : 'GET', timeout : 0, headers : {}, cookie : false, // 跨域请求是否带cookie，仅对CORS方式有效 mode : this.__config.mode, // 请求模式,针对跨域请求采用的请求方式 onload: function(_data){ if(!!_data){ if(_data.code != 0){ this.__errorHandler(_data);//'上传失败，code:' + _data.code + '，errMsg:' + _data.message); }else{ // nos token this.__xNosToken = _data.result.xnosToken; // nos桶名 this.__bucket = _data.result.bucketName; // 存储上传文件的object对象名 this.__nosKey = _data.result.nosKey; // 开始文件上传操作 this.__checkToUpload(); } }else{ this.__errorHandler('上传失败！无数据返回'); } }._$bind(this), onerror:this.__errorHandler._$bind(this, '上传失败！') }; this.__reqId = j._$request(uploadConst.EXCHANGE_NOSTOKEN_URL, _options); } // 判断选择哪种上传 _proUploadUI.__checkToUpload = function(){ if (this.__isSupportAnchor()) { // 开始断点续传 if (this.__hasGetIPs) { // 已经获取了ip this.__startUploadByBlobs(); }else{ this.__getNosIP(); } }else{ this.__startFromUpload(); // 开始普通表单直传 } } /** * 开始表单上传 */ _proUploadUI.__startFromUpload = function(){ e._$getByClassName(this.__uploadForm, 'j-noskey')[0].value = this.__nosKey; e._$getByClassName(this.__uploadForm, 'j-xnostoken')[0].value = this.__xNosToken; // 普通表单上传 var _options = { type:'json', mode:this.__config.mode, method:'POST', cookie:false, headers:{}, onuploading:this.__onUploading._$bind(this), // 表单上传没有进度，所以可以不传 onload:this.__onUploadComplete._$bind(this), onerror:this.__errorHandler._$bind(this) }; // nos上传地址 this.__uploadForm.action = this.__uploadIPs[this.__posUploadIPIndex] + '/' + this.__bucket; this.__reqId = j._$upload(this.__uploadForm, _options); } /** * 选择断点续传的ip */ _proUploadUI.__getNosIP = function(){ var _options = { sync : false, type : 'json', data : {}, query : {'version':'1.0', 'bucketname':this.__bucket}, method : 'GET', timeout : 0, cookie : false, // 跨域请求是否带cookie，仅对CORS方式有效 mode : this.__config.mode, // 请求模式,针对跨域请求采用的请求方式 onload: function(_data){ if(!!_data){ // 目前只使用第一个ip，建议增加重试功能，如果当前ip上传失败，使用下一个ip this.__uploadIPs = _data.upload; this.__hasGetIPs = true; this.__startUploadByBlobs(); }else{ this.__errorHandler('上传失败！无法获得上传地址'); } }._$bind(this), onerror:this.__errorHandler._$bind(this, '上传失败！') }; this.__reqId = j._$request(uploadConst.NOS_GET_IP_URL, _options); } /** * 开始断点上传 */ _proUploadUI.__startUploadByBlobs = function(){ this.__blobUploadId = uploadUtil._$fileUploadByBlobs({ key : this.__blobUploadId, // 如果有key，说明是重试 ip : this.__uploadIPs[this.__posUploadIPIndex], // 目前只使用第一个ip，建议增加重试功能，如果当前ip上传失败，使用下一个ip file : this.__realUpload.files[0], fileName : this.__file, form : this.__uploadForm, mode : this.__config.mode, eduUploaderToken : this.__eduUploaderToken, xNosToken : this.__xNosToken, nosKey : this.__nosKey, bucket : this.__bucket, onuploading : this.__onUploading._$bind(this), onload : this.__onUploadComplete._$bind(this), onerror : this.__errorHandler._$bind(this) }); } /** * 重置ui * _options: * 配置: * parent * type * txt * verifyFile * * 事件回调: * onBeginUpload * onUpdateProgress * onFinishUpload * onUploadError */ _proUploadUI.__reset = function(_options){ this.__supReset(_options); // 配置 this.__config = ut._$merge({}, defaultConfig()); // 从默认配置拷贝 this.__config = ut._$merge(this.__config, _options || {}, function(val){ return val === undefined; }); // 如果是undefined就不覆盖 this.__txtNode.innerHTML = this.__config.txt; if(this.__config.btnClassName){ e._$addClassName(this.__showUpload, this.__config.btnClassName); } ////////////////////////// 上传相关数据 ///////////////////////// // 文件信息 this.__file = null; this.__fileSize = null; this.__fileGmtModifiedTime = null; // 请求凭证 this.__eduUploaderToken = ''; // 实际上传地址 this.__uploadIPs = [uploadConst.NOS_FORM_UPLOAD_URL]; this.__posUploadIPIndex = 0; // 当前使用第几个上传ip // 访问nos的token信息 this.__xNosToken = ''; // nos桶名 this.__bucket = ''; // 存储上传文件的object对象名 this.__nosKey = ''; // 请求id this.__reqId = null; // 断点续传id this.__blobUploadId = null; // 是否主动中断 this.__isAbort = false; // 是否禁用 this.__isDisable = false; // 是否已经获取的断点续传的ip地址 this.__hasGetIPs = false; // 允许多次选择同一个文件，因此每次都重置file域 this.__resetHtmlFileNode(); }; // 是否可以使用断点续传，只有视频和pdf支持 _proUploadUI.__isSupportAnchor = function(){ return uploadUtil._$canUseFileUploadByBlobs() &amp;&amp; (this.__config.type == uploadConst.UPLOAD_FILE_TYPE_VIDEO || this.__config.type == uploadConst.UPLOAD_FILE_TYPE_PDF); } /** * 销毁ui */ _proUploadUI.__destroy = function(){ this._$abort(); // 清除类 if(this.__config.btnClassName){ e._$delClassName(this.__showUpload, this.__config.btnClassName); } if(this.__config.btnDisableClassName){ e._$delClassName(this.__showUpload, this.__config.btnDisableClassName); } this.__supDestroy(); } // 返回结果可注入给其他文件 return p; }); × Search results Close "},"uploader_mutiFileUploader.js.html":{"id":"uploader_mutiFileUploader.js.html","title":"Source: uploader/mutiFileUploader.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: uploader/mutiFileUploader.js /** * ---------------------------------------------------------------- * 多文件同时上传 * @version 1.0 * @module pool/component-upload/src/uploader/mutiFileUploader * ---------------------------------------------------------------- */ NEJ.define([ 'text!./mutiFileUploader.html', 'lib/base/util', 'lib/base/klass', 'lib/base/element', 'lib/ui/base', 'lib/util/template/tpl', './constant.js', './util.js', './fileUploader.js' ],function( _template, _util, _k, _e, _ui, _t, _constant, _uploadUtil, _fileUploader, _p, _o, _f, _r){ var _g = window; // 样式 var _seed_css = _e._$pushCSSText('.u-mutiFileUpload{position:relative; display:inline-block;}'); /** * * uploadUtil * @class _$$MutiFileUploader * @extends _$$Abstract * @param {Object} _options 可选配置参数，已处理参数列表如下 * * @Event uploadComplete 上传完成回调 * @Event uploadError 上传错误，内容为错误信息 * @Event uploadStart 上传开始 * */ _p._$$MutiFileUploader = _k._$klass(); _pro = _p._$$MutiFileUploader._$extend(_ui._$$Abstract); /** * 初始化外观信息 * */ _pro.__initXGui = function() { this.__seed_html = _t._$addNodeTemplate(_template); }; /** * 初始化节点 * * @return {Void} */ _pro.__initNode = function() { this.__supInitNode(); }; /** * 重置 * _options: * 配置: * parent * type * txt * verifyFile * * 事件回调: * onBeginUpload * onUpdateProgress * onFinishUpload * onUploadError */ _pro.__reset = function(_options){ this.__supReset(_options); this.__uilist = []; this.__posUIcount = 0; this.__progressDataList = []; // 进度数据数组 this.__maxUploadCount = _options.maxUploadCount || 5; // 同时上传个数上限 this.__btnClassName = _options.btnClassName; this.__btnDisableClassName = _options.btnDisableClassName; this.__txt = _options.txt; this.__type = _options.type; this.__verifyFile = _options.verifyFile; // 回调 this.__optionOnBeginUpload = _options.onBeginUpload; this.__optionOnUpdateProgress = _options.onUpdateProgress; this.__optionOnFinishUpload = _options.onFinishUpload; this.__optionOnUploadError = _options.onUploadError; this.__optionOnMaxCount = _options.onMaxCount; // 超过个数限制的回调 this.__createOneUploadUI(); }; _pro.__createOneUploadUI = function(){ var _uiWrapNode = _e._$create('div', '', this.__body); var _ui = _fileUploader._$$UploadUI._$allocate({ parent : _uiWrapNode, btnClassName : this.__btnClassName, btnDisableClassName : this.__btnDisableClassName, type : this.__type, txt : this.__txt, verifyFile : this.__verifyFile, onBeginUpload : this.__onBeginUpload._$bind(this, this.__uilist.length), onUpdateProgress : this.__onUploadProgress._$bind(this, this.__uilist.length), onFinishUpload : this.__onFinishUpload._$bind(this, this.__uilist.length), onUploadError : this.__onUploadError._$bind(this, this.__uilist.length) }); // 考虑到ui重用，需要重置状态 _ui.wrapNode = _uiWrapNode; // 父节点引用 _ui.isUsing = false; _ui.progress = null; this.__uilist.push(_ui); this.__posUIcount++; // 限制上传的数量 if (this.__posUIcount &gt; this.__maxUploadCount) { // 禁用 _ui._$disable(true); // 抛出事件 this.__optionOnMaxCount &amp;&amp; this.__optionOnMaxCount(this.__maxUploadCount); return; }else{ _ui._$disable(false); } } // 是否能创建下一个 _pro.__canCreateNext = function(){ for (var i = this.__uilist.length - 1; i &gt;= 0; i--) { if(this.__uilist[i] &amp;&amp; !this.__uilist[i].isUsing){ // 检查是否有空闲的 return false; } }; return true; } // 更新全部进度数组 _pro.__genProgressDataList = function(){ this.__progressDataList = []; for (var i = 0; i &lt;= this.__uilist.length - 1; i++) { if(this.__uilist[i] &amp;&amp; this.__uilist[i].progress){ this.__progressDataList.push(this.__uilist[i].progress); } }; return this.__progressDataList; } _pro.__onBeginUpload = function(_index, _data){ if(this.__uilist[_index]){ this.__uilist[_index].isUsing = true; // 隐藏在使用的ui this.__uilist[_index].wrapNode.style.display = 'none'; this.__uilist[_index].progress = { index : _index, fileName : _data.name, beginTime : _data.curTime, progressData : null // 开始时没有进度 }; // 更新单个ui的上传进度 } if (this.__canCreateNext()) { this.__createOneUploadUI(); // 创建下一个 }; this.__optionOnBeginUpload &amp;&amp; this.__optionOnBeginUpload({ index : _index, data : _data, progressDataList : this.__genProgressDataList() }); } _pro.__onUploadProgress = function(_index, _data){ if(this.__uilist[_index] &amp;&amp; this.__uilist[_index].progress) this.__uilist[_index].progress.progressData = _data; // 更新单个ui的上传进度 this.__optionOnUpdateProgress &amp;&amp; this.__optionOnUpdateProgress({ index : _index, progressDataList : this.__genProgressDataList() }); } _pro.__onUploadError = function(_index, _data){ // 错误后销毁 this.__finishOne(_index); this.__optionOnUploadError &amp;&amp; this.__optionOnUploadError({ index : _index, data : _data, progressDataList : this.__genProgressDataList() }); } _pro.__onFinishUpload = function(_index, _data){ // 上传完成后销毁 this.__finishOne(_index); this.__optionOnFinishUpload &amp;&amp; this.__optionOnFinishUpload({ index : _index, data : _data, progressDataList : this.__genProgressDataList() }); } _pro._$abortUpload = function(_index){ this.__uilist[_index] &amp;&amp; this.__uilist[_index]._$abort(); // 取消也销毁 this.__finishOne(_index); // 发送一次进度 this.__optionOnUpdateProgress &amp;&amp; this.__optionOnUpdateProgress({ index : _index, progressDataList : this.__genProgressDataList() }); } // 销毁一个 _pro.__finishOne = function(_index){ // 销毁 if(this.__uilist[_index]){ _fileUploader._$$UploadUI._$recycle(this.__uilist[_index]); this.__uilist[_index] = null; this.__posUIcount--; } // 激活 if (this.__posUIcount &lt;= this.__maxUploadCount) { this.__uilist[this.__uilist.length - 1]._$disable(false); // 一般是最后一个 } } /** * 控件销毁 */ _pro.__destroy = function(){ // 销毁 if(this.__uilist){ var _uiwrap; for (var i = this.__uilist.length - 1; i &gt;= 0; i--) { if(this.__uilist[i]){ _uiwrap = this.__uilist[i].wrapNode; this.__uilist[i] = _fileUploader._$$UploadUI._$recycle(this.__uilist[i]); // 移除节点 if (_uiwrap) { _e._$remove(_uiwrap, false); }; } }; } this.__supDestroy(); } // 返回结果可注入给其他文件 return _p; }); × Search results Close "},"uploader_mutiFormUploader.js.html":{"id":"uploader_mutiFormUploader.js.html","title":"Source: uploader/mutiFormUploader.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: uploader/mutiFormUploader.js /** * ---------------------------------------------------------------- * 多文件同时上传（表单形式） * 这种方案不太好，只是创建了多个formUploader。建议在formUploader中直接实现多个同时上传。当然复杂度其实差不多 * @version 1.0 * @module pool/component-upload/src/uploader/mutiFormUploader * ---------------------------------------------------------------- */ NEJ.define([ 'text!./mutiFileUploader.html', 'lib/base/util', 'lib/base/klass', 'lib/base/element', 'lib/ui/base', 'lib/util/template/tpl', './constant.js', './util.js', './formUploader.js' ],function( _template, _util, _k, _e, _ui, _t, _constant, _uploadUtil, _formUploader, _p, _o, _f, _r){ var _g = window; // 样式 var _seed_css = _e._$pushCSSText('.u-mutiFormUpload{position:relative; display:inline-block;}'); /** * * uploadUtil * @class _$$MutiFileUploader * @extends _$$Abstract * @param {Object} _options 可选配置参数，已处理参数列表如下 * * @Event uploadComplete 上传完成回调 * @Event uploadError 上传错误，内容为错误信息 * @Event uploadStart 上传开始 * */ _p._$$MutiFileUploader = _k._$klass(); _pro = _p._$$MutiFileUploader._$extend(_ui._$$Abstract); /** * 初始化外观信息 * */ _pro.__initXGui = function() { this.__seed_html = _t._$addNodeTemplate(_template); }; /** * 初始化节点 * * @return {Void} */ _pro.__initNode = function() { this.__supInitNode(); }; /** * 重置 * _options: * 配置: * parent * type * txt * verifyFile * initUploadUrl * maxUploadCount * * 事件回调: * onBeginUpload * onUpdateProgress * onFinishUpload * onUploadError * onMaxCount */ _pro.__reset = function(_options){ this.__supReset(_options); this.__config = _options; this.__uilist = []; this.__posUIcount = 0; this.__progressDataList = []; // 进度数据数组 this.__maxUploadCount = _options.maxUploadCount || 5; // 同时上传个数上限 // 回调 this.__optionOnBeginUpload = _options.onBeginUpload; this.__optionOnUpdateProgress = _options.onUpdateProgress; this.__optionOnFinishUpload = _options.onFinishUpload; this.__optionOnUploadError = _options.onUploadError; this.__optionOnMaxCount = _options.onMaxCount; // 超过个数限制的回调 this.__createOneUploadUI(); }; _pro.__createOneUploadUI = function(){ var _uiWrapNode = _e._$create('div', '', this.__body); var _ui = _formUploader._$$FormUploadUI._$allocate({ parent : _uiWrapNode, btnClassName : this.__config.btnClassName, btnDisableClassName : this.__config.btnDisableClassName, type : this.__config.type, txt : this.__config.txt, verifyFile : this.__config.verifyFile, initUploadUrl : this.__config.initUploadUrl, onBeginUpload : this.__onBeginUpload._$bind(this, this.__uilist.length), onUpdateProgress : this.__onUploadProgress._$bind(this, this.__uilist.length), onFinishUpload : this.__onFinishUpload._$bind(this, this.__uilist.length), onUploadError : this.__onUploadError._$bind(this, this.__uilist.length) }); // 考虑到ui重用，需要重置状态 _ui.wrapNode = _uiWrapNode; // 父节点引用 _ui.isUsing = false; _ui.progress = null; this.__uilist.push(_ui); this.__posUIcount++; // 限制上传的数量 if (this.__posUIcount &gt; this.__maxUploadCount) { // 禁用 _ui._$disable(true); // 抛出事件 this.__optionOnMaxCount &amp;&amp; this.__optionOnMaxCount(this.__maxUploadCount); return; }else{ _ui._$disable(false); } } // 是否能创建下一个 _pro.__canCreateNext = function(){ for (var i = this.__uilist.length - 1; i &gt;= 0; i--) { if(this.__uilist[i] &amp;&amp; !this.__uilist[i].isUsing){ // 检查是否有空闲的 return false; } }; return true; } // 更新全部进度数组 _pro.__genProgressDataList = function(){ this.__progressDataList = []; for (var i = 0; i &lt;= this.__uilist.length - 1; i++) { if(this.__uilist[i] &amp;&amp; this.__uilist[i].progress){ this.__progressDataList.push(this.__uilist[i].progress); } }; return this.__progressDataList; } _pro.__onBeginUpload = function(_index, _data){ if(this.__uilist[_index]){ this.__uilist[_index].isUsing = true; // 隐藏在使用的ui this.__uilist[_index].wrapNode.style.display = 'none'; this.__uilist[_index].progress = { index : _index, fileName : _data.name, beginTime : _data.curTime, progressData : null // 开始时没有进度 }; // 更新单个ui的上传进度 } if (this.__canCreateNext()) { this.__createOneUploadUI(); // 创建下一个 }; this.__optionOnBeginUpload &amp;&amp; this.__optionOnBeginUpload({ index : _index, data : _data, progressDataList : this.__genProgressDataList() }); } _pro.__onUploadProgress = function(_index, _data){ if(this.__uilist[_index] &amp;&amp; this.__uilist[_index].progress) this.__uilist[_index].progress.progressData = _data; // 更新单个ui的上传进度 this.__optionOnUpdateProgress &amp;&amp; this.__optionOnUpdateProgress({ index : _index, progressDataList : this.__genProgressDataList() }); } _pro.__onUploadError = function(_index, _data){ // 错误后销毁 this.__finishOne(_index); this.__optionOnUploadError &amp;&amp; this.__optionOnUploadError({ index : _index, data : _data, progressDataList : this.__genProgressDataList() }); } _pro.__onFinishUpload = function(_index, _data){ // 上传完成后销毁 this.__finishOne(_index); this.__optionOnFinishUpload &amp;&amp; this.__optionOnFinishUpload({ index : _index, data : _data, progressDataList : this.__genProgressDataList() }); } _pro._$abortUpload = function(_index){ this.__uilist[_index] &amp;&amp; this.__uilist[_index]._$abort(); // 取消也销毁 this.__finishOne(_index); // 发送一次进度 this.__optionOnUpdateProgress &amp;&amp; this.__optionOnUpdateProgress({ index : _index, progressDataList : this.__genProgressDataList() }); } // 销毁一个 _pro.__finishOne = function(_index){ // 销毁 if(this.__uilist[_index]){ _formUploader._$$FormUploadUI._$recycle(this.__uilist[_index]); this.__uilist[_index] = null; this.__posUIcount--; } // 激活 if (this.__posUIcount &lt;= this.__maxUploadCount) { this.__uilist[this.__uilist.length - 1]._$disable(false); // 一般是最后一个 } } /** * 控件销毁 */ _pro.__destroy = function(){ // 销毁 if(this.__uilist){ var _uiwrap; for (var i = this.__uilist.length - 1; i &gt;= 0; i--) { if(this.__uilist[i]){ _uiwrap = this.__uilist[i].wrapNode; this.__uilist[i] = _formUploader._$$FormUploadUI._$recycle(this.__uilist[i]); // 移除节点 if (_uiwrap) { _e._$remove(_uiwrap, false); }; } }; } this.__supDestroy(); } // 返回结果可注入给其他文件 return _p; }); × Search results Close "},"custom_file_upload_ui.js.html":{"id":"custom_file_upload_ui.js.html","title":"Source: custom_file_upload/ui.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: custom_file_upload/ui.js /** * CustomFileUploadUI 组件带默认UI实现文件 * * @version 1.0 * @author hztianxiang &lt;hztianxiang@corp.netease.com&gt; * @module pool/component-upload/src/custom_file_upload/ui */ NEJ.define([ './component.js', 'text!./component.html', 'text!./component.css', 'pool/component-notify/src/notify/ui' ], function (CustomFileUpload, html, css, notifyUI) { /** * Upload UI组件 * * @class module:pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUI * @extends module:pool/component-upload/src/custom_file_upload/component.CustomFileUpload * * @param {Object} options * @param {Object} options.data 与视图关联的数据模型 */ return CustomFileUpload.extends({ name: 'ux-custom-file-upload', css: css, template: html, init: function () { this.data.parent = this.$refs.uploadbtnwrap; this.supr(); }, /** * 私有接口，上传错误回调 * @protected * @method module:pool/component-upload/src/custom_file_upload/component.CustomFileUpload#_onUploadError * @returns {void} */ _onUploadError:function(_data){ notifyUI.warning((_data.fileName ? ('文件: ' + _data.fileName) : '') +' 上传失败，请重试'); this.supr(); } }); }); × Search results Close "},"custom_file_upload_component.js.html":{"id":"custom_file_upload_component.js.html","title":"Source: custom_file_upload/component.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: custom_file_upload/component.js /** * ---------------------------------------------------------- * 上传文件组件（含进度条） * @version 1.0 * @author hzwujiazhen(hzwujiazhen@corp.netease.com) * * @module pool/component-upload/src/custom_file_upload/component * ---------------------------------------------------------- */ define([ 'pool/component-base/src/base', 'pool/component-base/src/util', '../uploader/constant.js', '../uploader/fileUploader.js', '../verifyFile.js', '../progress/upload_progress/ui.js' // 'rui/module/modal' ], function( Component, util, constant, fileUploader, verifyFile // _uploadProgressUI, // _modal ){ /** * 开始上传时触发 * * @event module:pool/component-upload/src/custom_file_upload/component.Upload#beginUpload * @param {object} data 上传相关属性 */ /** * 更新进度时触发 * * @event module:pool/component-upload/src/custom_file_upload/component.Upload#updateProgress * @param {object} data 上传相关属性 */ /** * 上传结束时触发 * * @event module:pool/component-upload/src/custom_file_upload/component.Upload#finishUpload * @param {object} data 上传相关属性 */ /** * 上传错误时触发 * * @event module:pool/component-upload/src/custom_file_upload/component.Upload#uploadError * @param {object} data 上传相关属性 */ var CustomFileUpload = Component.extends({ /** * 模板编译前用来初始化参数 * @protected * @method module:pool/component-upload/src/custom_file_upload/component.CustomFileUpload#config * @param {HTMLElement } [data.parent=null] - 容器节点，上传组件注入的DOM节点 * @param {string} [data.uploadbtnwrapTemplate=''] - 上传模板，如果有，需要需要包含ref=uploadbtnwrap的节点 * @param {string} [data.fileName=''] - 文件名 * @param {string} [data.beginTime=''] - 上传时间 * @param {boolean} [data.showProcess=false] - 是否显示进度条 * @param {object} [data.progressData=null] - 进度条数据 * @param {number} [data.type=6] - 文件类型 * @param {string} [data.btnTxt='上传文件'] - 按钮文字 * @param {string } [data.btnClassName='u-btn'] - 上传按钮样式 * @param {string } [data.btnDisableClassName='u-btn-disabled'] - 上传按钮禁用样式 * @returns {void} */ config : function () { // FIXME 设置组件配置信息的默认值 // util.extend(this, { // type: constant.UPLOAD_FILE_TYPE_VIDEO, // fileUploaderUI: null // }); // FIXME 设置组件视图模型的默认值 util.extend(this.data, { parent: null, type: constant.UPLOAD_FILE_TYPE_VIDEO, uploadbtnwrapTemplate: '', // 如果提供则使用，, fileName : '', beginTime : 0, showProcess: false, progressData : null, btnTxt: '上传文件', btnClassName : 'u-btn', btnDisableClassName : 'u-btn-disabled' }); this.supr(); }, /** * 模板编译之后(即活动dom已经产生)处理逻辑，可以在这里处理一些与dom相关的逻辑 * * @protected * @method module:pool/component-upload/src/custom_file_upload/component.CustomFileUpload#config * @returns {void} */ init : function(){ if (this.data.parent) { this._fileUploaderUI = fileUploader._$$UploadUI._$allocate({ parent : this.data.parent, btnClassName : this.data.btnClassName, btnDisableClassName : this.data.btnDisableClassName, txt : this.data.btnTxt, type : this.data.type, verifyFile : verifyFile._$bind({type:this.data.type}), onBeginUpload:this._onBeginUpload._$bind(this), onUpdateProgress:this._onUpdateProgress._$bind(this), onFinishUpload:this._onFinishUpload._$bind(this), onUploadError:this._onUploadError._$bind(this) }); } this.supr(); }, /** * 设置是否禁用组件 * * @method module:pool/component-upload/src/custom_file_upload/component.CustomFileUpload#setDisable * @returns {void} */ setDisable : function(_disable){ if (this._fileUploaderUI) { this._fileUploaderUI._$disable(_disable); } }, /** * 停止上传被触发 * * @method module:pool/component-upload/src/custom_file_upload/component.CustomFileUpload#abortUpload * @returns {void} */ abortUpload : function(){ this._fileUploaderUI &amp;&amp; this._fileUploaderUI._$abort(); this.data.showProcess = false; this.data.fileName = ''; this.data.progressData = null; this.$update(); this.$emit('abortUpload'); }, /** * 组件销毁策略，如果有使用第三方组件务必在此先销毁第三方组件再销毁自己 * * @protected * @method module:pool/component-upload/src/custom_file_upload/component.CustomFileUpload#destory * @returns {void} */ destroy : function(){ if (this._fileUploaderUI) { this._fileUploaderUI = fileUploader._$$UploadUI._$recycle(this._fileUploaderUI); } this.supr(); }, /** * 私有接口，上传开始回调 * @private * @method module:pool/component-upload/src/custom_file_upload/component.CustomFileUpload#setDisable * @returns {void} */ _onBeginUpload:function(_data){ this.data.showProcess = true; this.data.fileName = _data.name; this.data.beginTime = _data.curTime; // 开始上传的时刻 this.$update(); this.$emit('beginUpload',_data); }, /** * 私有接口，更新进度回调 * @private * @method module:pool/component-upload/src/custom_file_upload/component.CustomFileUpload#_onUpdateProgress * @returns {void} */ _onUpdateProgress:function(_data){ this.data.progressData = _data; this.$update(); this.$emit('updateProgress', _data); }, /** * 私有接口，上传结束回调 * @private * @method module:pool/component-upload/src/custom_file_upload/component.CustomFileUpload#_onFinishUpload * @returns {void} */ _onFinishUpload:function(_data){ this.data.showProcess = false; this.$update(); this.$emit('finishUpload', _data); }, /** * 私有接口，上传错误回调 * @private * @method module:pool/component-upload/src/custom_file_upload/component.CustomFileUpload#_onUploadError * @returns {void} */ _onUploadError:function(_data){ this.data.showProcess = false; this.$update(); // 提示 // _notify.warning((_data.fileName ? ('文件: ' + _data.data.fileName) : '') +' 上传失败，请重试'); // _modal.alert((_data.fileName ? ('文件: ' + _data.fileName) : '') +' 上传失败，请重试'); this.$emit('onUploadError', _data); } }); return CustomFileUpload; }); × Search results Close "},"muti_file_upload_component.js.html":{"id":"muti_file_upload_component.js.html","title":"Source: muti_file_upload/component.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: muti_file_upload/component.js /** * ---------------------------------------------------------- * 多文件组件 * @version 1.0 * @author hzwujiazhen(hzwujiazhen@corp.netease.com) * * @module pool/component-upload/src/muti-file-upload/component * ---------------------------------------------------------- */ define([ 'pool/component-base/src/base', 'pool/component-base/src/util', '../uploader/constant.js', '../verifyFile.js', '../uploader/mutiFileUploader.js', '../progress/upload_progress/ui.js' // 'rui/module/notify', // 'rui/module/modal' ], function( Component, util, constant, verifyFile, mutiFileUploader // _uploadProgressUI, // _notify, // _modal ){ /** * 开始上传时触发 * * @event module:pool/component-upload/src/muti_file_upload/component.Upload#beginUpload * @param {object} data 上传相关属性 */ /** * 更新进度时触发 * * @event module:pool/component-upload/src/muti_file_upload/component.Upload#updateProgress * @param {object} data 上传相关属性 */ /** * 上传结束时触发 * * @event module:pool/component-upload/src/muti_file_upload/component.Upload#finishUpload * @param {object} data 上传相关属性 */ /** * 上传错误时触发 * * @event module:pool/component-upload/src/muti_file_upload/component.Upload#uploadError * @param {object} data 上传相关属性 */ /** * 超过最大数量出发 * * @event module:pool/component-upload/src/muti_file_upload/component.Upload#maxCount * @param {object} maxCount 最大数量 */ var MutiFileUpload = Component.extends({ /** * 模板编译前用来初始化参数 * @protected * @method module:pool/component-upload/src/muti_file_upload/component.MutiFileUpload#config * @param {HTMLElement} [data.parent=null] - 容器节点，上传组件注入的DOM节点 * @param {number} [data.type=6] - 文件类型 * @param {string} [data.btnTxt='多文件上传'] - 按钮文字 * @param {string} [data.btnClassName='u-btn'] - 上传按钮样式 * @param {string} [data.btnDisableClassName='u-btn-disabled'] - 上传按钮禁用样式 * @param {array} [data.progressList=null] - 所有上传的进度数据 * @returns {void} */ config : function () { util.extend(this.data, { parent: null, type : constant.UPLOAD_FILE_TYPE_VIDEO, // 默认 btnTxt: '多文件上传', btnClassName: 'u-btn', btnDisableClassName: 'u-btn-disabled', progressList : null }); this.supr(); }, /** * 模板编译之后(即活动dom已经产生)处理逻辑，可以在这里处理一些与dom相关的逻辑 * * @protected * @method module:pool/component-upload/src/muti_file_upload/component.MutiFileUpload#init * @returns {void} */ init : function(){ if (this.data.parent) { this._mutiFileUploaderUI = mutiFileUploader._$$MutiFileUploader._$allocate({ parent : this.data.parent, // maxUploadCount : 5, btnClassName : 'u-btn ' + (this.data.btnClassName || ''), btnDisableClassName : 'u-btn-disabled', txt : this.data.btnTxt, type : this.data.type, verifyFile : verifyFile._$bind({type:this.data.type}), onBeginUpload:this._onBeginUpload._$bind(this), onUpdateProgress:this._onUpdateProgress._$bind(this), onFinishUpload:this._onFinishUpload._$bind(this), onUploadError:this._onUploadError._$bind(this), onMaxCount:this._onMaxCount._$bind(this) }); } this.supr(); }, /** * 停止上传 * * @method module:pool/component-upload/src/muti_file_upload/component.MutiFileUpload#abortUpload * @returns {void} */ abortUpload:function(_index){ this._mutiFileUploaderUI._$abortUpload(_index); this.$emit('abortUpload', { index : _index }); }, /** * 组件销毁策略，如果有使用第三方组件务必在此先销毁第三方组件再销毁自己 * * @protected * @method module:pool/component-upload/src/muti_file_upload/component.MutiFileUpload#destroy * @returns {void} */ destroy : function(){ if (this._mutiFileUploaderUI) { this._mutiFileUploaderUI = mutiFileUploader._$$MutiFileUploader._$recycle(this._mutiFileUploaderUI); }; this.supr(); }, /** * 私有接口，上传文件超过最大数量 * @private * @method module:pool/component-upload/src/muti_file_upload/component.MutiFileUpload#_onMaxCount * @returns {void} */ _onMaxCount:function(_maxCount){ // TODO 提示 this.$emit('maxCount', _maxCount); }, /** * 私有接口，上传开始回调 * @private * @method module:pool/component-upload/src/muti_file_upload/component.MutiFileUpload#_onBeginUpload * @returns {void} */ _onBeginUpload:function(_data){ this.data.progressList = _data.progressDataList; this.$update(); this.$emit('beginUpload', _data); }, /** * 私有接口，更新进度回调 * @private * @method module:pool/component-upload/src/muti_file_upload/component.MutiFileUpload#_onUpdateProgress * @returns {void} */ _onUpdateProgress:function(_data){ this.data.progressList = _data.progressDataList; this.$update(); this.$emit('updateProgress', _data); }, /** * 私有接口，上传错误回调 * @private * @method module:pool/component-upload/src/muti_file_upload/component.MutiFileUpload#_onUploadError * @returns {void} */ _onUploadError:function(_data){ this.data.progressList = _data.progressDataList; this.$update(); // _modal.alert((_data.data.fileName ? ('文件: ' + _data.data.fileName) : '') +' 上传失败，请重试'); this.$emit('onUploadError', _data); }, /** * 私有接口，结束回调 * @private * @method module:pool/component-upload/src/muti_file_upload/component.MutiFileUpload#_onFinishUpload * @returns {void} */ _onFinishUpload:function(_data){ this.data.progressList = _data.progressDataList; this.$update(); this.$emit('finishUpload', _data); } }); return MutiFileUpload; }); × Search results Close "},"muti_file_upload_ui.js.html":{"id":"muti_file_upload_ui.js.html","title":"Source: muti_file_upload/ui.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: muti_file_upload/ui.js /** * CustomFileUploadUI 组件带默认UI实现文件 * * @version 1.0 * @author hztianxiang &lt;hztianxiang@corp.netease.com&gt; * @module pool/component-upload/src/muti_file_upload/ui */ NEJ.define([ './component.js', 'text!./component.html', 'text!./component.css', 'pool/component-notify/src/notify/ui' ], function (MutiFileUpload, html, css, notifyUI) { /** * Upload UI组件 * * @class module:pool/component-upload/src/muti_file_upload/ui.MutiFileUploadUI * @extends module:pool/component-upload/src/muti_file_upload/component.MutiFileUpload * * @param {Object} options * @param {Object} options.data 与视图关联的数据模型 */ return MutiFileUpload.extends({ name: 'ux-muti-file-upload', css: css, template: html, init: function () { this.data.parent = this.$refs.uploadbtnwrap; this.supr(); }, /** * 私有接口，上传文件超过最大数量 * @protected * @method module:pool/component-upload/src/muti_file_upload/ui.MutiFileUploadUI#_onMaxCount * @returns {void} */ _onMaxCount: function (_maxCount) { notifyUI.info('允许同时上传' + _maxCount + '个文件，已达到上限'); this.supr(); }, /** * 私有接口，上传错误回调 * @private * @method module:pool/component-upload/src/muti_file_upload/ui.MutiFileUploadUI#_onUploadError * @returns {void} */ _onUploadError:function(_data){ notifyUI.warning((_data.data.fileName ? ('文件: ' + _data.fileName) : '') +' 上传失败，请重试'); this.supr(); }, }); }); × Search results Close "},"progress_upload_percent_modal_ui.js.html":{"id":"progress_upload_percent_modal_ui.js.html","title":"Source: progress/upload_percent_modal/ui.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: progress/upload_percent_modal/ui.js /** * CustomFileUploadUI 组件带默认UI实现文件 * * @version 1.0 * @author hztianxiang &lt;hztianxiang@corp.netease.com&gt; * @module pool/component-upload/src/progress/upload_percent_modal/ui */ NEJ.define([ './component.js', 'text!./component.html', 'text!./componentcss' ], function (UploadPercentModal, html, css) { /** * Upload UI组件 * * @class module:pool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUI * @extends module:pool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModal * * @param {Object} options * @param {Object} options.data 与视图关联的数据模型 */ return UploadPercentModal.extends({ name: 'ux-upload-percent-modal', css: css, template: html }); }); × Search results Close "},"progress_upload_progress_component.js.html":{"id":"progress_upload_progress_component.js.html","title":"Source: progress/upload_progress/component.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: progress/upload_progress/component.js /** * ---------------------------------------------------------- * 上传进度条组件 * @version 1.0 * @author hzwujiazhen(hzwujiazhen@corp.netease.com) * * @module pool/component-upload/src/progress/upload_progress/component * ---------------------------------------------------------- */ define([ 'pool/component-base/src/base', 'pool/component-base/src/util', 'eutil/numUtil', 'eutil/timeUtil' ], function( Component, util, numUtil, timeUtil ){ var UploadProgressUI = Component.extends({ /** * 模板编译前用来初始化参数 * @protected * @method module:pool/component-upload/src/progress/upload_progress/component.UploadProgress#config * @param {string} [data.fileName=''] - 文件名 * @param {boolean} [data.supportProgress=false] - 是否显示进度条 * @param {number} [data.beginTime=0] - 上传时间 * @param {object} [data.progressData=null] - 上传数据 * @returns {void} */ config : function () { util.extend(this.data, { fileName : '', supportProgress : false, beginTime : 0, progressData : null // 进度信息 }); if (&quot;withCredentials&quot; in new XMLHttpRequest) {//支持xhr跨域的浏览器 this.data.supportProgress = true; } this.$watch('progressData', this._onProgressDataChange._$bind(this)); }, /** * 当进度条数据回调 * * @protected * @method module:pool/component-upload/src/progress/upload_progress/component.UploadProgress#_onProgressDataChange * @returns {void} */ _onProgressDataChange : function(newValue, oldValue){ if (newValue) { var _beginTime = newValue.beginTime || this.data.beginTime; this.data.total = numUtil._$formatFileSize(newValue.total); // 已用时 this.data.costTime = this.formatTime(newValue.timeStamp - _beginTime); // 全部已经上传的大小 this.data.loadMb = numUtil._$formatFileSize(newValue.loaded); // 速度 this.data.speed = (newValue.loaded - newValue.initOffset) / ((newValue.timeStamp - _beginTime)/1000); this.data.speedStr = numUtil._$formatFileSize(this.data.speed); // 剩余时间 this.data.remainTime = timeUtil._$Millisec2Str(Math.ceil( (newValue.total - newValue.loaded)/(this.data.speed &gt; 0 ? this.data.speed : 1) )); // 进度百分比 this.data.finishPercent = (newValue.loaded / newValue.total)*100; // 进度数字 this.data.finishInt = Math.ceil(this.data.finishPercent); this.$update(); } }, /** * 时间格式化 * * @protected * @method module:pool/component-upload/src/progress/upload_progress/component.UploadProgress#formatTime * @returns {void} */ formatTime : function(_time){ if(!!_time &amp;&amp; _time &gt; 0){ return Math.ceil(_time/1000) &gt; 0 ? Math.ceil(_time/1000) : 1; }else{ return 1; } }, /** * 触发停止上传回调 * * @protected * @method module:pool/component-upload/src/progress/upload_progress/component.UploadProgress#onClickAbort * @returns {void} */ onClickAbort:function(){ this.$emit('abortUpload'); } }); return UploadProgressUI; }); × Search results Close "},"progress_upload_progress_ui.js.html":{"id":"progress_upload_progress_ui.js.html","title":"Source: progress/upload_progress/ui.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: progress/upload_progress/ui.js /** * CustomFileUploadUI 组件带默认UI实现文件 * * @version 1.0 * @author hztianxiang &lt;hztianxiang@corp.netease.com&gt; * @module pool/component-upload/src/progress/upload_progress/ui */ NEJ.define([ './component.js', 'text!./component.html', 'text!./component.css' ], function (UploadProgress, html, css) { /** * Upload UI组件 * * @class module:pool/component-upload/src/progress/upload_progress/ui.uploadProgressUI * @extends module:pool/component-upload/src/progress/upload_progress/component.UploadProgress * * @param {Object} options * @param {Object} options.data 与视图关联的数据模型 */ return UploadProgress.extends({ name: 'ux-upload-progress', css: css, template: html }); }); × Search results Close "},"simple_img_upload_ui.js.html":{"id":"simple_img_upload_ui.js.html","title":"Source: simple_img_upload/ui.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: simple_img_upload/ui.js /** * 图片上传组件 组件带默认UI实现文件 * * @version 1.0 * @author hztianxiang &lt;hztianxiang@corp.netease.com&gt; * @module pool/component-upload/src/simple-img-upload/ui */ NEJ.define([ './component.js', 'text!./component.html', 'text!./component.css', 'pool/component-notify/src/notify/ui' ], function (SimpleImgUpload, html, css, notifyUI) { /** * Upload UI组件 * * @class module:pool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUI * @extends module:pool/component-upload/src/simple-img-upload/component.SimpleImgUploadUI * * @param {Object} options * @param {Object} options.data 与视图关联的数据模型 */ return SimpleImgUpload.extends({ name: 'ux-simple-img-upload', css: css, template: html, init: function () { this.data.parent = this.$refs.uploadbtnwrap; this.supr(); }, /** * 私有接口，上传错误回调 * @protected * @method module:pool/component-upload/src/simple_img_upload/ui.SimpleImgUploadUI#_onUploadError * @returns {void} */ _onUploadError: function (_err) { notifyUI.warning(_err.errMsg); this.supr(); } }); }); × Search results Close "},"simple_img_upload_component.js.html":{"id":"simple_img_upload_component.js.html","title":"Source: simple_img_upload/component.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: simple_img_upload/component.js /** * ---------------------------------------------------------- * 简单图片文件组件 * @version 1.0 * @author hzwujiazhen(hzwujiazhen@corp.netease.com) * * @module pool/component-upload/src/simple_img_upload/component * ---------------------------------------------------------- */ define([ 'pool/component-base/src/base', 'pool/component-base/src/util', 'pool/component-upload/src/uploader/constant', 'pool/component-upload/src/uploader/fileUploader', 'pool/component-upload/src/verifyFile' ], function( Component, util, constant, fileUploader, verifyFile ){ /** * 开始上传时触发 * * @event module:pool/component-upload/src/simple_img_upload/component.Upload#beginUpload * @param {object} data 上传相关属性 */ /** * 更新进度时触发 * * @event module:pool/component-upload/src/simple_img_upload/component.Upload#updateProgress * @param {object} data 上传相关属性 */ /** * 上传结束时触发 * * @event module:pool/component-upload/src/simple_img_upload/component.Upload#finishUpload * @param {object} data 上传相关属性 */ /** * 上传错误时触发 * * @event module:pool/component-upload/src/simple_img_upload/component.Upload#uploadError * @param {object} data 上传相关属性 */ var SimpleImgUpload = Component.extends({ /** * 模板编译前用来初始化参数 * @protected * @method module:pool/component-upload/src/simple_img_upload/component.SimpleImgUpload#config * @param {HTMLElement} [data.parent=null] - 容器节点，上传组件注入的DOM节点 * @param {string} [data.btnTxt='图片上传'] - 按钮文字 * @param {string} [data.btnClassName='u-btn'] - 上传按钮样式 * @param {string} [data.btnDisableClassName='u-btn-disabled'] - 上传按钮禁用样式 * @param {number} [data.boxWidth=100] - 图片显示宽度 * @param {number} [data.boxHeight=100] - 图片显示高度 * @param {number} [data.height=0] - 图片实际压缩高度, 不传的话显示原始尺寸 * @param {number} [data.width=0] - 图片实际压缩宽度, 不传的话显示原始尺寸 * @returns {void} */ config : function () { // FIXME 设置组件配置信息的默认值 util.extend(this, { $constant: { 'UNDO': 0, 'UPLOADING': 3, 'DONE': 4 } }); util.extend(this.data, { parent: null, btnClassName: 'u-btn', btnTxt: '图片上传', btnDisableClassName: 'u-btn-disable', boxWidth: 100, boxHeight: 100, height: 0, width: 0 }); this.data.status = this.data.imgSrc?this.$constant.DONE:this.$constant.UNDO; this.$watch(&quot;imgSrc&quot;,function(){ this.data.status = this.data.imgSrc?this.$constant.DONE:this.$constant.UNDO; }); }, /** * 模板编译之后(即活动dom已经产生)处理逻辑，可以在这里处理一些与dom相关的逻辑 * * @protected * @method module:pool/component-upload/src/simple_img_upload/component.SimpleImgUpload#init * @returns {void} */ init : function(){ if(this.data.parent){ this._imgUploaderUI = fileUploader._$$UploadUI._$allocate({ parent : this.data.parent, type : constant.UPLOAD_FILE_TYPE_IMAGE, btnClassName : this.data.btnClassName , btnDisableClassName : this.data.btnDisableClassName, btnTxt : this.data.btnTxt || '', verifyFile : verifyFile._$bind({type:constant.UPLOAD_FILE_TYPE_IMAGE}), onFinishUpload: this._onFinishUpload._$bind(this), onBeginUpload: this._onBeginUpload._$bind(this), onUploadError: this._onUploadError._$bind(this) }); } this.supr(); }, /** * 组件销毁策略，如果有使用第三方组件务必在此先销毁第三方组件再销毁自己 * * @protected * @method module:pool/component-upload/src/simple_img_upload/component.SimpleImgUpload#destroy * @returns {void} */ destroy : function(){ if (this._imgUploaderUI) { this._imgUploaderUI = fileUploader._$$UploadUI._$recycle(this._imgUploaderUI); } this.supr(); }, /** * 私有接口，上传开始回调 * @private * @method module:pool/component-upload/src/simple_img_upload/component.SimpleImgUpload#_onBeginUpload * @returns {void} */ _onBeginUpload:function(_data){ // 建议用全局的loading this.data.status = this.$constant.UPLOADING; this.$update(); this.$emit('beginUpload',_data); }, /** * 私有接口，上传结束回调 * @private * @method module:pool/component-upload/src/simple_img_upload/component.SimpleImgUpload#_onFinishUpload * @returns {void} */ _onFinishUpload:function(_data){ // 建议用全局的loading this.data.status = this.$constant.DONE; this.data.imgSrc = constant.NOS_FORM_UPLOAD_URL+&quot;/&quot;+[_data.bucket, _data.nosKey].join('/'); this.data.imgSrc = this.data.imgSrc + '?imageView&amp;quality=100'; if(this.data.height &amp;&amp; this.data.width){ // thumbnail 指定缩略图片的宽和高，有以下几种格式： // WidthxHeight：普通缩略（内缩略） // Widthx0：限定宽度，高度自适应（内缩略） // 0xHeight：限定高度，宽度自适应（内缩略） // WidthyHeight：裁剪缩略 // WidthzHeight：普通大边缩略（外缩略） this.data.imgSrc = this.data.imgSrc + '&amp;thumbnail='+this.data.width+'y'+this.data.height; } this.$update(); // 直接抛出图片地址 this.$emit('finishUpload', this.data.imgSrc); }, /** * 私有接口，上传错误回调 * @private * @method module:pool/component-upload/src/simple_img_upload/component.SimpleImgUpload#_onUploadError * @returns {void} */ _onUploadError:function(_err){ // 建议用全局的loading this.data.status = this.$constant.UNDO; this.$update(); this.$emit('_onUploadError', _err); } }); return SimpleImgUpload; }); × Search results Close "},"upload_ui.js.html":{"id":"upload_ui.js.html","title":"Source: upload/ui.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: upload/ui.js /** * UploadUI 组件带默认UI实现文件 * * @version 1.0 * @author hztianxiang &lt;hztianxiang@corp.netease.com&gt; * @module pool/component-upload/src/upload/ui */ NEJ.define([ './component.js', 'text!./component.html', 'text!./component.css', 'pool/component-notify/src/notify/ui' ], function (Upload, html, css, notifyUI) { /** * Upload UI组件 * * @class module:pool/component-upload/src/ui.UploadUI * @extends module:pool/component-upload/src/upload.Upload * * @param {Object} options * @param {Object} options.data 与视图关联的数据模型 */ return Upload.extends({ name: 'ux-upload', css: css, template: html, init: function () { this.data.parent = this.$refs.uploadbtnwrap; this.supr(); }, /** * 私有接口，上传失败回调 * @protected * @method module:pool/component-upload/src/ui.UploadUI#_onUploadError * @returns {void} */ _onUploadError:function(_data){ // _loading.hide(); // this.$update(); notifyUI.warning('上传失败'); this.supr(); } }); }); × Search results Close "},"upload_component.js.html":{"id":"upload_component.js.html","title":"Source: upload/component.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: upload/component.js /** * Upload 组件实现文件 * * @version 1.0 * @author hztianxiang &lt;hztianxiang@corp.netease.com&gt; * @module pool/component-upload/src/upload/component * */ NEJ.define([ 'pool/component-base/src/base', 'pool/component-base/src/util', '../uploader/constant.js', '../uploader/fileUploader.js', '../verifyFile.js' ],function( Component, util, constant, fileUploader, verifyFile ){ /** * Upload 组件 * * @class module:pool/component-upload/src/upload/upload.Upload * @extends module:pool/component-base/src/base.Base * @param {Object} options - 组件构造参数 * @param {Object} options.data - 与视图关联的数据模型 */ /** * 开始上传时触发 * * @event module:pool/component-upload/src/upload/upload.Upload#beginUpload * @param {object} data 上传相关属性 */ /** * 更新进度时触发 * * @event module:pool/component-upload/src/upload/upload.Upload#updateProgress * @param {object} data 上传相关属性 */ /** * 上传结束时触发 * * @event module:pool/component-upload/src/upload/upload.Upload#finishUpload * @param {object} data 上传相关属性 */ /** * 上传错误时触发 * * @event module:pool/component-upload/src/upload/upload.Upload#uploadError * @param {object} data 上传相关属性 */ var Upload = Component.extends({ /** * 模板编译前用来初始化参数 * @protected * @method module:pool/component-upload/src/upload/upload.Upload#config * @param {HTMLElement } [data.parent=null] - 容器节点，上传组件注入的DOM节点 * @param {number} [data.type=6] - 文件类型 * @param {string} [data.btnTxt='上传文件'] - 按钮文字 * @param {string } [data.btnClassName='u-btn'] - 上传按钮样式 * @param {string } [data.btnDisableClassName='u-btn-disabled'] - 上传按钮禁用样式 * @returns {void} */ config: function () { // FIXME 设置组件配置信息的默认值 // util.extend(this, { // }); // FIXME 设置组件视图模型的默认值 util.extend(this.data, { parent: null, type: constant.UPLOAD_FILE_TYPE_VIDEO, btnTxt: '上传文件', btnClassName : 'u-btn', btnDisableClassName : 'u-btn-disabled' }); this.supr(); }, /** * 模板编译之后(即活动dom已经产生)处理逻辑，可以在这里处理一些与dom相关的逻辑 * * @protected * @method module:pool/component-upload/src/upload/component.Upload#init * @returns {void} */ init: function () { if(!!this.data.parent){ this._fileUploaderUI = fileUploader._$$UploadUI._$allocate({ parent : this.data.parent, btnClassName : this.data.btnClassName|| '', txt : this.data.btnTxt, type : this.data.type, verifyFile : verifyFile._$bind({type:this.data.type}), onBeginUpload:this._onBeginUpload._$bind(this), onUpdateProgress:this._onUpdateProgress._$bind(this), onFinishUpload:this._onFinishUpload._$bind(this), onUploadError:this._onUploadError._$bind(this) }); } this.supr(); }, /** * 组件销毁策略，如果有使用第三方组件务必在此先销毁第三方组件再销毁自己 * * @protected * @method module:pool/component-upload/src/upload/component.Upload#destroy * @returns {void} */ destroy: function () { // TODO if (this._fileUploaderUI) { this._fileUploaderUI = fileUploader._$$UploadUI._$recycle(this._fileUploaderUI); } this.supr(); }, /** * 私有接口，上传开始回调 * @private * @method module:pool/component-upload/src/upload/component.Upload#_onBeginUpload * @returns {void} */ _onBeginUpload:function(_data){ // 建议用全局的loading // _loading.show(); // this.$update(); this.$emit('beginUpload',_data); }, /** * 私有接口，更新进度回调 * @private * @method module:pool/component-upload/src/upload/component.Upload#_onUpdateProgress * @returns {void} */ _onUpdateProgress:function(_data){ //TODO 提示 _loading.show(); this.$emit('updateProgress', _data); }, /** * 私有接口，上传成功回调 * @private * @method module:pool/component-upload/src/upload/component.Upload#_onFinishUpload * @returns {void} */ _onFinishUpload:function(_data){ // 建议用全局的loading // _loading.hide(); // this.$update(); this.$emit('finishUpload', _data); }, /** * 私有接口，上传失败回调 * @private * @method module:pool/component-upload/src/upload/component.Upload#_onUploadError * @returns {void} */ _onUploadError:function(_data){ // _loading.hide(); // this.$update(); this.$emit('uploadError', _data); } }); return Upload; }); × Search results Close "},"progress_upload_percent_modal_component.js.html":{"id":"progress_upload_percent_modal_component.js.html","title":"Source: progress/upload_percent_modal/component.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: progress/upload_percent_modal/component.js /** * ---------------------------------------------------------- * 上传进度条组件 * @version 1.0 * @author hzchenqinhui(hzchenqinhui@corp.netease.com) * * @module pool/component-upload/src/progress/upload_percent_modal/component * ---------------------------------------------------------- */ define([ // 'text!./component.html', // 'rui/module/modal' ], function( // _template, // _modal ){ // var UploadPercentModal = _modal.extend({ // name : 'upload_percent_modal', // template : _template // }).filter({ // toPercent: function(finished, total){ // if(finished &gt; total){ // finished = total; // } // return ((finished /total)*100).toFixed(this.data.decimalNum || 0) + &quot;%&quot;; // } // }); // // return upload_percent_modal; }); × Search results Close "},"uploader_constant.js.html":{"id":"uploader_constant.js.html","title":"Source: uploader/constant.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: uploader/constant.js /** * ---------------------------------------------------------------- * 文件上传常量，不可做完配置更改 * @version 1.0 * @author hzlinannan(hzlinannan@corp.netease.com) * @module pool/component-upload/src/uploader/constant * ---------------------------------------------------------------- */ NEJ.define([], function(){ window.swfUrlMap = window.swfUrlMap || {}; return { // 上传swf文件地址 imgUploaderSwfLocalPath : '../res/swf/imageUpload.swf', imgUploaderSwfRemoteUrl : window.swfUrlMap.imageUpload, customImgUploaderSwfLocalPath : '../res/swf/DragCutUpload_study2.swf', customImgUploaderSwfRemoteUrl : window.swfUrlMap.DragCutUpload_study2, flashUploaderSwfLocalPath : '../res/swf/EduFileBlobUpload.swf', flashUploaderSwfRemoteUrl : window.swfUrlMap.EduFileBlobUpload, // 文件上传相关 'NOS_FORM_UPLOAD_URL' : 'http://nos.netease.com', // nos web post上传的域名 'NOS_GET_IP_URL' : 'http://wanproxy.127.net/lbs', // nos获取上传ip的接口 'DEFAULT_INIT_UPLOAD_URL' : '/j/coursedesign/TermManager/getEduUploaderToken.json', // 默认的应用认证接口 'EXCHANGE_NOSTOKEN_URL' : 'http://up.study.163.com/j/uploader-server/UploaderCenterManager/exchangeNosTokenByEduToken.do', // 交换获得nos上传的桶和key 'GET_UPLOAD_PROGRESS_URL' : 'http://up.study.163.com/j/uploader-server/UploaderCenterManager/getContext.do', // 获取断点续传信息 'SAVE_UPLOAD_PROGRESS_URL' : 'http://up.study.163.com/j/uploader-server/UploaderCenterManager/saveContext.do', // 设置断点续传信息 'BLOBSIZE' : 100 * 1024, // 文件分块大小，100k // 建议的文件大小限制 'UPLOAD_SIZE_MAX_PDF' : 50*1024*1024, // 50M 'UPLOAD_SIZE_MAX_VIDEO' : 3*1024*1024*1024, // 如果支持断点续传，视频最大为3G 'UPLOAD_SIZE_IE_MAX_VIDEO' : 100*1024*1024, // 如果不支持断点续传则视频最大为100M 'UPLOAD_SIZE_MAX_ATTACH' : 50*1024*1024, // 50M 'UPLOAD_SIZE_MAX_CAPTION' : 5*1024*1024, // 5M 'UPLOAD_SIZE_MAX_IMAGE' : 20*1024*1024, // 20M // 上传文件类型 'UPLOAD_FILE_TYPE_PDF' : 1, 'UPLOAD_FILE_TYPE_VIDEO' : 2, 'UPLOAD_FILE_TYPE_ATTACH' : 3, 'UPLOAD_FILE_TYPE_CAPTION' : 4, 'UPLOAD_FILE_TYPE_IMAGE' : 5, 'UPLOAD_FILE_TYPE_EXCEL' : 6 // 其他的都是6 } }); × Search results Close "},"uploader_customImgUploader.js.html":{"id":"uploader_customImgUploader.js.html","title":"Source: uploader/customImgUploader.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: uploader/customImgUploader.js /** * ---------------------------------------------------------------- * 可以截取图片的上传组件 * @version 1.0 * @module pool/component-upload/src/uploader/customImgUploader * ---------------------------------------------------------------- */ NEJ.define([ 'text!./customImgUploader.html', 'lib/base/util', 'lib/base/klass', 'lib/base/element', 'lib/ui/base', 'lib/util/template/tpl', 'lib/util/flash/flash', './constant.js', './util.js' ],function( _template, _util, _k, _e, _ui, _t, _flash, _constant, _uploadUtil, _p, _o, _f, _r){ var _g = window; // 样式 var _seed_css = _e._$pushCSSText('.u-customImgUpload{}'); /** * * 自定义，可以截取的图片上传ui控件 * @class _$$CustomImgUploader * @extends _$$Abstract * @param {Object} _options 可选配置参数，已处理参数列表如下 * isLocal 是否是本地调试 * uploadUrl 用户图片上传链接，如果没有，则使用默认值 * customSize 用户自定义尺寸，只需传一个，例如：'100x100x1'， * uW 图片宽度限制（最终） * uH 图片高度限制（最终） * LW 左侧区域宽度 * LH 左侧区域高度 * dW 左侧拖动区域宽度 * dH 左侧拖动区域高度 * * @Event uploadComplete 上传完成回调 * @Event uploadError 上传错误，内容为错误信息 * @Event uploadStart 上传开始 * @Event emptyError 未选择图片错误 * * @method _$save 上传图片 * @method _$hasChange 图片是否改变，一般重新选择后就算改变，回调形式 * @method _$setDefaultPic 设置默认图片 * */ _p._$$CustomImgUploader = _k._$klass(); _pro = _p._$$CustomImgUploader._$extend(_ui._$$Abstract); /** * 初始化外观信息 * */ _pro.__initXGui = function() { this.__seed_html = _t._$addNodeTemplate(_template); }; /** * 初始化节点 * * @return {Void} */ _pro.__initNode = function() { this.__supInitNode(); // 初始化flash回调和js回调函数 this.__initGInterface(); // 初始化节点 this.__flashBox = this.__body; }; /** * 初始化全局接口 * @return {Void} */ _pro.__initGInterface = function(){ this.__jsNamespaceStr = 'edu.u.customImgUpload' + _util._$randNumberString(2); this.__jsNamespace = NEJ.P(this.__jsNamespaceStr); this.__jsNamespace.progressHandle = this.__uploadProcess._$bind(this); this.__jsNamespace.selectNewHandle = this.__selectNew._$bind(this); this.__jsNamespace.saveHandle = this.__uploadComplete._$bind(this); this.__jsNamespace.errorHandle = this.__uploadError._$bind(this); this.__jsNamespace.emptyHandle = this.__emptyError._$bind(this); } // 对外方法，设置默认图片 _pro._$setDefaultPic = function(_imgUrl){ this.__setFlashFunc(function(){ this.__flashObj.setDefaultPic(_imgUrl); }._$bind(this)); }; // 对外方法，保存图片 _pro._$save = function(){ this.__setFlashFunc(function(){ this.__flashObj.save(); }._$bind(this)); }; _pro._$hasChange = function(_callBack){ this.__setFlashFunc(function(){ _callBack &amp;&amp; _callBack(this.__flashObj.hasChange()); }._$bind(this)); }; /** * 选择了新图片 * @return {Void} */ _pro.__selectNew = function(){ this._$dispatchEvent('selectNew'); }; /** * 上传开始 * @return {Void} */ _pro.__uploadProcess = function(){ this._$dispatchEvent('_onBeginUpload'); }; /** * 上传完成 * @return {Void} */ _pro.__uploadComplete = function(_photo){ var _photoUrl = _photo.userDef1Url; this._$dispatchEvent('_onFinishUpload', _photoUrl); }; /** * 上传失败 * @return {Void} */ _pro.__uploadError = function(_errorMes){ this._$dispatchEvent('_onUploadError', _errorMes); }; /** * 未选择图片 * @return {Void} */ _pro.__emptyError = function(){ this._$dispatchEvent('emptyError', '未选择图片'); }; /** * 重置 * @param {Object} _options 可选配置参数，已处理参数列表如下 * isLocal 是否是本地调试 * uploadUrl 用户图片上传链接，如果没有，则使用默认值 * customSize 用户自定义尺寸，只需传一个，例如：'100x100x1'， * uW 图片宽度限制（最终） * uH 图片高度限制（最终） * LW 左侧区域宽度 * LH 左侧区域高度 * dW 左侧拖动区域宽度 * dH 左侧拖动区域高度 */ _pro.__reset = function(_options){ this.__supReset(_options); this.__genFlashUploader(_options); }; // 插入swf _pro.__genFlashUploader = function(_options) { var _flashvars = 'namespace=' + this.__jsNamespaceStr // js命名空间 + (_options.uploadUrl ? '&amp;url=' + _g.encodeURIComponent(_options.uploadUrl) : '') // 上传地址 + (_options.customSize ? '&amp;param=' + _options.customSize : '') // 上传参数 + (_options.uW ? '&amp;uW=' + _options.uW : '') // 图片宽度限制 + (_options.uH ? '&amp;uH=' + _options.uH : '') // 图片高度限制 + (_options.LW ? '&amp;LW=' + _options.LW : '&amp;LW=276') // 左侧宽度 + (_options.LH ? '&amp;LH=' + _options.LH : '&amp;LH=276') // 左侧高度 + (_options.dW ? '&amp;dW=' + _options.dW : '') // 拖动区域宽度 + (_options.dH ? '&amp;dH=' + _options.dH : '') // 拖动区域高度 var _swfUrl; if(_options.isLocal){ // 如果是本地调试则使用constant中的路径 _swfUrl = _constant.customImgUploaderSwfLocalPath; }else{ _swfUrl = _constant.customImgUploaderSwfRemoteUrl; } _flash._$flash({ src : _swfUrl, width : '100%', height : '100%', parent : this.__flashBox, params : { allowScriptAccess:'always', wmode:'transparent', flashvars:_flashvars }, onready : function(_flash){ this.__flashObj = _flash; }._$bind(this) }); } // 执行flash方法 _pro.__setFlashFunc = function(_func) { //设置数据 if(!!_func &amp;&amp; !!this.__flashObj){ try{ _func(); }catch(e){} }else{ if(!!this.__timer){ this.__timer = _g.clearInterval(this.__timer); } //100ms后再调用func this.__timer = _g.setInterval(function(){ if(!!_func &amp;&amp; !!this.__flashObj){ try{ _func(); }catch(e){} this.__timer = _g.clearInterval(this.__timer); } }._$bind(this),100); } }; /** * 控件销毁 */ _pro.__destroy = function(){ //先清空flash和反馈ui if(!!this.__flashBox){ var _list = _e._$getChildren(this.__flashBox); if(!!_list){ for(var i = 0; i &lt; _list.length; i++){ this.__flashBox.removeChild(_list[i]); } } } delete this.__flashObj; this.__supDestroy(); } // 返回结果可注入给其他文件 return _p; }); × Search results Close "},"uploader_defaultConfig.js.html":{"id":"uploader_defaultConfig.js.html","title":"Source: uploader/defaultConfig.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: uploader/defaultConfig.js /** * ---------------------------------------------------------------- * 上传默认配置 * @version 1.0 * @module pool/component-upload/src/uploader/defaultConfig * ---------------------------------------------------------------- */ NEJ.define([ 'base/util', './constant.js' ], function( _util, _constant, p, o, f, r){ p.isLocal = false; p.isdev = false; p.txt = '上传'; // 上传按钮文案 p.btnClassName = ''; // 上传按钮类 p.btnDisableClassName = ''; // 禁用的按钮类 p.type = _constant.UPLOAD_FILE_TYPE_VIDEO; // 默认上传的文件类型 p.mode = 0; // 跨域模式 // 应用认证接口，不同应用接口不一样 // 机构课程：study.163.com/j/coursedesign/TermManager/getEduUploaderToken.json // 企业课程：*.corp.study.163.com/j/coursedesign/TermManager/getEduUploaderToken.json p.initUploadUrl = _constant.DEFAULT_INIT_UPLOAD_URL; p.verifyFile = null; // 文件后缀过滤数组 p.onBeginUpload = null; // 开始上传事件 p.onUpdateProgress = null; // 开始上传事件 p.onFinishUpload = null; // 开始上传事件 p.onUploadError = null; // 上传出错事件 var getDefaultConfig = function(){ // 如果有uploaderDefaultConfig，则覆盖 if (window.uploaderDefaultConfig) { p = _util._$merge(p, window.uploaderDefaultConfig); }; return p; } return getDefaultConfig; }); × Search results Close "},"uploader_fileUploader2.js.html":{"id":"uploader_fileUploader2.js.html","title":"Source: uploader/fileUploader2.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: uploader/fileUploader2.js /** * ---------------------------------------------------------------- * 上传适配 * @version 1.0 * @module pool/component-upload/src/uploader/fileUploader2 * ---------------------------------------------------------------- */ NEJ.define([ 'lib/base/util', 'lib/base/klass', 'lib/base/element', 'lib/util/event', 'eutil/mobileUtil', './util.js', './constant.js', './flashUploader.js', './mutiFormUploader.js', './defaultConfig.js' ],function( _util, _k, _e, _event, _mobileUtil, _uploadUtil, _uploadConstant, _flashUploader, _mutiFormUploader, _defaultConfig, _p, _o, _f, _r){ /** * 参数： * _options: * parent * type * txt * verifyFile * initUploadUrl * maxUploadCount * * 事件回调: * onBeginUpload * onUpdateProgress * onFinishUpload * onUploadError * onMaxCount */ _p._$$UploadUI = _k._$klass(); _pro = _p._$$UploadUI._$extend(_event._$$EventTarget); _pro.__init = function(){ this.__super(); } _pro.__reset = function(_options){ this.__super(_options); // 配置 this.__config = _util._$merge({}, _defaultConfig()); // 从默认配置拷贝 this.__config = _util._$merge(this.__config, _options || {}, function(val){ return val === undefined; }); // 如果是undefined就不覆盖 this.__genUploader(); } // 生成具体的上传组件 _pro.__genUploader = function(){ if (this.__shouldUseFlash()) { this.__uploaderUI = _flashUploader._$$FlashUploadUI._$allocate(this.__config); }else{ this.__uploaderUI = _mutiFormUploader._$$MutiFileUploader._$allocate(this.__config); } } _pro.__shouldUseFlash = function(){ return !_uploadUtil._$canUseFileUploadByBlobs() &amp;&amp; (this.__config.type == _uploadConstant.UPLOAD_FILE_TYPE_VIDEO || this.__config.type == _uploadConstant.UPLOAD_FILE_TYPE_PDF); } _pro._destroy = function(){ if (this.__uploaderUI) { this.__uploaderUI._$recycle(); }; this.__supDestroy(); } //////////////////////////// 暴露的方法 //////////////////////////////// /** * 停止上传 * @return _index */ _pro._$abort = function(_index){ this.__uploaderUI._$abort(_index); } // 返回结果可注入给其他文件 return _p; }); × Search results Close "},"uploader_flashUploader.js.html":{"id":"uploader_flashUploader.js.html","title":"Source: uploader/flashUploader.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: uploader/flashUploader.js /** * ---------------------------------------------------------------- * flash多文件上传，用于低版本浏览器，有进度 * @version 1.0 * @module pool/component-upload/src/uploader/flashUploader * ---------------------------------------------------------------- */ NEJ.define([ 'text!./flashUploader.html', 'base/util', 'base/element', 'util/template/tpl', 'ui/base', 'util/ajax/xdr', './util.js', './constant.js', './uploaderBase.js', 'lib/util/flash/flash', ],function( _template, ut, e, t, ui, j, uploadUtil, uploadConst, uploaderBase, flash, p, o, f, r){ // 样式 var _seed_css = e._$pushCSSText('\\ .u-flashUpload{ position:relative; display:inline-block;}\\ .u-flashUpload .btnwrap{ text-align:center; overflow:hidden;}\\ .u-flashUpload .flashwrap{ overflow:hidden; position:absolute; top:0; left:0; width:100%; height:100%;}'); // 上传组件类 p._$$FlashUploadUI = NEJ.C(); var _proFlashUploadUI; _proFlashUploadUI = p._$$FlashUploadUI._$extend(uploaderBase._$$UploadBase, true); /** * 初始化外观信息 * */ _proFlashUploadUI.__initXGui = function() { this.__seed_css = _seed_css; this.__seed_html = t._$addNodeTemplate(_template); }; /** * 初始化节点 * * @return {Void} */ _proFlashUploadUI.__initNode = function() { this.__supInitNode(); // 初始化节点 this.__txtNode = e._$getByClassName(this.__body,'j-txt')[0]; this.__flashBox = e._$getByClassName(this.__body,'j-flashwrap')[0]; // 初始化flash回调和js回调函数 this.__initGInterface(); }; /** * 初始化全局接口 * @return {Void} */ _proFlashUploadUI.__initGInterface = function(){ this.__jsNamespaceStr = 'edu.u.flashUpload' + ut._$randNumberString(2); this.__jsNamespace = NEJ.P(this.__jsNamespaceStr); this.__jsNamespace.onselectFile = this.__onSelectFile._$bind(this); this.__jsNamespace.onuploading = this.__onUploading._$bind(this); this.__jsNamespace.onload = this.__onUploadComplete._$bind(this); this.__jsNamespace.onerror = function(_data){ this.__errorHandler(_data.index, _data); }._$bind(this); this.__jsNamespace.oneduError = function(_data){ this.__eduErrorHandler(_data.index, _data); }._$bind(this); this.__jsNamespace.onnosError = function(_data){ this.__nosErrorHandler(_data.index, _data); }._$bind(this); this.__jsNamespace.onmaxCount = this.__onMaxCount._$bind(this); } /** * 禁用 */ _proFlashUploadUI._$disable = function(_disable){ this.__super(_disable); if (this.__isDisable) { if(this.__config.btnDisableClassName){ e._$addClassName(this.__body, this.__config.btnDisableClassName); } }else{ if(this.__config.btnDisableClassName){ e._$delClassName(this.__body, this.__config.btnDisableClassName); } } this.__setFlashFunc(function(){ this.__flashObj.disable(_disable); }._$bind(this)); } /** * 取消上传 */ _proFlashUploadUI._$abort = function(_index){ this.__super(_index); this.__setFlashFunc(function(_index){ this.__flashObj.abortFileUpload(_index); }._$bind(this, _index)); } /** * 上传进度事件 */ _proFlashUploadUI.__onUploading = function(_data){ if (!!_data) { this.__config.onUpdateProgress &amp;&amp; this.__config.onUpdateProgress(_data); } }; /** * 上传完成处理 */ _proFlashUploadUI.__onUploadComplete = function(_data){ if (!!_data) { this.__config.onFinishUpload &amp;&amp; this.__config.onFinishUpload(_data); } }; /** * 统一的错误处理 */ _proFlashUploadUI.__errorHandler = function(_index, _data){ var _errdata = _data.data; if (!ut._$isObject(_errdata)) { _errdata = { message : _errdata } } var _str = (_errdata.code || _errdata.errCode || '') + (_errdata.errMsg || _errdata.msg || _errdata.message || '网络错误'); _data.data = { errMsg : _str, fileName : this.__dataCache[_data.index].fileName } this.__config.onUploadError &amp;&amp; this.__config.onUploadError(_data); } /** * edu接口错误处理 */ _proFlashUploadUI.__eduErrorHandler = function(_index, _data){ // 出错重试 if (_data.data.code == -2) { // edu token 过期错误 // 重新调用应用接口获取凭证 this.__getEduToken(_index); return; }; this.__errorHandler(_index, _data); } /** * nos接口错误处理 */ _proFlashUploadUI.__nosErrorHandler = function(_index, _msg){ // 可以添加出错重试 this.__dataCache[_index].nosErrorCount++; if(this.__dataCache[_index].nosErrorCount &lt;= 3){ // 重新调用应用接口获取凭证 this.__getEduToken(_index); return; } this.__errorHandler(_index, _msg); } // 超出个数限制 _proFlashUploadUI.__onMaxCount = function(_data) { this.__config.onMaxCount &amp;&amp; this.__config.onMaxCount(_data); } // 插入swf _proFlashUploadUI.__genFlashUploader = function(_options) { var _swfUrl; if(_options.isLocal){ // 如果是本地调试则使用constant中的路径 _swfUrl = uploadConst.flashUploaderSwfLocalPath; }else{ _swfUrl = uploadConst.flashUploaderSwfRemoteUrl; } _flash._$flash({ src : _swfUrl, width : '100%', height : '100%', parent : this.__flashBox, params : { allowScriptAccess:'always', wmode:'transparent' }, onready : function(_flash){ this.__flashObj = _flash; // 设置上传参数 this.__initFlashUploadParam(); }._$bind(this) }); } // 执行flash方法 _proFlashUploadUI.__setFlashFunc = function(_func) { //设置数据 if(!!_func &amp;&amp; !!this.__flashObj){ try{ _func(); }catch(e){} }else{ if(!!this.__timer){ this.__timer = _g.clearInterval(this.__timer); } //100ms后再调用func this.__timer = _g.setInterval(function(){ if(!!_func &amp;&amp; !!this.__flashObj){ try{ _func(); }catch(e){} this.__timer = _g.clearInterval(this.__timer); } }._$bind(this),100); } }; /** * 设置上传的参数 */ _proFlashUploadUI.__initFlashUploadParam = function(){ this.__setFlashFunc(function(){ this.__flashObj.initUpload({ getUploadUrl : uploadConst.GET_UPLOAD_PROGRESS_URL, saveUploadUrl : uploadConst.SAVE_UPLOAD_PROGRESS_URL, nameSpace : this.__jsNamespaceStr, blobSize : uploadConst.BLOBSIZE }); }._$bind(this)); } /** * 点击上传按钮的操作 */ _proFlashUploadUI.__onSelectFile = function(_data){ // 重新选择文件后重置 this.__isAbort = false; var _fileData = _data.data; var _fileName = _fileData.fileName; while (_fileName.indexOf('\\\\') != -1){ _fileName = _fileName.slice(_fileName.lastIndexOf('\\\\') + 1); } // 如果需要对文件格式进行判断，则调用this.__verifyFile进行判断，可由options传入 // 提供文件名和节点作为参数，不同浏览器对于file操作和属性不一样，需要自己处理 if(!!this.__config.verifyFile &amp;&amp; !this.__config.verifyFile(_fileName, _fileData.fileSize)){ return; } // 触发开始上传事件。等待外部获取nos信息后，需要主动调用_$startUpload开始上传 this.__config.onBeginUpload &amp;&amp; this.__config.onBeginUpload(_data); // 缓存 this.__dataCache.push({ isAbort : false, nosErrorCount : 0, // nos上传出错次数 index : _data.index, fileName : _fileName, beginTime : new Date().getTime(), // 开始上传的时间戳 fileSize : _fileData.fileSize, fileGmtModifiedTime : _fileData.fileGmtModifiedTime }); // 调用应用接口获取凭证 this.__getEduToken(_data.index); } // 上传方法 _proFlashUploadUI.__startUpload = function(_index){ this.__super(_index); // 开始断点续传 this.__getNosIP(_index, function(){ this.__setFlashFunc(function(_index){ var _data = this.__dataCache[_index]; this.__flashObj.fileUploadByBlobs({ index : _index, ip : this.__uploadIPs[_data.bucket][0], // 只用第一个地址 eduUploaderToken : _data.eduUploaderToken, nosKey : _data.nosKey, bucket : _data.bucket, xNosToken : _data.xNosToken }); }._$bind(this, _index)); }._$bind(this)); } /** * 重置ui * _options: * 配置: * parent * type * txt * verifyFile * initUploadUrl * maxUploadCount * * 事件回调: * onBeginUpload * onUpdateProgress * onFinishUpload * onUploadError * onMaxCount */ _proFlashUploadUI.__reset = function(_options){ this.__supReset(_options); this.__txtNode.innerHTML = this.__config.txt; if(this.__config.btnClassName){ e._$addClassName(this.__body, this.__config.btnClassName); } this.__genFlashUploader(_options); }; /** * 销毁ui */ _proFlashUploadUI.__destroy = function(){ //先清空flash和反馈ui if(!!this.__flashBox){ var _list = _e._$getChildren(this.__flashBox); if(!!_list){ for(var i = 0; i &lt; _list.length; i++){ this.__flashBox.removeChild(_list[i]); } } } // 清除类 if(this.__config.btnClassName){ e._$delClassName(this.__body, this.__config.btnClassName); } if(this.__config.btnDisableClassName){ e._$delClassName(this.__body, this.__config.btnDisableClassName); } delete this.__flashObj; this.__supDestroy(); } // 返回结果可注入给其他文件 return p; }); × Search results Close "},"uploader_formUploader.js.html":{"id":"uploader_formUploader.js.html","title":"Source: uploader/formUploader.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: uploader/formUploader.js /** * ---------------------------------------------------------------- * 表单文件上传，用于小文件，无进度 * @version 1.0 * @module pool/component-upload/src/uploader/formUploader * ---------------------------------------------------------------- */ NEJ.define([ 'text!./formUploader.html', 'base/util', 'base/element', 'util/template/tpl', 'ui/base', 'util/ajax/xdr', './util.js', './constant.js', './uploaderBase.js' ],function( _template, ut, e, t, ui, j, uploadUtil, uploadConst, uploaderBase, p, o, f, r){ // 样式 var _seed_css = e._$pushCSSText('\\ .u-formUpload{ position:relative; display:inline-block;}\\ .u-formUpload .showIpt{ text-align:center; overflow:hidden;}\\ .u-formUpload .filewrap{ overflow:hidden; position:absolute; top:0; left:0; width:100%; height:100%;}\\ .u-formUpload .realIpt{ font-size:100px; display:block; position:absolute; top:0; left:0; filter:alpha(opacity=0); opacity:0; cursor:pointer; width:100%; height:100%;}'); // 上传组件类 p._$$FormUploadUI = NEJ.C(); var _proFormUploadUI; _proFormUploadUI = p._$$FormUploadUI._$extend(uploaderBase._$$UploadBase, true); /** * 初始化外观信息 * */ _proFormUploadUI.__initXGui = function() { this.__seed_css = _seed_css; this.__seed_html = t._$addNodeTemplate(_template); }; /** * 初始化节点 * * @return {Void} */ _proFormUploadUI.__initNode = function() { this.__supInitNode(); //初始化节点 this.__showUpload = this.__body; this.__txtNode = e._$getByClassName(this.__body,'j-txt')[0]; this.__fileWrapNode = e._$getByClassName(this.__body,'j-filewrap')[0]; this.__uploadForm = e._$getByClassName(this.__body, 'j-uploadForm')[0]; // 表单节点 }; /** * 重置file域 */ _proFormUploadUI.__resetHtmlFileNode = function(_disable){ //允许多次选择同一个文件，因此每次都重置file域 var _html; if (!!_disable) { // 禁用 this.__fileWrapNode.innerHTML = ''; return } var _html = '&lt;input name=&quot;file&quot; type=&quot;file&quot; class=&quot;j-inputfile realIpt&quot; title=&quot;&quot;&gt;'; this.__fileWrapNode.innerHTML = _html; this.__realUpload = e._$getByClassName(this.__body, 'j-inputfile')[0]; this.__doInitDomEvent([[this.__realUpload, 'change', this.__uploadHandler._$bind(this)]]); } /** * 禁用 */ _proFormUploadUI._$disable = function(_disable){ this.__super(_disable); if (this.__isDisable) { if(this.__config.btnDisableClassName){ e._$addClassName(this.__showUpload, this.__config.btnDisableClassName); } }else{ if(this.__config.btnDisableClassName){ e._$delClassName(this.__showUpload, this.__config.btnDisableClassName); } } this.__resetHtmlFileNode(_disable); } /** * 取消上传 */ _proFormUploadUI._$abort = function(_index){ this.__super(_index); this.__resetHtmlFileNode(); } /** * 上传进度事件 */ _proFormUploadUI.__onUploading = function(_index, _data){ if (!!_data) { _data.initOffset = _data.initOffset || 0; _data.beginTime = this.__beginTime; _data.fileName = this.__file; this.__config.onUpdateProgress &amp;&amp; this.__config.onUpdateProgress(_data); } }; /** * 上传完成处理 */ _proFormUploadUI.__onUploadComplete = function(_index, _data){ _data = _data || {}; this.__resetHtmlFileNode(); if(_data.errCode){ // nos上传完成的结果也可能出错，包含了错误信息 this.__errorHandler(_index, _data); return; } var _data = { fileName : this.__file, // 视频文件的名称 nosKey : this.__nosKey, // 视频文件上传至nos的对象名 bucket : this.__bucket }; // 触发上传完成事件 this.__config.onFinishUpload &amp;&amp; this.__config.onFinishUpload(_data); }; /** * 统一的错误处理 */ _proFormUploadUI.__errorHandler = function(_index, _msg){ if (!ut._$isObject(_msg)) { _msg = { message : _msg } } var _str = (_msg.code || _msg.errCode || '') + (_msg.errMsg || _msg.msg || _msg.message || '网络错误'); this.__resetHtmlFileNode(); if (!this.__dataCache[_index].isAbort) { // 如果是主动取消，不抛错 this.__config.onUploadError &amp;&amp; this.__config.onUploadError({ errMsg : _str, fileName : this.__file }); }; } /** * edu接口错误处理 */ _proFormUploadUI.__eduErrorHandler = function(_index, _data){ // 出错重试 if (_data.code == -2) { // edu token 过期错误 // 重新调用应用接口获取凭证 this.__getEduToken(_index); return; }; this.__errorHandler(_index, _data); } /** * nos接口错误处理 */ _proFormUploadUI.__nosErrorHandler = function(_index, _msg){ // 可以添加出错重试 this.__dataCache[_index].nosErrorCount++; if(this.__dataCache[_index].nosErrorCount &lt;= 3){ // 重新调用应用接口获取凭证 this.__getEduToken(_index); return; } this.__errorHandler(_index, _msg); } /** * 点击上传按钮的操作 */ _proFormUploadUI.__uploadHandler = function(){ var _fileName = this.__realUpload.value; while (_fileName.indexOf('\\\\') != -1){ _fileName = _fileName.slice(_fileName.lastIndexOf('\\\\') + 1); } // 如果需要对文件格式进行判断，则调用this.__verifyFile进行判断，可由options传入 // 提供文件名和节点作为参数，不同浏览器对于file操作和属性不一样，需要自己处理 if(!!this.__config.verifyFile &amp;&amp; !this.__config.verifyFile(_fileName, uploadUtil._$getFileSize(this.__realUpload), this.__realUpload)){ this.__resetHtmlFileNode(); return; } // 触发开始上传事件。等待外部获取nos信息后，需要主动调用_$startUpload开始上传 this.__config.onBeginUpload &amp;&amp; this.__config.onBeginUpload({ 'name':this.__file, 'curTime':this.__beginTime }); var _index = this.__dataCache.length; // 缓存 this.__dataCache.push({ isAbort : false, nosErrorCount : 0, // nos上传出错次数 index : _index, fileName : _fileName, beginTime : new Date().getTime(), // 开始上传的时间戳 fileSize : uploadUtil._$getFileSize(this.__realUpload), fileGmtModifiedTime : uploadUtil._$getFileLastModifiedTime(this.__realUpload) }); // 调用应用接口获取凭证 this.__getEduToken(_index); } // 上传方法。判断选择哪种上传 _proFormUploadUI.__startUpload = function(_index){ this.__super(); if (this.__isSupportAnchor()) { // 开始断点续传 this.__getNosIP(_index, function(){ this.__startUploadByBlobs(_index); }._$bind(this)); }else{ this.__startFromUpload(_index); // 开始普通表单直传 } } /** * 开始表单上传 */ _proFormUploadUI.__startFromUpload = function(_index){ var _data = this.__dataCache[_index]; e._$getByClassName(this.__uploadForm, 'j-noskey')[0].value = _data.nosKey; e._$getByClassName(this.__uploadForm, 'j-xnostoken')[0].value = _data.xNosToken; // 普通表单上传 var _options = { type:'json', mode:this.__config.mode, method:'POST', cookie:false, headers:{}, onuploading:this.__onUploading._$bind(this, _index), // 表单上传没有进度，所以可以不传 onload:this.__onUploadComplete._$bind(this, _index), onerror:this.__nosErrorHandler._$bind(this, _index) }; // nos上传地址 this.__uploadForm.action = uploadConst.NOS_FORM_UPLOAD_URL + '/' + _data.bucket; _data.reqId = j._$upload(this.__uploadForm, _options); } /** * 开始断点上传 */ _proFormUploadUI.__startUploadByBlobs = function(_index){ var _data = this.__dataCache[_index]; var _reqdata = { 'fileName' : encodeURIComponent(_data.fileName), 'fileSize' : _data.fileSize, 'fileGmtModifiedTime' : _data.fileGmtModifiedTime, 'eduUploaderToken' : _data.eduUploaderToken, '_t' : (new Date()).getTime() } // 获取断点续传初始信息 _data.reqId = _j._$request(uploadConst.GET_UPLOAD_PROGRESS_URL, { type: 'json', method: 'GET', query : _reqdata, mode: this.__config.mode, cookie: false, onload: function(_index, _data) { if (_data.code != 0) { // 错误 this.__eduErrorHandler(_index, _data); }else{ var _res = _data.result; // result里面包含了context和offset if (!ut._$isObject(_res)) { _res = {}; _res.context = ''; _res.offset = 0; } // 请求回来之前就完成了 if (!this.__dataCache[_index]) return; // 请求回来之前就被abort了 if (this.__dataCache[_index].isAbort) return; if (_res.offset &gt;= this.__dataCache[_index].fileSize - 1) { // 上传已经完成 this.__dataCache[_index] = null; this.__onUploadComplete(_index); return; } _res.initOffset = _res.offset; // 第一次的偏移 this.__dataCache[_index].blobUploadData = _res; this.__uploadBlob(_index); } }._$bind(this, _index), onerror:this.__errorHandler._$bind(this, _index, '获取上传初始化信息失败！') }); }; // 上传分块 _proFormUploadUI.__uploadBlob = function (_index) { var _obj = this.__dataCache[_index]; if (!_obj) return; // 不存在可能是已经完成了 if (_obj.isAbort) return; // 不存在可能是已经abort了 // 新的blob var _nosKey = _obj.nosKey, _bucket = _obj.bucket, _xNosToken = _obj.xNosToken; // 分段字节数据 _obj.blob = uploadUtil.__blobSlice(this.__realUpload.files[0], _obj.blobUploadData.offset, _constant.BLOBSIZE); var _complete = (_obj.blobUploadData.offset + _obj.blob.size &gt;= _obj.fileSize); // 是否是最后一块 this.__uploadForm.action = this.__uploadIPs[_data.bucket][0] + '/' + _bucket + '/' + _nosKey + '?' + 'offset=' + _obj.blobUploadData.offset + '&amp;complete=' + _complete + (_obj.blobUploadData.context ? '&amp;context=' + _obj.blobUploadData.context : '') + // 第一次可能没有context '&amp;version=1.0'; var _uploading = function(_obj, _data) { var _proData = { timeStamp : (new Date()).getTime(), //_data.timeStamp, // 时间戳 loaded : _obj.blobUploadData.offset + _data.loaded, total : _obj.fileSize, initOffset : _obj.blobUploadData.initOffset } this.__onUploading(_proData); } var _onload = function(_obj, _data) { // 检查是否结束 if (_data.errMsg) { // nos上传出错 this.__nosErrorHandler(_obj.index, _data); }else if (_obj.blobUploadData.offset + _obj.blob.size &gt;= _obj.fileSize) { // 完成上传 this.__dataCache[_obj.index] = null; // 调用云课堂接口清空context和进度 _obj.blobUploadData.offset = 0; _obj.blobUploadData.context = ''; this.__saveUploadProgress(_obj, function(_data){ this.__onUploadComplete(_data); }._$bind(this, _data)); } else { // 缓存进度 _obj.blobUploadData.offset = _obj.blobUploadData.offset + _obj.blob.size; // 或者直接用_data.offset _obj.blobUploadData.context = _data.context; // 调用云课堂接口保存上传进度 this.__saveUploadProgress(_obj, function(){ // 继续上传 this.__uploadBlob(_obj.index); }) } } var _onerror = function(_obj, _data) { this.__nosErrorHandler(_obj.index, _data); } var _options = { type: 'json', mode: this.__config.mode, method: 'POST', timeout: 30 * 60 * 1000, // 超时：30分钟 cookie: false, headers: { 'Content-Type' : 'multipart/form-data', 'x-nos-token' : _xNosToken }, data: _obj.blob, onuploading: _uploading._$bind(this, _obj), onload: _onload._$bind(this, _obj), onerror: _onerror._$bind(this, _obj) } _obj.reqId = _j._$request(this.__uploadForm.action, _options); } // 保存文件上传的进度 _proFormUploadUI.__saveUploadProgress = function(_obj, _callBack){ var _data = { 'fileName' : encodeURIComponent(_obj.fileName), 'fileSize' : _obj.fileSize, 'context' : _obj.blobUploadData.context, 'offset' : _obj.blobUploadData.offset, 'fileGmtModifiedTime' : _obj.fileGmtModifiedTime, 'eduUploaderToken' : _obj.eduUploaderToken, '_t' : (new Date()).getTime() } // 保存断点续传上传进度 _data.reqId = _j._$request(_constant.SAVE_UPLOAD_PROGRESS_URL, { type: 'json', method: 'GET', query : _data, mode: this.__config.mode, cookie: false, onload: function(_obj, _callBack, _data) { if (_data.code != 0) { // 错误 this.__eduErrorHandler(_obj.index, _data); }else{ _callBack &amp;&amp; _callBack(); } }._$bind(this, _obj, _callBack), onerror:this.__errorHandler._$bind(this, _obj.index, '保存上传信息失败！') }); } /** * 重置ui * _options: * 配置: * parent * type * txt * verifyFile * initUploadUrl * * 事件回调: * onBeginUpload * onUpdateProgress * onFinishUpload * onUploadError */ _proFormUploadUI.__reset = function(_options){ this.__supReset(_options); this.__txtNode.innerHTML = this.__config.txt; if(this.__config.btnClassName){ e._$addClassName(this.__showUpload, this.__config.btnClassName); } // 允许多次选择同一个文件，因此每次都重置file域 this.__resetHtmlFileNode(); }; // 是否可以使用断点续传，只有视频和pdf支持 _proFormUploadUI.__isSupportAnchor = function(){ return uploadUtil._$canUseFileUploadByBlobs() &amp;&amp; (this.__config.type == uploadConst.UPLOAD_FILE_TYPE_VIDEO || this.__config.type == uploadConst.UPLOAD_FILE_TYPE_PDF); } /** * 销毁ui */ _proFormUploadUI.__destroy = function(){ // 清除类 if(this.__config.btnClassName){ e._$delClassName(this.__showUpload, this.__config.btnClassName); } if(this.__config.btnDisableClassName){ e._$delClassName(this.__showUpload, this.__config.btnDisableClassName); } this.__supDestroy(); } // 返回结果可注入给其他文件 return p; }); × Search results Close "},"uploader_uploaderBase.js.html":{"id":"uploader_uploaderBase.js.html","title":"Source: uploader/uploaderBase.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: uploader/uploaderBase.js /** * ---------------------------------------------------------------- * 上传文件基类 * 这种方案不太好，只是创建了多个formUploader。建议在formUploader中直接实现多个同时上传。当然复杂度其实差不多 * @version 1.0 * @module pool/component-upload/src/uploader/uploaderBase * ---------------------------------------------------------------- */ NEJ.define([ 'base/util', 'base/element', 'util/template/tpl', 'ui/base', 'util/ajax/xdr', './constant.js', './defaultConfig.js' ],function( ut, e, t, ui, j, uploadConst, defaultConfig, p, o, f, r){ // 上传组件类 p._$$UploadBase = NEJ.C(); var _proUploadBase; _proUploadBase = p._$$UploadBase._$extend(ui._$$Abstract, true); /** * 调用应用接口获取凭证，用于交换nos数据 */ _proUploadBase.__getEduToken = function(_index, _callBack){ // 调用应用接口 var _options = { sync : false, type : 'json', data : { 'fileName': encodeURIComponent(this.__dataCache[_index].fileName), 'type':this.__config.type, 'fileSize' : this.__dataCache[_index].fileSize, 'fileGmtModifiedTime' : this.__dataCache[_index].fileGmtModifiedTime }, query : {}, method : 'POST', timeout : 0, headers : {}, cookie : false, // 跨域请求是否带cookie，仅对CORS方式有效 mode : this.__config.mode, // 请求模式,针对跨域请求采用的请求方式 onload: function(_index, _data){ if(!!_data){ if (_data.code != 0) { // 错误 this.__eduErrorHandler(_index, _data); }else{ this.__dataCache[_index].eduUploaderToken = _data.result; if (_callBack) { _callBack(); }else{ // 交换token this.__getNosToken(_index); } } }else{ this.__errorHandler(_index, '上传失败！无数据返回'); } }._$bind(this, _index), onerror:this.__errorHandler._$bind(this, _index, '初始化上传失败！') }; this.__dataCache[_index].reqId = j._$request(this.__config.initUploadUrl, _options); } /** * 调用交换接口获取nos数据 */ _proUploadBase.__getNosToken = function(_index, _callBack){ // 调用token接口 var _options = { sync : false, type : 'json', query : { 'eduUploaderToken':this.__dataCache[_index].eduUploaderToken, 'fileName' : encodeURIComponent(this.__dataCache[_index].fileName), 'fileSize' : this.__dataCache[_index].fileSize, 'fileGmtModifiedTime' : this.__dataCache[_index].fileGmtModifiedTime, '_t' : (new Date()).getTime() }, method : 'GET', timeout : 0, headers : {}, cookie : false, // 跨域请求是否带cookie，仅对CORS方式有效 mode : this.__config.mode, // 请求模式,针对跨域请求采用的请求方式 onload: function(_index, _data){ if(!!_data){ if(_data.code != 0){ this.__eduErrorHandler(_index, _data); }else{ this.__dataCache[_index].xNosToken = _data.result.xnosToken; // nos token this.__dataCache[_index].bucket = _data.result.bucketName; // nos桶名 this.__dataCache[_index].nosKey = _data.result.nosKey; // 存储上传文件的object对象名 if (_callBack) { _callBack(); }else{ // 开始文件上传操作 this.__startUpload(_index); } } }else{ this.__errorHandler(_index, '上传失败！无数据返回'); } }._$bind(this, _index), onerror:this.__errorHandler._$bind(this, _index, '上传失败！') }; this.__dataCache[_index].reqId = j._$request(uploadConst.EXCHANGE_NOSTOKEN_URL, _options); } /** * 选择断点续传的ip */ _proUploadBase.__getNosIP = function(_index, _callBack){ var _bucket = this.__dataCache[_index].bucket; if (this.__uploadIPs[_bucket]) { // 已经获取了则马上开始 _callBack &amp;&amp; _callBack(); return; }; var _options = { sync : false, type : 'json', data : {}, query : {'version':'1.0', 'bucketname':_bucket}, method : 'GET', timeout : 0, cookie : false, // 跨域请求是否带cookie，仅对CORS方式有效 mode : this.__config.mode, // 请求模式,针对跨域请求采用的请求方式 onload: function(_data){ if(!!_data){ // 目前只使用第一个ip，建议增加重试功能，如果当前ip上传失败，使用下一个ip this.__uploadIPs[_bucket] = _data.upload; _callBack &amp;&amp; _callBack(); }else{ this.__errorHandler('上传失败！无法获得上传地址'); } }._$bind(this), onerror:this.__errorHandler._$bind(this, _index, '上传失败！') }; this.__dataCache[_index].reqId = j._$request(uploadConst.NOS_GET_IP_URL, _options); } /** * 上传错误事件，子类实现具体逻辑 */ _proUploadBase.__errorHandler = function(_index, _msg){ } /** * edu接口错误处理，子类实现具体逻辑 */ _proUploadBase.__eduErrorHandler = function(_index, _data){ } /** * nos接口错误处理，子类实现具体逻辑 */ _proUploadBase.__nosErrorHandler = function(_index, _msg){ } /** * 上传进度事件，子类实现具体逻辑 */ _proUploadBase.__onUploading = function(_data){ } /** * 上传完成事件，子类实现具体逻辑 */ _proUploadBase.__onUploadComplete = function(_data){ } /** * 获取nos数据后判断选择哪种上传，子类实现具体逻辑 */ _proUploadBase.__startUpload = function(_index){ } /** * 禁用，子类实现具体逻辑 */ _proUploadBase._$disable = function(_disable){ this.__isDisable = _disable; } /** * 取消上传，子类实现具体逻辑 */ _proUploadBase._$abort = function(_index){ var _data = this.__dataCache[_index]; if (!_data) { return; }; _data.isAbort = true; // 所有请求都取消 if(_data.reqId){ j._$abort(_data.reqId); _data.reqId = null; } } /** * 重置ui * _options: * 配置: * parent * type * txt * initUploadUrl * verifyFile * * 事件回调: * onBeginUpload * onUpdateProgress * onFinishUpload * onUploadError */ _proUploadBase.__reset = function(_options){ this.__supReset(_options); this.__config = _options; ////////////////////////// 上传相关数据 ///////////////////////// // 上传ip地址 this.__uploadIPs = {}; // 是否主动中断 this.__isAbort = false; // 是否禁用 this.__isDisable = false; // 缓存上传数据 this.__dataCache = [ /* { // 文件信息 fileName fileSize fileGmtModifiedTime // 请求凭证 eduUploaderToken // 访问nos的token信息 xNosToken // nos桶名 bucket // 存储上传文件的object对象名 nosKey // 请求id reqId // 其他信息 // 断点续传id blobUploadId } */ ]; }; /** * 销毁ui */ _proUploadBase.__destroy = function(){ // 停止全部 for (var i = this.__dataCache.length - 1; i &gt;= 0; i--) { if(this.__dataCache[i]){ this._$abort(i); } }; this.__supDestroy(); } // 返回结果可注入给其他文件 return p; }); × Search results Close "},"uploader_util.js.html":{"id":"uploader_util.js.html","title":"Source: uploader/util.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: uploader/util.js /** * ---------文件上传工具类处理------------------------------ * * @version 1.0 * @author tangtianliang(tangtianliang@corp.netease.com) * @module pool/component-upload/src/uploader/uploadUtil * --------------------------------------------------------- */ NEJ.define([ 'base/util', 'base/element', 'util/template/tpl', './constant.js', 'util/ajax/xdr' ], function( _u, _e, _t, _constant, _j, _util){ var _g = window; var _cache = {}; /** * 判断是否可以使用分块上传功能 * @param {Void} * * @return {Boolean} */ _util._$canUseFileUploadByBlobs = (function() { var _canCutUpload = !!_g.XMLHttpRequest &amp;&amp; !!_g.Blob &amp;&amp; !!Blob.prototype.hasOwnProperty(&quot;slice&quot;); return function() { return _canCutUpload; } })(); /** * 分块上传文件 * @param {Object} _options 支持的选项如下 * {FileObject} file 待上传的文件对象 * {Node} form * {Number} mode 请求代理模式 * {String} bucket * {String} nosKey * {String} xNosToken * {Function} onload 上传成功的回调 * {Function} onuploading progress回调 * {Function} onerror 上传失败的回调 * * @return {String} 这次上传的id，用于终止上传 */ _util._$fileUploadByBlobs = function(_options) { var _file = _options.file; if (!_file) return; if (!_options.key) { // 如果有key说明是更新 _options.key = _u._$randNumberString(); }; // 保存或者更新 _cache[_options.key] = _cache[_options.key] || {}; _cache[_options.key].options = _options; // 更新数据 var _data = { 'fileName' : encodeURIComponent(_options.fileName), 'fileSize' : _file.size, 'fileGmtModifiedTime' : _util._$getFileLastModifiedTime(_file), 'eduUploaderToken' : _options.eduUploaderToken, '_t' : (new Date()).getTime() } // 获取断点续传初始信息 _j._$request(_constant.GET_UPLOAD_PROGRESS_URL, { type: 'json', method: 'GET', query : _data, mode: _options.mode, cookie: false, onload: function(_options, _data) { if (_data.code != 0) { // 错误 _options.onerror &amp;&amp; _options.onerror(_data); }else{ var _res = _data.result; // result里面包含了context和offset if (!_u._$isObject(_res)) { _res = {}; _res.context = ''; _res.offset = 0; } // 请求回来之前就被abort了 if (!_cache[_options.key]) return; if (_res.offset &gt;= _file.size - 1) { // 上传已经完成 delete _cache[_options.key]; !!_options.onload &amp;&amp; _options.onload(); return; } _res.initOffset = _res.offset; // 第一次的偏移 _cache[_options.key].data = _res; _util.__uploadBlob(_options.key); } }._$bind(this, _options) }); return _options.key; }; // 分割文件 _util.__blobSlice = function (_file, _offset, _len) { var _end = Math.min(_offset + _len, _file.size); return _file.slice(_offset, _end); } // 上传分块 _util.__uploadBlob = function (_key) { var _obj = _cache[_key]; if (!_obj) return; // 不存在可能是已经abort了 // 新的blob var _op = _obj.options, _nosKey = _op.nosKey, _bucket = _op.bucket, _xNosToken = _op.xNosToken; _obj.blob = _util.__blobSlice(_op.file, _obj.data.offset, _constant.BLOBSIZE); var _complete = (_obj.data.offset + _obj.blob.size &gt;= _op.file.size); // 是否是最后一块 _op.form.action = _op.ip + '/' + _bucket + '/' + _nosKey + '?' + 'offset=' + _obj.data.offset + '&amp;complete=' + _complete + (_obj.data.context ? '&amp;context=' + _obj.data.context : '') + // 第一次可能没有context '&amp;version=1.0'; var _uploading = function(_obj, _data) { var _proData = { timeStamp : (new Date()).getTime(), //_data.timeStamp, // 时间戳 loaded : _obj.data.offset + _data.loaded, total : _op.file.size, initOffset : _obj.data.initOffset } _op.onuploading(_proData); } var _onload = function(_obj, _data) { // 检查是否结束 if (_data.errMsg) { // nos上传出错 _op.onerror(_data); }else if (_obj.data.offset + _obj.blob.size &gt;= _op.file.size) { // 完成上传 delete _cache[_key]; // 调用云课堂接口清空context和进度 _obj.data.offset = 0; _obj.data.context = ''; _util.__saveUploadProgress(_obj, function(_op, _data){ _op.onload(_data); }._$bind(this, _op, _data)); } else { // 缓存进度 _obj.data.offset = _obj.data.offset + _obj.blob.size; // 或者直接用_data.offset _obj.data.context = _data.context; // 调用云课堂接口保存上传进度 _util.__saveUploadProgress(_obj, function(){ // 继续上传 _util.__uploadBlob(_key); }) } } var _onerror = function(_data) { _op.onerror(_data); } var _options = { type: 'json', mode: _obj.options.mode, method: 'POST', timeout: 30 * 60 * 1000, // 超时：30分钟 cookie: false, headers: { 'Content-Type' : 'multipart/form-data', 'x-nos-token' : _xNosToken }, data: _obj.blob, onuploading: _uploading._$bind(this, _obj), onload: _onload._$bind(this, _obj), onerror: _onerror._$bind(this) } _cache[_key].reqId = _j._$request(_op.form.action, _options); } // 保存文件上传的进度 _util.__saveUploadProgress = function(_obj, _callBack){ var _options = _obj.options; var _data = { 'fileName' : encodeURIComponent(_options.fileName), 'fileSize' : _options.file.size, 'context' : _obj.data.context, 'offset' : _obj.data.offset, 'fileGmtModifiedTime' : _util._$getFileLastModifiedTime(_options.file), 'eduUploaderToken' : _options.eduUploaderToken, '_t' : (new Date()).getTime() } // 保存断点续传上传进度 _j._$request(_constant.SAVE_UPLOAD_PROGRESS_URL, { type: 'json', method: 'GET', query : _data, mode: _options.mode, cookie: false, onload: function(_obj, _callBack, _data) { if (_data.code != 0) { // 错误 _options.onerror &amp;&amp; _options.onerror(_data); }else{ _callBack &amp;&amp; _callBack(); } }._$bind(this, _obj, _callBack) }); } /** * 终止分块上传文件 * @param {String} _key 上传id * * @return {Void} */ _util._$abortFileUploadByBlobs = function(_key) { if (!!_cache[_key]) { _j._$abort(_cache[_key].reqId); _cache[_key] = null; } }; // 获取文件大小 _util._$getFileSize = function(_fileNode){ if (!_fileNode.files) { return ''; }; if (!_fileNode.files[0]) { return ''; }; return _fileNode.files[0].size || ''; } // 获取文件最后修改时间 _util._$getFileLastModifiedTime = function(_fileNode){ if (!_fileNode.files) { return ''; }; var _fileObj = _fileNode.files[0]; if (!_fileObj) { return ''; }; if (_fileObj.lastModified) { return _fileObj.lastModified; }else if (_fileObj.lastModifiedDate) { return _fileObj.lastModifiedDate.getTime(); }else{ return ''; } } return _util; }); × Search results Close "},"verifyFile.js.html":{"id":"verifyFile.js.html","title":"Source: verifyFile.js","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Source: verifyFile.js /** * ------------------ 统一的文件上传验证 ---------------------------- * verifyFile * @version 1.0 * @author hzwujiazhen(hzwujiazhen@corp.netease.com) * * @module pool/component-upload/src/util/verifyFile * ---------------------------------------------------------- */ define([ // 'rui/module/notify', 'pool/component-notify/src/notify/ui', './uploader/constant.js', 'eutil/numUtil', './uploader/util.js' ], function( notifyUI, constant, numUtil, util ){ // _fileNode是file节点，可以获取文件信息，不同浏览器有差异 var verifyFile = function(fileName, fileNode){ if (!fileName) { notifyUI &amp;&amp; notifyUI.warning('文件类型错误'); return false; }; var _fileSuffix = fileName.slice(fileName.lastIndexOf('\\.') + 1); var _suffixReg, _typeTxt; switch(+this.type){ case constant.UPLOAD_FILE_TYPE_PDF: _suffixReg = /pdf/i; _typeTxt = '仅支持pdf格式的文件！'; break; case constant.UPLOAD_FILE_TYPE_VIDEO: _suffixReg = /mp4|avi|rmvb|flv|wmv|mov|mpg|mpeg|rm|mkv/i; _typeTxt = '不支持该视频文件格式！'; break; case constant.UPLOAD_FILE_TYPE_ATTACH: _suffixReg = /xls|xlsx|ppt|pptx|doc|docx|pdf|txt|rar|zip|7z|gz|tar|png|jpg|jpeg|gif|bmp|mp3|midi|mid|wma|m4a|wav/i; _typeTxt = '不支持该附件文件格式！'; break; case constant.UPLOAD_FILE_TYPE_CAPTION: _suffixReg = /srt/i; _typeTxt = '仅支持srt格式的字幕文件！'; break; case constant.UPLOAD_FILE_TYPE_EXCEL: _suffixReg = /xls|xlsx/i; _typeTxt = '仅支持xls格式的文件！'; break; case constant.UPLOAD_FILE_TYPE_IMAGE: // 图片 _suffixReg = /jpg|png|jpeg|bmp|gif/i; _typeTxt = '请选择图片文件！'; break; default: break; } // 检查文件类型 if (!!_fileSuffix) { if (!!_suffixReg &amp;&amp; !_suffixReg.test(_fileSuffix)){ notifyUI &amp;&amp; notifyUI.warning(_typeTxt); return false; } }else{ notifyUI &amp;&amp; notifyUI.warning('文件类型错误'); return false; } // 再检查文件大小限制 var _fileSize = util._$getFileSize(fileNode); if (!_fileSize) { // 不支持判断文件大小 return true; }; var _sizeLimit, _sizeTxt; switch(+this.type){ case constant.UPLOAD_FILE_TYPE_PDF: _sizeLimit = constant.UPLOAD_SIZE_MAX_PDF; _sizeTxt = 'pdf文件不能大于' + numUtil._$formatFileSize(constant.UPLOAD_SIZE_MAX_PDF); break; case constant.UPLOAD_FILE_TYPE_VIDEO: _sizeLimit = constant.UPLOAD_SIZE_MAX_VIDEO; if(util._$canUseFileUploadByBlobs()){ _sizeTxt = '视频文件不能大于' + numUtil._$formatFileSize(constant.UPLOAD_SIZE_MAX_VIDEO); }else{ _sizeTxt = '您的浏览器版本较低，视频文件不能大于' + numUtil._$formatFileSize(constant.UPLOAD_SIZE_IE_MAX_VIDEO); } break; case constant.UPLOAD_FILE_TYPE_ATTACH: _sizeLimit = constant.UPLOAD_SIZE_MAX_ATTACH; _sizeTxt = '附件文件不能大于' + numUtil._$formatFileSize(constant.UPLOAD_SIZE_MAX_ATTACH); break; case constant.UPLOAD_FILE_TYPE_CAPTION: _sizeLimit = constant.UPLOAD_SIZE_MAX_CAPTION; _sizeTxt = '字幕文件不能大于' + numUtil._$formatFileSize(constant.UPLOAD_SIZE_MAX_CAPTION); break; case constant.UPLOAD_FILE_TYPE_EXCEL: _sizeLimit = constant.UPLOAD_SIZE_MAX_CAPTION; _sizeTxt = 'EXCEL文件不能大于' + numUtil._$formatFileSize(constant.UPLOAD_SIZE_MAX_CAPTION); break; case constant.UPLOAD_FILE_TYPE_IMAGE: // 图片 _sizeLimit = constant.UPLOAD_SIZE_MAX_IMAGE; _sizeTxt = '图片文件不能大于' + numUtil._$formatFileSize(constant.UPLOAD_SIZE_MAX_IMAGE); break; default: break; } if (_sizeLimit &amp;&amp; _fileSize &gt; _sizeLimit) { notifyUI &amp;&amp; notifyUI.warning(_sizeTxt); return false; } return true; }; return verifyFile; }); × Search results Close "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Modules Classes CustomFileUploadUI MutiFileUploadUI UploadPercentModalUI uploadProgressUI SimpleImgUploadUI UploadUI Upload Events uploadStart 上传开始 uploadUtil Parameters: Name Type Description _options Object 可选配置参数，已处理参数列表如下 Source: uploader/mutiFileUploader.js, line 35 uploadStart 上传开始 uploadUtil Parameters: Name Type Description _options Object 可选配置参数，已处理参数列表如下 Source: uploader/mutiFormUploader.js, line 37 beginUpload 开始上传时触发 Parameters: Name Type Description data object 上传相关属性 Source: custom_file_upload/component.js, line 28 finishUpload 上传结束时触发 Parameters: Name Type Description data object 上传相关属性 Source: custom_file_upload/component.js, line 42 updateProgress 更新进度时触发 Parameters: Name Type Description data object 上传相关属性 Source: custom_file_upload/component.js, line 35 uploadError 上传错误时触发 Parameters: Name Type Description data object 上传相关属性 Source: custom_file_upload/component.js, line 49 beginUpload 开始上传时触发 Parameters: Name Type Description data object 上传相关属性 Source: muti_file_upload/component.js, line 31 finishUpload 上传结束时触发 Parameters: Name Type Description data object 上传相关属性 Source: muti_file_upload/component.js, line 45 maxCount 超过最大数量出发 Parameters: Name Type Description maxCount object 最大数量 Source: muti_file_upload/component.js, line 59 updateProgress 更新进度时触发 Parameters: Name Type Description data object 上传相关属性 Source: muti_file_upload/component.js, line 38 uploadError 上传错误时触发 Parameters: Name Type Description data object 上传相关属性 Source: muti_file_upload/component.js, line 52 beginUpload 开始上传时触发 Parameters: Name Type Description data object 上传相关属性 Source: simple_img_upload/component.js, line 24 finishUpload 上传结束时触发 Parameters: Name Type Description data object 上传相关属性 Source: simple_img_upload/component.js, line 38 updateProgress 更新进度时触发 Parameters: Name Type Description data object 上传相关属性 Source: simple_img_upload/component.js, line 31 uploadError 上传错误时触发 Parameters: Name Type Description data object 上传相关属性 Source: simple_img_upload/component.js, line 45 beginUpload 开始上传时触发 Parameters: Name Type Description data object 上传相关属性 Source: upload/component.js, line 31 finishUpload 上传结束时触发 Parameters: Name Type Description data object 上传相关属性 Source: upload/component.js, line 45 updateProgress 更新进度时触发 Parameters: Name Type Description data object 上传相关属性 Source: upload/component.js, line 38 uploadError 上传错误时触发 Parameters: Name Type Description data object 上传相关属性 Source: upload/component.js, line 52 × Search results Close "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Classes Classes CustomFileUploadUI MutiFileUploadUI UploadPercentModalUI uploadProgressUI SimpleImgUploadUI UploadUI Upload Events uploadStart 上传开始 uploadUtil Parameters: Name Type Description _options Object 可选配置参数，已处理参数列表如下 Source: uploader/mutiFileUploader.js, line 35 uploadStart 上传开始 uploadUtil Parameters: Name Type Description _options Object 可选配置参数，已处理参数列表如下 Source: uploader/mutiFormUploader.js, line 37 beginUpload 开始上传时触发 Parameters: Name Type Description data object 上传相关属性 Source: custom_file_upload/component.js, line 28 finishUpload 上传结束时触发 Parameters: Name Type Description data object 上传相关属性 Source: custom_file_upload/component.js, line 42 updateProgress 更新进度时触发 Parameters: Name Type Description data object 上传相关属性 Source: custom_file_upload/component.js, line 35 uploadError 上传错误时触发 Parameters: Name Type Description data object 上传相关属性 Source: custom_file_upload/component.js, line 49 beginUpload 开始上传时触发 Parameters: Name Type Description data object 上传相关属性 Source: muti_file_upload/component.js, line 31 finishUpload 上传结束时触发 Parameters: Name Type Description data object 上传相关属性 Source: muti_file_upload/component.js, line 45 maxCount 超过最大数量出发 Parameters: Name Type Description maxCount object 最大数量 Source: muti_file_upload/component.js, line 59 updateProgress 更新进度时触发 Parameters: Name Type Description data object 上传相关属性 Source: muti_file_upload/component.js, line 38 uploadError 上传错误时触发 Parameters: Name Type Description data object 上传相关属性 Source: muti_file_upload/component.js, line 52 beginUpload 开始上传时触发 Parameters: Name Type Description data object 上传相关属性 Source: simple_img_upload/component.js, line 24 finishUpload 上传结束时触发 Parameters: Name Type Description data object 上传相关属性 Source: simple_img_upload/component.js, line 38 updateProgress 更新进度时触发 Parameters: Name Type Description data object 上传相关属性 Source: simple_img_upload/component.js, line 31 uploadError 上传错误时触发 Parameters: Name Type Description data object 上传相关属性 Source: simple_img_upload/component.js, line 45 beginUpload 开始上传时触发 Parameters: Name Type Description data object 上传相关属性 Source: upload/component.js, line 31 finishUpload 上传结束时触发 Parameters: Name Type Description data object 上传相关属性 Source: upload/component.js, line 45 updateProgress 更新进度时触发 Parameters: Name Type Description data object 上传相关属性 Source: upload/component.js, line 38 uploadError 上传错误时触发 Parameters: Name Type Description data object 上传相关属性 Source: upload/component.js, line 52 × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Upload 组件组件状态 组件文档组件详细文档请查看 这里 样式重写样式的层级结构如下所示 ux-upload |- ux-upload_xxx ux-upload_xxx__aa 描述描述 |- ux-upload_yyy ux-upload_yyy__bb 描述描述 |- ux-upload_zzz 描述描述可用的控制样式表 名称 描述 z-dis 描述描述 z-crt 描述描述 使用范例标签化使用组件关联的结构可如下所示 &lt;ux-upload&gt;&lt;/ux-upload&gt;脚本中使用组件内置样式和结构，使用者如果样式与结构同内置一致则可以直接使用，范例如下 NEJ.define([ 'pool/component-upload/src/upload_ui' ],function( UploadUI ){ var upload = new UploadUI({ data:{ } }); upload.$inject('#parent'); }) × Search results Close "},"pool_component-upload_src_uploader_mutiFileUploader%0A----------------------------------------------------------------module_.html":{"id":"pool_component-upload_src_uploader_mutiFileUploader%0A----------------------------------------------------------------module_.html","title":"Module: pool/component-upload/src/uploader/mutiFileUploader\n----------------------------------------------------------------","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/uploader/mutiFileUploader ---------------------------------------------------------------- 多文件同时上传 Version: 1.0 Source: uploader/mutiFileUploader.js, line 1 Events uploadStart 上传开始 uploadUtil Parameters: Name Type Description _options Object 可选配置参数，已处理参数列表如下 Source: uploader/mutiFileUploader.js, line 35 × Search results Close "},"pool_component-upload_src_uploader_mutiFormUploader%0A----------------------------------------------------------------module_.html":{"id":"pool_component-upload_src_uploader_mutiFormUploader%0A----------------------------------------------------------------module_.html","title":"Module: pool/component-upload/src/uploader/mutiFormUploader\n----------------------------------------------------------------","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/uploader/mutiFormUploader ---------------------------------------------------------------- 多文件同时上传（表单形式） 这种方案不太好，只是创建了多个formUploader。建议在formUploader中直接实现多个同时上传。当然复杂度其实差不多 Version: 1.0 Source: uploader/mutiFormUploader.js, line 1 Events uploadStart 上传开始 uploadUtil Parameters: Name Type Description _options Object 可选配置参数，已处理参数列表如下 Source: uploader/mutiFormUploader.js, line 37 × Search results Close "},"module-pool_component-upload_src_custom_file_upload_ui.html":{"id":"module-pool_component-upload_src_custom_file_upload_ui.html","title":"Module: pool/component-upload/src/custom_file_upload/ui","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/custom_file_upload/ui CustomFileUploadUI 组件带默认UI实现文件 Version: 1.0 Author: hztianxiang Source: custom_file_upload/ui.js, line 1 Classes CustomFileUploadUI × Search results Close "},"module-pool_component-upload_src_custom_file_upload_ui.CustomFileUploadUI.html":{"id":"module-pool_component-upload_src_custom_file_upload_ui.CustomFileUploadUI.html","title":"Class: CustomFileUploadUI","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Class: CustomFileUploadUI pool/component-upload/src/custom_file_upload/ui. CustomFileUploadUI new CustomFileUploadUI(options) Upload UI组件 Parameters: Name Type Description options Object Properties Name Type Description data Object 与视图关联的数据模型 Source: custom_file_upload/ui.js, line 17 Extends module:pool/component-upload/src/custom_file_upload/component.CustomFileUpload Methods abortUpload() 停止上传被触发 Inherited From: module:pool/component-upload/src/custom_file_upload/component.CustomFileUpload#abortUpload Source: custom_file_upload/component.js, line 134 Returns: Type void &lt;protected&gt; config() 模板编译前用来初始化参数 Parameters: Name Type Argument Default Description data.parent HTMLElement &lt;optional&gt; null 容器节点，上传组件注入的DOM节点 data.uploadbtnwrapTemplate string &lt;optional&gt; '' 上传模板，如果有，需要需要包含ref=uploadbtnwrap的节点 data.fileName string &lt;optional&gt; '' 文件名 data.beginTime string &lt;optional&gt; '' 上传时间 data.showProcess boolean &lt;optional&gt; false 是否显示进度条 data.progressData object &lt;optional&gt; null 进度条数据 data.type number &lt;optional&gt; 6 文件类型 data.btnTxt string &lt;optional&gt; '上传文件' 按钮文字 data.btnClassName string &lt;optional&gt; 'u-btn' 上传按钮样式 data.btnDisableClassName string &lt;optional&gt; 'u-btn-disabled' 上传按钮禁用样式 Inherited From: module:pool/component-upload/src/custom_file_upload/component.CustomFileUpload#config Overrides: module:pool/component-upload/src/custom_file_upload/component.CustomFileUpload#config Source: custom_file_upload/component.js, line 58 Returns: Type void &lt;protected&gt; destory() 组件销毁策略，如果有使用第三方组件务必在此先销毁第三方组件再销毁自己 Inherited From: module:pool/component-upload/src/custom_file_upload/component.CustomFileUpload#destory Source: custom_file_upload/component.js, line 152 Returns: Type void setDisable() 设置是否禁用组件 Inherited From: module:pool/component-upload/src/custom_file_upload/component.CustomFileUpload#setDisable Overrides: module:pool/component-upload/src/custom_file_upload/component.CustomFileUpload#setDisable Source: custom_file_upload/component.js, line 122 Returns: Type void × Search results Close "},"module-pool_component-upload_src_muti_file_upload_ui.html":{"id":"module-pool_component-upload_src_muti_file_upload_ui.html","title":"Module: pool/component-upload/src/muti_file_upload/ui","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/muti_file_upload/ui CustomFileUploadUI 组件带默认UI实现文件 Version: 1.0 Author: hztianxiang Source: muti_file_upload/ui.js, line 1 Classes MutiFileUploadUI × Search results Close "},"module-pool_component-upload_src_muti_file_upload_ui.MutiFileUploadUI.html":{"id":"module-pool_component-upload_src_muti_file_upload_ui.MutiFileUploadUI.html","title":"Class: MutiFileUploadUI","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Class: MutiFileUploadUI pool/component-upload/src/muti_file_upload/ui. MutiFileUploadUI new MutiFileUploadUI(options) Upload UI组件 Parameters: Name Type Description options Object Properties Name Type Description data Object 与视图关联的数据模型 Source: muti_file_upload/ui.js, line 17 Extends module:pool/component-upload/src/muti_file_upload/component.MutiFileUpload Methods &lt;protected&gt; _onMaxCount() 私有接口，上传文件超过最大数量 Overrides: module:pool/component-upload/src/muti_file_upload/component.MutiFileUpload#_onMaxCount Source: muti_file_upload/ui.js, line 35 Returns: Type void abortUpload() 停止上传 Inherited From: module:pool/component-upload/src/muti_file_upload/component.MutiFileUpload#abortUpload Source: muti_file_upload/component.js, line 120 Returns: Type void &lt;protected&gt; config() 模板编译前用来初始化参数 Parameters: Name Type Argument Default Description data.parent HTMLElement &lt;optional&gt; null 容器节点，上传组件注入的DOM节点 data.type number &lt;optional&gt; 6 文件类型 data.btnTxt string &lt;optional&gt; '多文件上传' 按钮文字 data.btnClassName string &lt;optional&gt; 'u-btn' 上传按钮样式 data.btnDisableClassName string &lt;optional&gt; 'u-btn-disabled' 上传按钮禁用样式 data.progressList array &lt;optional&gt; null 所有上传的进度数据 Inherited From: module:pool/component-upload/src/muti_file_upload/component.MutiFileUpload#config Source: muti_file_upload/component.js, line 68 Returns: Type void &lt;protected&gt; destroy() 组件销毁策略，如果有使用第三方组件务必在此先销毁第三方组件再销毁自己 Inherited From: module:pool/component-upload/src/muti_file_upload/component.MutiFileUpload#destroy Source: muti_file_upload/component.js, line 134 Returns: Type void &lt;protected&gt; init() 模板编译之后(即活动dom已经产生)处理逻辑，可以在这里处理一些与dom相关的逻辑 Inherited From: module:pool/component-upload/src/muti_file_upload/component.MutiFileUpload#init Source: muti_file_upload/component.js, line 92 Returns: Type void × Search results Close "},"module-pool_component-upload_src_progress_upload_percent_modal_ui.html":{"id":"module-pool_component-upload_src_progress_upload_percent_modal_ui.html","title":"Module: pool/component-upload/src/progress/upload_percent_modal/ui","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/progress/upload_percent_modal/ui CustomFileUploadUI 组件带默认UI实现文件 Version: 1.0 Author: hztianxiang Source: progress/upload_percent_modal/ui.js, line 1 Classes UploadPercentModalUI × Search results Close "},"module-pool_component-upload_src_progress_upload_percent_modal_ui.UploadPercentModalUI.html":{"id":"module-pool_component-upload_src_progress_upload_percent_modal_ui.UploadPercentModalUI.html","title":"Class: UploadPercentModalUI","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Class: UploadPercentModalUI pool/component-upload/src/progress/upload_percent_modal/ui. UploadPercentModalUI new UploadPercentModalUI(options) Upload UI组件 Parameters: Name Type Description options Object Properties Name Type Description data Object 与视图关联的数据模型 Source: progress/upload_percent_modal/ui.js, line 15 Extends module:pool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModal × Search results Close "},"module-pool_component-upload_src_progress_upload_progress_ui.html":{"id":"module-pool_component-upload_src_progress_upload_progress_ui.html","title":"Module: pool/component-upload/src/progress/upload_progress/ui","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/progress/upload_progress/ui CustomFileUploadUI 组件带默认UI实现文件 Version: 1.0 Author: hztianxiang Source: progress/upload_progress/ui.js, line 1 Classes uploadProgressUI × Search results Close "},"module-pool_component-upload_src_progress_upload_progress_ui.uploadProgressUI.html":{"id":"module-pool_component-upload_src_progress_upload_progress_ui.uploadProgressUI.html","title":"Class: uploadProgressUI","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Class: uploadProgressUI pool/component-upload/src/progress/upload_progress/ui. uploadProgressUI new uploadProgressUI(options) Upload UI组件 Parameters: Name Type Description options Object Properties Name Type Description data Object 与视图关联的数据模型 Source: progress/upload_progress/ui.js, line 15 Extends module:pool/component-upload/src/progress/upload_progress/component.UploadProgress Methods &lt;protected&gt; _onProgressDataChange() 当进度条数据回调 Inherited From: module:pool/component-upload/src/progress/upload_progress/component.UploadProgress#_onProgressDataChange Source: progress/upload_progress/component.js, line 50 Returns: Type void &lt;protected&gt; config() 模板编译前用来初始化参数 Parameters: Name Type Argument Default Description data.fileName string &lt;optional&gt; '' 文件名 data.supportProgress boolean &lt;optional&gt; false 是否显示进度条 data.beginTime number &lt;optional&gt; 0 上传时间 data.progressData object &lt;optional&gt; null 上传数据 Inherited From: module:pool/component-upload/src/progress/upload_progress/component.UploadProgress#config Source: progress/upload_progress/component.js, line 24 Returns: Type void &lt;protected&gt; formatTime() 时间格式化 Inherited From: module:pool/component-upload/src/progress/upload_progress/component.UploadProgress#formatTime Source: progress/upload_progress/component.js, line 85 Returns: Type void &lt;protected&gt; onClickAbort() 触发停止上传回调 Inherited From: module:pool/component-upload/src/progress/upload_progress/component.UploadProgress#onClickAbort Source: progress/upload_progress/component.js, line 100 Returns: Type void × Search results Close "},"module-pool_component-upload_src_simple-img-upload_ui.html":{"id":"module-pool_component-upload_src_simple-img-upload_ui.html","title":"Module: pool/component-upload/src/simple-img-upload/ui","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/simple-img-upload/ui 图片上传组件 组件带默认UI实现文件 Version: 1.0 Author: hztianxiang Source: simple_img_upload/ui.js, line 1 Classes SimpleImgUploadUI × Search results Close "},"module-pool_component-upload_src_simple-img-upload_ui.SimpleImgUploadUI.html":{"id":"module-pool_component-upload_src_simple-img-upload_ui.SimpleImgUploadUI.html","title":"Class: SimpleImgUploadUI","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Class: SimpleImgUploadUI pool/component-upload/src/simple-img-upload/ui. SimpleImgUploadUI new SimpleImgUploadUI(options) Upload UI组件 Parameters: Name Type Description options Object Properties Name Type Description data Object 与视图关联的数据模型 Source: simple_img_upload/ui.js, line 17 Extends module:pool/component-upload/src/simple-img-upload/component.SimpleImgUploadUI × Search results Close "},"module-pool_component-upload_src_ui.UploadUI.html":{"id":"module-pool_component-upload_src_ui.UploadUI.html","title":"Class: UploadUI","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Class: UploadUI UploadUI new UploadUI(options) Upload UI组件 Parameters: Name Type Description options Object Properties Name Type Description data Object 与视图关联的数据模型 Source: upload/ui.js, line 17 Extends module:pool/component-upload/src/upload.Upload Methods &lt;protected&gt; _onUploadError() 私有接口，上传失败回调 Source: upload/ui.js, line 35 Returns: Type void × Search results Close "},"module-pool_component-upload_src_upload_component.html":{"id":"module-pool_component-upload_src_upload_component.html","title":"Module: pool/component-upload/src/upload/component","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/upload/component Upload 组件实现文件 Version: 1.0 Author: hztianxiang Source: upload/component.js, line 1 × Search results Close "},"module-pool_component-upload_src_upload_ui.html":{"id":"module-pool_component-upload_src_upload_ui.html","title":"Module: pool/component-upload/src/upload/ui","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/upload/ui UploadUI 组件带默认UI实现文件 Version: 1.0 Author: hztianxiang Source: upload/ui.js, line 1 × Search results Close "},"module-pool_component-upload_src_upload_upload.Upload.html":{"id":"module-pool_component-upload_src_upload_upload.Upload.html","title":"Class: Upload","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Class: Upload Upload new Upload(options) Upload 组件 Parameters: Name Type Description options Object 组件构造参数 Properties Name Type Description data Object 与视图关联的数据模型 Source: upload/component.js, line 22 Extends module:pool/component-base/src/base.Base Methods &lt;protected&gt; config() 模板编译前用来初始化参数 Parameters: Name Type Argument Default Description data.parent HTMLElement &lt;optional&gt; null 容器节点，上传组件注入的DOM节点 data.type number &lt;optional&gt; 6 文件类型 data.btnTxt string &lt;optional&gt; '上传文件' 按钮文字 data.btnClassName string &lt;optional&gt; 'u-btn' 上传按钮样式 data.btnDisableClassName string &lt;optional&gt; 'u-btn-disabled' 上传按钮禁用样式 Source: upload/component.js, line 61 Returns: Type void Events beginUpload 开始上传时触发 Parameters: Name Type Description data object 上传相关属性 Source: upload/component.js, line 31 finishUpload 上传结束时触发 Parameters: Name Type Description data object 上传相关属性 Source: upload/component.js, line 45 updateProgress 更新进度时触发 Parameters: Name Type Description data object 上传相关属性 Source: upload/component.js, line 38 uploadError 上传错误时触发 Parameters: Name Type Description data object 上传相关属性 Source: upload/component.js, line 52 × Search results Close "},"pool_component-upload_src_custom_file_upload_component%0A----------------------------------------------------------module_.html":{"id":"pool_component-upload_src_custom_file_upload_component%0A----------------------------------------------------------module_.html","title":"Module: pool/component-upload/src/custom_file_upload/component\n----------------------------------------------------------","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/custom_file_upload/component ---------------------------------------------------------- 上传文件组件（含进度条） Version: 1.0 Author: hzwujiazhen(hzwujiazhen@corp.netease.com) Source: custom_file_upload/component.js, line 1 × Search results Close "},"pool_component-upload_src_muti-file-upload_component%0A----------------------------------------------------------module_.html":{"id":"pool_component-upload_src_muti-file-upload_component%0A----------------------------------------------------------module_.html","title":"Module: pool/component-upload/src/muti-file-upload/component\n----------------------------------------------------------","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/muti-file-upload/component ---------------------------------------------------------- 多文件组件 Version: 1.0 Author: hzwujiazhen(hzwujiazhen@corp.netease.com) Source: muti_file_upload/component.js, line 1 × Search results Close "},"pool_component-upload_src_progress_upload_percent_modal_component%0A----------------------------------------------------------module_.html":{"id":"pool_component-upload_src_progress_upload_percent_modal_component%0A----------------------------------------------------------module_.html","title":"Module: pool/component-upload/src/progress/upload_percent_modal/component\n----------------------------------------------------------","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/progress/upload_percent_modal/component ---------------------------------------------------------- 上传进度条组件 Version: 1.0 Author: hzchenqinhui(hzchenqinhui@corp.netease.com) Source: progress/upload_percent_modal/component.js, line 1 × Search results Close "},"pool_component-upload_src_progress_upload_progress_component%0A----------------------------------------------------------module_.html":{"id":"pool_component-upload_src_progress_upload_progress_component%0A----------------------------------------------------------module_.html","title":"Module: pool/component-upload/src/progress/upload_progress/component\n----------------------------------------------------------","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/progress/upload_progress/component ---------------------------------------------------------- 上传进度条组件 Version: 1.0 Author: hzwujiazhen(hzwujiazhen@corp.netease.com) Source: progress/upload_progress/component.js, line 1 × Search results Close "},"pool_component-upload_src_simple_img_upload_component%0A----------------------------------------------------------module_.html":{"id":"pool_component-upload_src_simple_img_upload_component%0A----------------------------------------------------------module_.html","title":"Module: pool/component-upload/src/simple_img_upload/component\n----------------------------------------------------------","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/simple_img_upload/component ---------------------------------------------------------- 简单图片文件组件 Version: 1.0 Author: hzwujiazhen(hzwujiazhen@corp.netease.com) Source: simple_img_upload/component.js, line 1 × Search results Close "},"pool_component-upload_src_uploader_constant%0A----------------------------------------------------------------module_.html":{"id":"pool_component-upload_src_uploader_constant%0A----------------------------------------------------------------module_.html","title":"Module: pool/component-upload/src/uploader/constant\n----------------------------------------------------------------","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/uploader/constant ---------------------------------------------------------------- 文件上传常量，不可做完配置更改 Version: 1.0 Author: hzlinannan(hzlinannan@corp.netease.com) Source: uploader/constant.js, line 1 × Search results Close "},"pool_component-upload_src_uploader_customImgUploader%0A----------------------------------------------------------------module_.html":{"id":"pool_component-upload_src_uploader_customImgUploader%0A----------------------------------------------------------------module_.html","title":"Module: pool/component-upload/src/uploader/customImgUploader\n----------------------------------------------------------------","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/uploader/customImgUploader ---------------------------------------------------------------- 可以截取图片的上传组件 Version: 1.0 Source: uploader/customImgUploader.js, line 1 Methods &lt;inner&gt; _$setDefaultPic 设置默认图片(_options) 自定义，可以截取的图片上传ui控件 Parameters: Name Type Description _options Object 可选配置参数，已处理参数列表如下 isLocal 是否是本地调试 uploadUrl 用户图片上传链接，如果没有，则使用默认值 customSize 用户自定义尺寸，只需传一个，例如：'100x100x1'， uW 图片宽度限制（最终） uH 图片高度限制（最终） LW 左侧区域宽度 LH 左侧区域高度 dW 左侧拖动区域宽度 dH 左侧拖动区域高度 Source: uploader/customImgUploader.js, line 35 × Search results Close "},"pool_component-upload_src_uploader_defaultConfig%0A----------------------------------------------------------------module_.html":{"id":"pool_component-upload_src_uploader_defaultConfig%0A----------------------------------------------------------------module_.html","title":"Module: pool/component-upload/src/uploader/defaultConfig\n----------------------------------------------------------------","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/uploader/defaultConfig ---------------------------------------------------------------- 上传默认配置 Version: 1.0 Source: uploader/defaultConfig.js, line 1 × Search results Close "},"pool_component-upload_src_uploader_fileUploader2%0A----------------------------------------------------------------module_.html":{"id":"pool_component-upload_src_uploader_fileUploader2%0A----------------------------------------------------------------module_.html","title":"Module: pool/component-upload/src/uploader/fileUploader2\n----------------------------------------------------------------","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/uploader/fileUploader2 ---------------------------------------------------------------- 上传适配 Version: 1.0 Source: uploader/fileUploader2.js, line 1 Members &lt;inner&gt; _p._$$UploadUI 参数： _options: parent type txt verifyFile initUploadUrl maxUploadCount 事件回调: onBeginUpload onUpdateProgress onFinishUpload onUploadError onMaxCount Source: uploader/fileUploader2.js, line 49 × Search results Close "},"pool_component-upload_src_uploader_flashUploader%0A----------------------------------------------------------------module_.html":{"id":"pool_component-upload_src_uploader_flashUploader%0A----------------------------------------------------------------module_.html","title":"Module: pool/component-upload/src/uploader/flashUploader\n----------------------------------------------------------------","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/uploader/flashUploader ---------------------------------------------------------------- flash多文件上传，用于低版本浏览器，有进度 Version: 1.0 Source: uploader/flashUploader.js, line 1 × Search results Close "},"pool_component-upload_src_uploader_formUploader%0A----------------------------------------------------------------module_.html":{"id":"pool_component-upload_src_uploader_formUploader%0A----------------------------------------------------------------module_.html","title":"Module: pool/component-upload/src/uploader/formUploader\n----------------------------------------------------------------","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/uploader/formUploader ---------------------------------------------------------------- 表单文件上传，用于小文件，无进度 Version: 1.0 Source: uploader/formUploader.js, line 1 × Search results Close "},"pool_component-upload_src_uploader_uploaderBase%0A----------------------------------------------------------------module_.html":{"id":"pool_component-upload_src_uploader_uploaderBase%0A----------------------------------------------------------------module_.html","title":"Module: pool/component-upload/src/uploader/uploaderBase\n----------------------------------------------------------------","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/uploader/uploaderBase ---------------------------------------------------------------- 上传文件基类 这种方案不太好，只是创建了多个formUploader。建议在formUploader中直接实现多个同时上传。当然复杂度其实差不多 Version: 1.0 Source: uploader/uploaderBase.js, line 1 × Search results Close "},"pool_component-upload_src_uploader_uploadUtil%0A---------------------------------------------------------module_.html":{"id":"pool_component-upload_src_uploader_uploadUtil%0A---------------------------------------------------------module_.html","title":"Module: pool/component-upload/src/uploader/uploadUtil\n---------------------------------------------------------","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/uploader/uploadUtil --------------------------------------------------------- ---------文件上传工具类处理------------------------------ Version: 1.0 Author: tangtianliang(tangtianliang@corp.netease.com) Source: uploader/util.js, line 1 Members &lt;inner&gt; _util._$canUseFileUploadByBlobs 判断是否可以使用分块上传功能 Source: uploader/util.js, line 33 Methods &lt;inner&gt; _util._$abortFileUploadByBlobs(_key) 终止分块上传文件 Parameters: Name Type Description _key String 上传id Source: uploader/util.js, line 250 Returns: Type Void &lt;inner&gt; _util._$fileUploadByBlobs(_options) 分块上传文件 Parameters: Name Type Description _options Object 支持的选项如下 {FileObject} file 待上传的文件对象 {Node} form {Number} mode 请求代理模式 {String} bucket {String} nosKey {String} xNosToken {Function} onload 上传成功的回调 {Function} onuploading progress回调 {Function} onerror 上传失败的回调 Source: uploader/util.js, line 56 Returns: 这次上传的id，用于终止上传 Type String × Search results Close "},"pool_component-upload_src_util_verifyFile%0A----------------------------------------------------------module_.html":{"id":"pool_component-upload_src_util_verifyFile%0A----------------------------------------------------------module_.html","title":"Module: pool/component-upload/src/util/verifyFile\n----------------------------------------------------------","body":" 教育产品组件开发文档 Modules pool/component-upload/src/custom_file_upload/uipool/component-upload/src/muti_file_upload/uipool/component-upload/src/progress/upload_percent_modal/uipool/component-upload/src/progress/upload_progress/uipool/component-upload/src/simple-img-upload/uipool/component-upload/src/upload/componentpool/component-upload/src/upload/uipool/component-upload/src/custom_file_upload/component ----------------------------------------------------------pool/component-upload/src/muti-file-upload/component ----------------------------------------------------------pool/component-upload/src/progress/upload_percent_modal/component ----------------------------------------------------------pool/component-upload/src/progress/upload_progress/component ----------------------------------------------------------pool/component-upload/src/simple_img_upload/component ----------------------------------------------------------pool/component-upload/src/uploader/constant ----------------------------------------------------------------pool/component-upload/src/uploader/customImgUploader ----------------------------------------------------------------pool/component-upload/src/uploader/defaultConfig ----------------------------------------------------------------pool/component-upload/src/uploader/fileUploader2 ----------------------------------------------------------------pool/component-upload/src/uploader/flashUploader ----------------------------------------------------------------pool/component-upload/src/uploader/formUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFileUploader ----------------------------------------------------------------pool/component-upload/src/uploader/mutiFormUploader ----------------------------------------------------------------pool/component-upload/src/uploader/uploaderBase ----------------------------------------------------------------pool/component-upload/src/uploader/uploadUtil ---------------------------------------------------------pool/component-upload/src/util/verifyFile ---------------------------------------------------------- Classes pool/component-upload/src/custom_file_upload/ui.CustomFileUploadUIpool/component-upload/src/muti_file_upload/ui.MutiFileUploadUIpool/component-upload/src/progress/upload_percent_modal/ui.UploadPercentModalUIpool/component-upload/src/progress/upload_progress/ui.uploadProgressUIpool/component-upload/src/simple-img-upload/ui.SimpleImgUploadUIpool/component-upload/src/ui.UploadUIpool/component-upload/src/upload/upload.Upload Events event:uploadStart 上传开始pool/component-upload/src/custom_file_upload/component.Upload#event:beginUploadpool/component-upload/src/custom_file_upload/component.Upload#event:finishUploadpool/component-upload/src/custom_file_upload/component.Upload#event:updateProgresspool/component-upload/src/custom_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/muti_file_upload/component.Upload#event:beginUploadpool/component-upload/src/muti_file_upload/component.Upload#event:finishUploadpool/component-upload/src/muti_file_upload/component.Upload#event:maxCountpool/component-upload/src/muti_file_upload/component.Upload#event:updateProgresspool/component-upload/src/muti_file_upload/component.Upload#event:uploadErrorpool/component-upload/src/simple_img_upload/component.Upload#event:beginUploadpool/component-upload/src/simple_img_upload/component.Upload#event:finishUploadpool/component-upload/src/simple_img_upload/component.Upload#event:updateProgresspool/component-upload/src/simple_img_upload/component.Upload#event:uploadErrorpool/component-upload/src/upload/upload.Upload#event:beginUploadpool/component-upload/src/upload/upload.Upload#event:finishUploadpool/component-upload/src/upload/upload.Upload#event:updateProgresspool/component-upload/src/upload/upload.Upload#event:uploadError Module: pool/component-upload/src/util/verifyFile ---------------------------------------------------------- ------------------ 统一的文件上传验证 ---------------------------- verifyFile Version: 1.0 Author: hzwujiazhen(hzwujiazhen@corp.netease.com) Source: verifyFile.js, line 1 × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
